(window.webpackJsonp=window.webpackJsonp||[]).push([[42,45],{433:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r(7),n=r(9),i=r(8),s=r.n(i);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l extends n.PureComponent{getChildContext(){const{heapPropsChain:e={}}=this.context,{heapProps:t={}}=this.props;return{heapPropsChain:"function"==typeof t?t(e):(function(e,t){if(p)return;const r=function(e,t){return Object.keys(e).filter(e=>e in t).filter(r=>e[r]!==t[r])}(e,t);r.length>0&&(a.a.warn("<HeapTracking/> props overwritten (see: ".concat(r.join(", "),")")),p=!0)}(e,t),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{},t))}}render(){return this.props.children||null}}c(l,"childContextTypes",{heapPropsChain:s.a.object.isRequired}),c(l,"contextTypes",{heapPropsChain:s.a.object});let p=!1},465:function(e,t,r){"use strict";var a=r(575);t.a=Object(a.a)({AUTHOR_PAPER:"authorPaper",PAPER_CITATION:"paperCitation"})},475:function(e,t,r){"use strict";r.r(t);var a=r(387),n=r(524),i=r(388),s=r(189),o=r(37),c=r(48),l=r(0),p=r(9),u=r(377),d=r.n(u);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}const m=l.List([c.c.RESULT,c.c.METHODOLOGY,c.c.BACKGROUND,null]);class f extends p.PureComponent{renderReferencesExcerptIntentTitle(e){return Object(o.c)(t=>t.references.excerptIntentLabel[e])}renderCitationsExcerptIntentTitle(e){const{citedPaperTitle:t}=this.props;return p.createElement(p.Fragment,null,Object(o.c)(t=>t.citations.excerptIntentLabel[e]),'"',p.createElement(i.c,{field:t,limit:50,expandable:!1}),'"')}render(){const{citationType:e,citationContexts:t,className:r,heapProps:a}=this.props,u=function(e){const t=(e,t,r)=>{const a=e.get(t)||l.List();return e.set(t,a.push(r))};return e.reduce((e,r)=>r.intents.length>0?r.intents.reduce((e,a)=>t(e,a,r.context),e):t(e,null,r.context),l.Map())}(t).sortBy((e,t)=>m.indexOf(t));return p.createElement("div",h({className:d()("cl-citation__excerpts",r)},a?Object(s.a)(a):{}),[...u.keys()].map(t=>p.createElement(n.a,{key:t||"null",title:t?e===c.a?this.renderReferencesExcerptIntentTitle(t):this.renderCitationsExcerptIntentTitle(t):Object(o.c)(e=>e.citations.excerptIntentLabel.none)},u.get(t).take(10).map((e,r)=>p.createElement("div",{key:"".concat(t||"null",".").concat(r),className:"cl-citation__excerpts__citation"},p.createElement(i.c,{field:e}))))))}}var b=r(587),g=r(395),y=r(562),E=r(391),O=r(67),v=r(10),_=r(19),S=r(122),P=r(112),w=r(14),x=r(8),C=r.n(x);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"INTENT",(function(){return j})),r.d(t,"EXCERPT",(function(){return I})),r.d(t,"HIGHLY_INFLUENCED",(function(){return k})),r.d(t,"TRUNCATE_TITLE_LENGTH",(function(){return D})),r.d(t,"default",(function(){return R})),r.d(t,"exampleConfig",(function(){return A}));const j="intent",I="excerpt",k="highlyInfluenced",D=50;class R extends p.PureComponent{constructor(){super(...arguments),N(this,"_onClickFlagAnalytics",null),N(this,"_setControlsExpandedContent",null),N(this,"setAnalyticsCallbacks",e=>{let{onClickFlag:t}=e;this._onClickFlagAnalytics=t}),N(this,"onClickExcerptAndIntents",()=>{this.onClickBox(I)}),N(this,"clearBoxes",()=>{this.setState({shownBoxType:null})}),this.state={shownBoxType:null}}onClickBox(e){this._onClickFlagAnalytics&&this._onClickFlagAnalytics({citationType:e});const{onClick:t}=this.props;"function"==typeof t&&t();const{shownBoxType:r}=this.state;if(this._setControlsExpandedContent){const t=e===r?null:this.renderExcerptContext();this._setControlsExpandedContent(t)}this.setState({shownBoxType:e===r?null:e})}getIntentsLabel(){const{shouldRenderIntents:e,citation:t,citationType:r}=this.props,{envInfo:a}=this.context;if(e&&!a.isMobile){const e=t.citationContexts.reduce((e,t)=>t.intents.reduce((e,t)=>e.add(t),e),l.Set());if(e.size>0){const t=e.map(e=>Object(o.c)(t=>t.citations.intentLabels[e])),a=Object(E.h)([...t]);return Object(o.c)(e=>e.citations.intentTypeLabel[r],a)}}}getExcerptsLabel(){const{citation:e}=this.props,t=e.citationContexts.size;if(t>0)return Object(_.n)(t,Object(o.c)(e=>e.citations.excerpts.singular,t),Object(o.c)(e=>e.citations.excerpts.plural,t),!0)}getExcerptAndIntentsFlag(){const{citation:e,citationType:t}=this.props,r=this.getIntentsLabel(),a=this.getExcerptsLabel();if(!r&&!a)return null;const n=[a,r].filter(Boolean).join(", ").toLowerCase(),i=Object(E.d)(n);return p.createElement(b.a,{onClick:this.onClickExcerptAndIntents,label:i,heapProps:{id:O.e,"paper-id":e.id,type:I,"citation-type":t}})}renderFlags(){const{excerpts:e}=this.props,{shownBoxType:t}=this.state,{envInfo:r}=this.context,a=!!e&&(!0===e?this.getExcerptAndIntentsFlag():e);if(!a)return null;const n=t===I||t===j;return r.isMobile?p.createElement("div",{className:"cl-paper-flags__paper-card"},a&&p.createElement("div",{className:"cl-paper-flags__paper-card__flag"},a)):p.createElement("ul",{className:"cl-paper__bulleted-row"},a&&p.createElement("li",{className:"cl-paper__bulleted-row__item cl-paper-flag__popover-button"},a&&p.createElement(p.Fragment,null,a,n&&p.createElement("div",{className:"cl-paper-flag__popover__arrow"}))))}renderBoxContext(e){if(!e)return null;switch(e){case I:return this.renderExcerptContext()}return Object(v.a)("paper-flags","render method for ".concat(e," is missing")),null}renderExcerptContext(){const{citation:e,citationType:t,citedPaperTitle:r}=this.props;return p.createElement(f,{citationType:t,citationContexts:e.citationContexts,citedPaperTitle:r,className:"cl-paper-flags__context__content"})}render(){const{heapProps:e,className:t}=this.props,{shownBoxType:r}=this.state,{envInfo:{isMobile:n}}=this.context,i=this.renderFlags();if(!i)return null;const o=p.createElement(a.b,{onUpdate:this.setAnalyticsCallbacks},p.createElement("div",T({className:d()("cl-paper-flags",t),"data-test-id":"citation"},e?Object(s.a)(e):{}),p.createElement("div",{className:"citation__body"},i),p.createElement(g.a,null,p.createElement("div",{className:d()({"cl-paper-flags__context":!0,"cl-paper-flags__context__is-visible":!!r})},this.renderBoxContext(r)))));return n?o:p.createElement(y.a.Consumer,null,e=>{let{setExpandedContent:t}=e;return this._setControlsExpandedContent=t,o})}}N(R,"defaultProps",{excerpts:!0,shouldRenderIntents:!1}),N(R,"contextTypes",{envInfo:C.a.instanceOf(P.a).isRequired});const L=S.a.fromJS({id:"id",title:{text:"title"},slug:"slug",authors:[],venue:{text:"venue"},year:2018,citationContexts:[{intents:["methodology"],context:Object(w.a)({text:"Yo, this paper was super good."})},{intents:["background"],context:Object(w.a)({text:"Yo, this paper was super good."})},{intents:["result"],context:Object(w.a)({text:"Yo, this paper was super good."})}],isKey:!0,badges:[]}),A={getComponent:async()=>R,fields:[{name:"className",desc:"HTML classes to be added to the component",value:{type:"text",default:""}}],examples:[{title:"Citation flags",desc:"Flags for a citation with all 3 types of excerpt/intents",props:{shouldRenderIntents:!0,citation:L,citationType:c.b,citedPaperTitle:Object(w.a)({text:"A Paper with Highlight",fragments:[{start:2,end:7}]})},render:e=>p.createElement("div",{style:{width:"600px",padding:"16px"}},e)},{title:"Reference flags",desc:"Flags for a reference with all 3 types of excerpt/intents",props:{shouldRenderIntents:!0,citation:L,citationType:c.a,citedPaperTitle:Object(w.a)({text:"A Paper with Highlight",fragments:[{start:2,end:7}]})},render:e=>p.createElement("div",{style:{width:"600px",padding:"16px"}},e)}],events:{}}},493:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return c}));var a=r(73),n=r(121);r(0);const i="inboundCitations",s="outboundCitations",o="similarPapers";function c(e){const t={paperId:e.paperId,page:e.page,section:e.section,sortOrder:e.sortOrder,swapPosition:e.swapPosition,clickedPosition:e.paperList.findIndex(t=>t.id===e.clickedPaper.id),listContext:e.paperList.map(e=>({paperId:e.id,authors:e.authors.map(e=>({name:e.alias.name,ids:e.alias.ids.toJS()})).toJS()})).toJS()};Object(n.a)(a.a.PaperDetail.ORDERED_PAPER_LIST_RESULT,t)}},518:function(e,t,r){"use strict";function a(e){return"https://www.facebook.com/sharer/sharer.php?u=".concat(e)}function n(e,t){return"https://twitter.com/intent/tweet?url=".concat(e,"&text=").concat(t)}function i(e){return"https://api.semanticscholar.org/CorpusID:".concat(e)}r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return i}))},519:function(e,t,r){"use strict";var a=r(22),n=r(0);const i=Object(a.a)({id:"twitter",name:"Twitter"}),s=Object(a.a)({id:"facebook",name:"Facebook"}),o=Object(a.a)({id:"email",name:"Email"}),c=Object(a.a)({id:"wikipedia",name:"Wikipedia"}),l=Object(a.a)({id:"direct_link",name:"Direct Link"}),p={TWITTER:i,FACEBOOK:s,EMAIL:o,WIKIPEDIA:c,DIRECT_LINK:l,shareOptions:()=>n.List.of(o,i,s,c,l)};Object.freeze(p),t.a=p},521:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var a=r(397),n=r(393),i=r(388),s=r(378),o=r(138),c=r(142),l=(r(116),r(118),r(405)),p=r(73),u=r(515),d=r(11),h=r(193),m=r(37),f=r(7),b=r(145),g=r(166),y=r(97),E=r(396),O=r(465),v=r(47),_=r(66),S=r(377),P=r.n(S),w=r(0),x=r(8),C=r.n(x),T=r(9);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class I extends T.Component{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),j(this,"doFetchSuggestions",()=>{const{queryText:e}=this.state,{suggestionType:t}=this.props;if(!(e.length<3))switch(t){case O.a.PAPER_CITATION:this.fetchPaperCitationCompletions();break;case O.a.AUTHOR_PAPER:this.fetchAuthorPaperCompletions();break;default:return void f.a.warn("Invalid: SuggestionType ".concat(t," is not associated with a completion call."))}}),j(this,"fetchPaperCitationCompletions",()=>{const{paperDetail:e,queryText:t}=this.state,{weblabStore:r,api:a}=this.context;if(!r.isFeatureEnabled(d.b.PDPCitationSuggestions)||!e)return;const n=e.paper.id;a.fetchCitationCompletions({paperId:n,prefixQuery:t}).then(e=>this.setSuggestions(e,!1))}),j(this,"fetchAuthorPaperCompletions",()=>{const{authorDetail:e,queryText:t}=this.state,{api:r}=this.context;if(!e)return;const a=e.author.id;r.fetchAuthorPaperCompletions({authorId:a,prefixQuery:t}).then(e=>this.setSuggestions(e,!0))}),j(this,"setSuggestions",(e,t)=>{const{queryText:r}=this.state,a=w.List(e.resultData.completions);t&&a.map(e=>{e.completionType===u.a.AUTHOR.pluralId&&(e.completionType=u.a.COAUTHOR.pluralId)}),this.setState(e=>{const t=e.queryText===r?r:e.suggestQueryText;return{suggestions:a,suggestQueryText:t}})}),j(this,"onChangeQueryText",e=>{const t=e.currentTarget.value;t.length>=3?this.setState({queryText:t,showSuggestions:!0,selectedSuggestionIndex:null},this.fetchSuggestions):this.setState({queryText:t,suggestQueryText:t,showSuggestions:!1,selectedSuggestionIndex:null})}),j(this,"clickSuggestion",()=>{this.setState({showSuggestions:!1},this.toggleFacetToSelectedSuggestion()),this.props.onSearchbarCondense&&this.props.onSearchbarCondense()}),j(this,"toggleFacetToSelectedSuggestion",()=>{const{selectedSuggestionIndex:e,suggestions:t}=this.state,{injectQueryStore:r}=this.props,{router:a}=this.context;if(null===e)return;const n=e||0,i=t.get(n),s=i.completionType,o=i.completion.text;switch(s){case u.a.AUTHOR.pluralId:r.routeToToggleFilter(u.a.AUTHOR.id,o,a);break;case u.a.COAUTHOR.pluralId:r.routeToToggleFilter(u.a.COAUTHOR.id,o,a);break;case u.a.PUBLICATION_TYPE.pluralId:r.routeToToggleFilter(u.a.PUBLICATION_TYPE.id,o,a);break;case u.a.VENUE.id:r.routeToToggleFilter(u.a.VENUE.id,o,a);break;case u.a.FIELDS_OF_STUDY.pluralId:{const e=Object(h.c)(o);r.routeToToggleFilter(u.a.FIELDS_OF_STUDY.pluralId,e.id,a);break}}}),j(this,"onSubmitQueryString",e=>{e.preventDefault();const{router:t}=this.context,{injectQueryStore:r,suggestionType:a}=this.props,n=this.state.queryText.trim();r.routeToQueryString(n,t);const i=this.getEventTarget(a);Object(v.a)(E.a.create(i,{queryString:n}))}),j(this,"onKeyDown",e=>{const{selectedSuggestionIndex:t,suggestions:r}=this.state,a=t||0;switch(e.keyCode){case 13:null!==t&&(e.preventDefault(),this.clickSuggestion());break;case 9:null!==t&&(e.preventDefault(),this.clickSuggestion(),this.setState({showSuggestions:!1,selectedSuggestionIndex:null}));break;case 27:this.setState({queryText:"",suggestQueryText:"",showSuggestions:!1,selectedSuggestionIndex:null});break;case 38:this.state.showSuggestions&&!r.isEmpty()&&(e.preventDefault(),null===t?this.selectSuggestion(r.size-1):0===t?this.selectNone():this.selectSuggestion(a-1));break;case 40:this.state.showSuggestions&&!r.isEmpty()&&(e.preventDefault(),null===t?this.selectSuggestion(0):t===r.size-1?this.selectNone():this.selectSuggestion(a+1))}}),j(this,"onFocus",()=>{this.props.onSearchbarFocus&&this.props.onSearchbarFocus(),this.setState({showSuggestions:!0},this.fetchSuggestions)}),j(this,"onBlur",()=>{this.setState({showSuggestions:!1})});const n=this.getStateFromQueryStore(),{queryText:i}=n;this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n,{},this.getStateFromPaperStore(),{},this.getStateFromAuthorStore(),{suggestQueryText:i,showSuggestions:!1,suggestions:w.List(),selectedSuggestionIndex:null}),this.props.injectQueryStore.registerComponent(this,()=>{const{queryText:e}=this.getStateFromQueryStore();this.setState({queryText:e,suggestQueryText:e,suggestions:w.List()})}),this.context.paperStore.registerComponent(this,()=>{this.setState(this.getStateFromPaperStore())}),this.context.authorStore.registerComponent(this,()=>{this.setState(this.getStateFromAuthorStore())})}componentDidMount(){this.fetchSuggestions=Object(l.a)(this.doFetchSuggestions,400,{leading:!0,trailing:!0})}componentWillUnmount(){this.fetchSuggestions&&this.fetchSuggestions.cancel()}getStateFromQueryStore(){return{query:this.props.injectQueryStore.getQuery(),queryText:this.props.injectQueryStore.getQuery().queryString||""}}getStateFromPaperStore(){return{paperDetail:this.context.paperStore.getPaperDetail()}}getStateFromAuthorStore(){return{authorDetail:this.context.authorStore.authorDetail}}getEventTarget(e){switch(e){case O.a.PAPER_CITATION:return p.a.PaperDetail.Citations.SEARCH;case O.a.AUTHOR_PAPER:return p.a.AuthorHomePage.Publications.SEARCH;default:return f.a.warn("Invalid: SuggestionType ".concat(e," is not associated with an event target.")),""}}onSuggestionMouseDown(e){e.preventDefault()}selectSuggestion(e,t){this.setState({selectedSuggestionIndex:e},t)}selectNone(){this&&this.setState({selectedSuggestionIndex:null})}shouldDisplaySuggestions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return e.showSuggestions&&!e.suggestions.isEmpty()}renderSuggestions(){const{selectedSuggestionIndex:e,suggestions:t}=this.state;return T.createElement("ul",{className:"suggestion-dropdown-menu","data-test-id":"citations-autocomplete-suggestions",onMouseLeave:this.selectNone},t.map((r,a)=>{let{completionType:n,completion:s}=r;const o=P()("flex-row-vcenter suggestion truncate-line",{cursor:a===e,"border-bottom":a!==t.size-1}),c=()=>{this.selectSuggestion(a,()=>{this.clickSuggestion()})},l="publicationTypes"===n?{text:Object(g.b)(s.text),fragments:[]}:s,p=n?Object(m.c)(e=>e.filterBar.shortLabels[n]):"";return T.createElement("li",{key:"".concat(s.text," ").concat(a),"data-test-id":"citations-".concat(n,"-suggestion"),className:o,onMouseEnter:()=>this.selectSuggestion(a),onMouseDown:this.onSuggestionMouseDown,onClick:()=>{c()}},T.createElement(i.c,{className:"suggestion__text truncate-line",field:l}),n&&T.createElement("span",{className:"suggestion-text-type"},"Â ",p))}))}render(){const{formId:e,containerClass:t,placeholder:r,isSearchbarFocused:i,suggestionType:o}=this.props,{queryText:c}=this.state;return T.createElement("form",{id:e||"dropdown-filters__search-within-form",className:"dropdown-filters__search-within-form",role:"search",onSubmit:this.onSubmitQueryString},T.createElement(n.a,{className:t||"search-within"},T.createElement(a.default,{type:"search",name:"cite_q",id:"search-within-input",className:P()("dropdown-filters__search-within-input",{expanded:i,"author-search":o===O.a.AUTHOR_PAPER}),autoComplete:"off",onChange:this.onChangeQueryText,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,placeholder:r,value:c}),T.createElement("button",{"aria-label":Object(m.c)(e=>e.appHeader.searchSubmitAriaLabel),className:"form-submit form-submit__icon-text"},T.createElement("div",{className:"flex-row-vcenter"},T.createElement(s.a,{width:"14",height:"14",icon:"search-small"})))),this.shouldDisplaySuggestions()?this.renderSuggestions():null)}}j(I,"contextTypes",{api:C.a.instanceOf(o.a).isRequired,authorStore:C.a.instanceOf(c.a).isRequired,history:C.a.instanceOf(y.a).isRequired,paperStore:C.a.instanceOf(b.b).isRequired,router:C.a.object.isRequired,weblabStore:C.a.instanceOf(_.b).isRequired})},522:function(e,t,r){"use strict";r.d(t,"b",(function(){return R}));var a=r(444),n=r(410),i=r(387),s=r(424),o=r(421),c=r(413),l=r(398),p=r(393),u=r(488),d=r(19),h=r(138),m=r(37),f=r(384),b=r(112),g=r(73),y=r(14),E=r(7),O=r(150),v=r(534),_=r(47),S=r(197),P=r(493),w=r(580),x=r(390),C=(r(0),r(9)),T=r(8),N=r.n(T);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class D extends C.PureComponent{constructor(){super(...arguments),this.trackClickSimilarPapersLink=this.trackClickSimilarPapersLink.bind(this),this.trackActionClick=this.trackActionClick.bind(this),this.state=I({papersHaveBeenRequested:!this.props.paperDetail.relatedPapers.isEmpty()},this.getStateFromStores()),this.context.paperNavStore.registerComponent(this,()=>{this.setState(I({},this.state,{},this.getStateFromStores()))})}componentDidUpdate(){const{isVisibleOrActive:e}=this.state;e&&this.loadRelatedPapers()}getStateFromStores(){const e=this.context.paperNavStore,t=e.navItems.get("related-papers");return{isVisibleOrActive:t&&(e.isItemVisible(t)||e.isItemActive(t))}}loadRelatedPapers(){const{paperDetail:{paper:e},paperFetchCount:t,paperRecommendationType:r}=this.props,{api:a}=this.context;e.id&&!this.state.papersHaveBeenRequested&&(setTimeout(()=>{a.fetchRelatedPapers(e.id,{limit:t,recommenderType:r})},0),this.setState({papersHaveBeenRequested:!0}))}trackClickSimilarPapersLink(e){Object(P.d)({paperId:this.props.paperDetail.paper.id,section:P.c,paperList:this.props.paperDetail.relatedPapers,swapPosition:null,clickedPaper:e});const t={paperId:this.props.paperDetail.paper.id,clickedPaperId:e.id};this.props.paperDetail.relatedPapers.forEach((function(e,r){t["paper".concat(r)]=e.id})),Object(S.a)([new f.a(g.a.PaperDetail.SIMILAR_PAPERS_LIST,t)])}trackActionClick(e,t){const r=this.context.analyticsLocation,a=f.a;if(r){const n=g.a.getIn(r,"Action",e),i=I({},t);Object(_.a)(a.create(n,i))}else E.a.warn("Unable to track ClickEvent from component <SimilarPapersCardBase /> because it doesn't have an analytics location")}renderMetaDataBottomFooter(e,t){return C.createElement("div",{className:"similar-papers__footer"},C.createElement("span",{className:"similar-papers__footer-left"},e.citationStats&&e.citationStats.numCitations>0&&C.createElement("span",{className:"similar-papers__footer-text"},C.createElement("span",{className:"similar-papers__footer-counts"},Object(d.f)(e.citationStats.numCitations)),Object(d.n)(e.citationStats.numCitations,Object(m.c)(e=>e.paperDetail.relatedPapers.citation.singular),Object(m.c)(e=>e.paperDetail.relatedPapers.citation.plural),!0)),e.citationStats&&e.citationStats.numKeyCitations>0&&C.createElement("span",{className:"similar-papers__footer-text"},C.createElement("span",{className:"similar-papers__footer-counts"},Object(d.f)(e.citationStats.numKeyCitations)),Object(d.n)(e.citationStats.numKeyCitations,Object(m.c)(e=>e.paperDetail.relatedPapers.highlyInfluenced.singular),Object(m.c)(e=>e.paperDetail.relatedPapers.highlyInfluenced.plural),!0))),C.createElement("div",{className:"similar-papers__footer-right"},C.createElement(u.a,{buttonText:Object(m.c)(e=>e.paper.action.saveShort),className:"similar-papers__metadata-save",paper:e,saveButtonIcon:"fa-bookmark-not-filled",trackLibraryClick:()=>this.trackActionClick("READING_LIST",{action:"save",paperId:e.id,index:t})})))}renderLoading(){const{offSet:e}=this.props;return C.createElement(p.a,{className:"similar-papers__body"},[...Array(e)].map((e,t)=>C.createElement(l.a,{className:"similar-papers__card",key:t},C.createElement("div",{className:"similar-papers-card__fold"}),C.createElement("div",{className:"similar-papers__shimmer"}))))}getCurrentPaperSet(e){const{offSet:t,currentIndex:r,smallScreenOffSet:a,showMoreToggle:n,isNarrowScreen:i}=this.props,s=Object(v.b)(e,t),o=s.size,c=r+t;let l;return l=r<=o-1&&r>o-t?s.slice(o-t,o):r<=0?s.slice(0,t):s.slice(r,c),n&&i?l=s.slice(0,a):i&&!n&&(l=s),l}getAbstractText(e){return e.tldr&&e.tldr.text.length<400?C.createElement(w.a,{paper:e}):e.paperAbstractTruncated?C.createElement(a.default,{abstract:Object(y.a)({text:e.paperAbstractTruncated})}):null}renderRelatedPaperFooter(e){return this.context.envInfo.isMobile?C.createElement(o.a,{paper:e,cite:!1}):C.createElement("div",{className:"similar-papers__paper-card-footer"},C.createElement(c.default,{paper:e}),C.createElement(n.default,{paper:e,viewPaper:!1,cite:!1}))}renderRelatedPapers(e){const t=this.getCurrentPaperSet(e),r=this.context.envInfo.isMobile;return C.createElement(p.a,{testId:"related-papers-list",className:"similar-papers__body"},e.isEmpty()?C.createElement("div",{className:"empty"},Object(m.c)(e=>e.paperDetail.relatedPapers.noPapers)):t.map((e,t)=>C.createElement(i.c,{key:t,paper:e,eventData:{index:t},onClickTitle:()=>this.trackClickSimilarPapersLink(e)},C.createElement(s.default,{paper:e,className:"similar-papers__paper-card",hasDogEar:!0,controls:!!r&&C.createElement(c.default,{paper:e}),abstract:this.getAbstractText(e),footer:this.renderRelatedPaperFooter(e)}))))}render(){const{paperDetail:{isLoadingRelatedPapers:e,relatedPapers:t}}=this.props;return e?this.renderLoading():this.renderRelatedPapers(t)}}function R(e){let{venue:t,year:r}=e;return t&&r?Object(m.c)(e=>e.paperDetail.relatedPapers.publisher.bothYearAndVenue,r):r?Object(m.c)(e=>e.paperDetail.relatedPapers.publisher.onlyYear,r):t?Object(m.c)(e=>e.paperDetail.relatedPapers.publisher.onlyVenue):null}k(D,"contextTypes",{analyticsLocation:N.a.object,api:N.a.instanceOf(h.a).isRequired,paperNavStore:N.a.instanceOf(O.a).isRequired,envInfo:N.a.instanceOf(b.a).isRequired}),k(D,"defaultProps",{currentIndex:0,paperFetchCount:10,offSet:3,isMobile:!1,mobileOffSet:2,showMoreTruncated:!0}),t.a=Object(x.b)(g.a.PaperDetail.RelatedPapers)(D)},524:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var a=r(189),n=r(9),i=r(377),s=r.n(i);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function c(e){let{title:t,children:r,onClick:i,className:c,heapProps:l}=e;return n.createElement("div",o({className:s()("cl-paper-flags__content",c),onClick:i},l?Object(a.a)(l):{}),t&&n.createElement("div",{className:"cl-paper-flags__content-title"},t),r&&n.createElement("div",{className:"cl-paper-flags__content-body"},r))}},534:function(e,t,r){"use strict";var a=r(447),n=r(522),i=r(9);class s extends i.PureComponent{isActive(){const{indicatorIndex:e,offSet:t,paperCount:r,currentIndex:a}=this.props;return function(e){let{currentIndex:t,indicatorIndex:r,offSet:a,paperCount:n}=e;return t<=0?r>=0&&r<a:r>=t&&r<t+a||t>=n-a&&t<=n-1&&(r>=t||r>=n-a)}({indicatorIndex:e,offSet:t,paperCount:r,currentIndex:a})}render(){return i.createElement("li",{className:this.isActive()?"carousel-indicator carousel-indicator-active":"carousel-indicator"})}}var o=r(138),c=r(51),l=r(37),p=(r(23),r(0),r(8)),u=r.n(p),d=r(512);function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return f}));class m extends i.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),h(this,"selectSizeRender",()=>{const e=window.innerWidth;e<1300&&e>800?this.setState({offSet:2,isNarrowScreen:!1}):e<800?this.setState({isNarrowScreen:!0}):e>=1300&&this.setState({offSet:3,isNarrowScreen:!1})}),h(this,"getPreviousPaperSet",()=>{const{offSet:e,currentIndex:t}=this.state;t<0&&this.setState({currentIndex:0}),0!==t&&this.setState({currentIndex:t-e}),this.setState({animationClassName:"carousel-left"})}),h(this,"getNextPaperSet",()=>{const{offSet:e,currentIndex:t}=this.state,{paperDetail:{relatedPapers:r}}=this.props;t===r.size-1||t<0?this.setState({currentIndex:0}):this.setState({currentIndex:t+e}),this.setState({animationClassName:"carousel-right"})}),h(this,"renderIndicators",()=>{const{paperDetail:{relatedPapers:e}}=this.props,{currentIndex:t,offSet:r}=this.state,a=f(e,r),n=a.size;return i.createElement("ul",{className:"carousel-indicators"},a.map((e,a)=>i.createElement(s,{key:a,currentIndex:t,indicatorIndex:a,offSet:r,paperCount:n})))}),h(this,"onShowMoreClick",()=>{const{showMoreToggle:e}=this.state;this.setState({showMoreToggle:!e})}),h(this,"setCarouselContainer",e=>{this._carouselContainerRef=e}),this.state={paperFetchCount:10,paperRecommendationType:"relatedPapers",currentIndex:0,offSet:3,screenWidth:null,animationClassName:"",isNarrowScreen:!1,smallScreenOffSet:2,showMoreToggle:!0,heightPx:null}}componentDidMount(){c.a.requestAnimationFrame(()=>{this.setState({screenWidth:window.innerWidth})}),window.matchMedia("(max-width: ".concat(800,"px)")).onchange=this.selectSizeRender,window.matchMedia("(min-width: ".concat(800,"px) and (max-width: ").concat(1300,"px)")).onchange=this.selectSizeRender,window.matchMedia("(min-width: ".concat(1300,"px)")).onchange=this.selectSizeRender,this.selectSizeRender()}componentDidUpdate(){if(!this.props.paperDetail.isLoadingRelatedPapers&&!this.state.heightPx){const e=this._carouselContainerRef?this._carouselContainerRef.clientHeight:0;this.setState({heightPx:e})}}renderSimilarPapers(){const{offSet:e,currentIndex:t,paperFetchCount:r,paperRecommendationType:a,animationClassName:s,isNarrowScreen:o,smallScreenOffSet:c,showMoreToggle:l}=this.state;return i.createElement(d.CSSTransitionGroup,{transitionName:s,transitionEnterTimeout:600,transitionLeaveTimeout:600},i.createElement(n.a,{key:t,paperDetail:this.props.paperDetail,currentIndex:t,paperFetchCount:r,paperRecommendationType:a,offSet:e,isNarrowScreen:o,smallScreenOffSet:c,showMoreToggle:l}))}showLeftArrow(){const{currentIndex:e}=this.state;return!(e<=0)}showRightArrow(){const{currentIndex:e,offSet:t}=this.state,{paperDetail:{relatedPapers:r}}=this.props,a=f(r,t);return!(e+t>=a.size)&&!(e===a.size-1)}render(){const{showMoreToggle:e,smallScreenOffSet:t,isNarrowScreen:r,heightPx:n}=this.state,{paperDetail:{relatedPapers:s}}=this.props,o=s.size,c=n?"".concat(n/2-20,"px"):0;return i.createElement("div",{ref:this.setCarouselContainer,className:"carousel-container"},!r&&this.renderIndicators(),this.showLeftArrow()&&!r?i.createElement(a.a,{direction:a.a.Direction.LEFT,onClick:this.getPreviousPaperSet,className:"carousal-arrow",style:{top:c}}):null,i.createElement("div",{className:"content-wrapper"},this.renderSimilarPapers()),this.showRightArrow()&&!r?i.createElement(a.a,{direction:a.a.Direction.RIGHT,onClick:this.getNextPaperSet,className:"carousal-arrow",style:{top:c}}):null,r&&i.createElement("div",{className:"narrow-view-footer-container"},i.createElement("div",{className:"show-more",onClick:this.onShowMoreClick},i.createElement(a.a,{direction:e?a.a.Direction.DOWN:a.a.Direction.UP,onClick:this.onShowMoreClick,className:"carousal-arrow"}),i.createElement("p",{className:"toggle-text"},e?Object(l.c)(e=>e.paperDetail.relatedPapers.narrowViewToggle.ShowMoreToggleText):Object(l.c)(e=>e.paperDetail.relatedPapers.narrowViewToggle.ShowLessToggleText))),i.createElement("div",{className:"number-indicator"},e?t.toLocaleString():o.toLocaleString(),"/",o.toLocaleString())))}}function f(e,t){const r=e.size%t;return e.slice(0,e.size-r)}h(m,"contextTypes",{api:u.a.instanceOf(o.a).isRequired})},577:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var a=r(447),n=r(378),i=r(379),s=r(377),o=r.n(s),c=r(9);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends c.PureComponent{constructor(){super(...arguments),l(this,"onToggleClick",()=>{this.setState(e=>{let{isCollapsed:t}=e;return{isCollapsed:!t}}),this.props.onToggle&&this.props.onToggle()}),this.state={isCollapsed:!(!this.props.isCollapsible||this.props.startOpen)}}renderTitle(){const{icon:e,title:t}=this.props;return c.createElement("span",{className:"info-box__title flex-row-vcenter"},e?c.createElement(n.a,{icon:e,className:"flex-static",width:"25",height:"25"}):null,c.createElement("h3",null,t))}renderHeader(){const{isCollapsible:e,title:t,titleLinkProps:r}=this.props,{isCollapsed:n}=this.state,s=n?a.a.Direction.DOWN:a.a.Direction.UP;return t?c.createElement("div",{className:"info-box__header flex-row-vcenter flex-space-between",onClick:this.onToggleClick},r?c.createElement(i.a,r,this.renderTitle()):this.renderTitle(),e?c.createElement("span",{className:"info-box__toggle"},c.createElement(a.a,{className:"flex-static",direction:s,width:"14",height:"14"})):null):null}render(){const{className:e,children:t}=this.props,{isCollapsed:r}=this.state,a=o()("info-box",e);return c.createElement("div",{className:a},this.renderHeader(),r?null:c.createElement("div",{className:"info-box__content"},t))}}l(p,"defaultProps",{isCollapsible:!1,startOpen:!1})},578:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var a=r(400),n=r(378),i=r(51),s=r(384),o=r(112),c=r(73),l=r(37),p=r(518),u=r(17),d=r(519),h=r(47),m=r(377),f=r.n(m),b=r(8),g=r.n(b),y=r(9);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class O extends y.PureComponent{constructor(e,t){super(e,t),E(this,"onClickEmail",this.onClickShareLink.bind(this,d.a.EMAIL)),E(this,"onClickFacebook",this.onClickShareLink.bind(this,d.a.FACEBOOK)),E(this,"onClickTwitter",this.onClickShareLink.bind(this,d.a.TWITTER)),E(this,"onClickWikipedia",this.onClickShareLink.bind(this,d.a.WIKIPEDIA)),E(this,"onClickDirectLink",this.onClickShareLink.bind(this,d.a.DIRECT_LINK)),this.state={copiedUrl:!1}}trackShareEvent(e){const t=s.a.create(c.a.SHARE,{socialType:e.id});Object(h.a)(t)}copyToClipboard(e){i.a.copyToClipboard(e),this.setState({copiedUrl:!0})}onClickShareLink(e){const{title:t,message:r,corpusId:a}=this.props;this.trackShareEvent(e);const n=window.location.href,i=encodeURIComponent("".concat(n,"?utm_source=").concat(e.id)),s=t?encodeURIComponent(t):"",o=r?"".concat(encodeURIComponent(r),": ").concat(i):n;let c="";switch(e){case d.a.EMAIL:c="mailto:?subject=".concat(s,"&body=").concat(o);break;case d.a.FACEBOOK:c=Object(p.b)(i);break;case d.a.WIKIPEDIA:a&&(c=Object(p.a)(a));break;case d.a.DIRECT_LINK:c=n;break;case d.a.TWITTER:c=Object(p.c)(i,s)}e===d.a.EMAIL?window.location.href=c:e===d.a.WIKIPEDIA||e===d.a.DIRECT_LINK?this.copyToClipboard(c):window.open(c,"_blank","left=100,top=100,width=800,height=500,toolbar=1,resizable=0,rel=noreferrer")}render(){const{envInfo:{isMobile:e}}=this.context,{copiedUrl:t}=this.state,r=f()(this.props.className,{"social-share-options__button-container-mobile":e,"social-share-options__button-container":!e}),{label:i}=this.props,s=t?Object(l.c)(e=>e.socialShareOptions.shareButtonLabel.directShareHoverTextCopied):Object(l.c)(e=>e.socialShareOptions.shareButtonLabel.directShareHoverText);return y.createElement("div",{className:r},y.createElement("div",{className:"social-share-options__share-buttons"},i&&i,y.createElement(n.a,{icon:"share-twitter","data-test-id":"social-share-options__share-social-icon__twitter",className:"social-share-options__share-social-icon",onClick:this.onClickTwitter}),y.createElement(n.a,{icon:"share-facebook",className:"social-share-options__share-social-icon","data-test-id":"social-share-options__share-social-icon__facebook",onClick:this.onClickFacebook}),y.createElement(a.default,{placement:a.PLACEMENT.BOTTOM,tooltipContent:s},y.createElement(n.a,{icon:"fa-link-box",className:"social-share-options__share-social-icon","data-test-id":"social-share-options__share-social-icon__link",onClick:this.props.corpusId?this.onClickWikipedia:this.onClickDirectLink})),y.createElement(n.a,{icon:"share-email",className:"social-share-options__share-social-icon","data-test-id":"social-share-options__share-social-icon__email",onClick:this.onClickEmail})))}}E(O,"contextTypes",{dispatcher:g.a.instanceOf(u.a).isRequired,envInfo:g.a.instanceOf(o.a).isRequired})},593:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(9);function n(e){const{fieldsOfStudy:t}=e.paper;if(!t||!t.size)return null;const r=t.join(", ");return a.createElement(a.Fragment,null,r)}},597:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r(52),n=r(49),i=r(21),s=r.n(i);class o extends n.a{constructor(e,t){super(a.a.SCROLL,s.a.recursive({target:e},t))}}o.create=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new o(...t)}},598:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));const a="home",n="paper_detail"},718:function(e,t,r){"use strict";r.r(t);var a,n,i,s=r(434),o=r(433),c=r(383),l=r(382),p=r(112),u=r(1),d=r(17),h=r(9),m=r.n(h),f=r(8),b=r.n(f);function g(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}class y extends h.PureComponent{constructor(){super(...arguments);const{dispatcher:e}=this.context,t={actionType:u.a.actions.PAPER_NAV_TARGET_ADDED,navId:this.props.id,navLabel:this.props.navLabel};e.isDispatching()?e.dispatchEventually(t):e.dispatch(t)}componentWillUnmount(){this.context.dispatcher.dispatchEventually({actionType:u.a.actions.PAPER_NAV_TARGET_REMOVED,navId:this.props.id})}render(){const e=this.props,{navLabel:t,children:r}=e,a=g(e,["navLabel","children"]);return h.createElement("div",a,r)}}a=y,n="contextTypes",i={dispatcher:b.a.instanceOf(d.a).isRequired},n in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i;var E=r(377),O=r.n(E);class v extends h.PureComponent{render(){const{cardId:e,children:t,testId:r,navLabel:a}=this.props,n=this.context.envInfo.isMobile,i=O()({card:!0,card__mobile:n},this.props.className);return h.createElement(y,{id:e,"data-test-id":r,navLabel:a,className:i},t)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(v,"contextTypes",{envInfo:b.a.instanceOf(p.a).isRequired});class _ extends h.PureComponent{render(){const e=this.context.envInfo.isMobile;return h.createElement("div",{className:O()({"card-callout":!0,"card-callout__mobile":e})},this.props.children)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(_,"contextTypes",{envInfo:b.a.instanceOf(p.a).isRequired});class S extends h.PureComponent{render(){return h.createElement("div",{className:"card-container"},this.props.children)}}class P extends h.PureComponent{renderChildren(){const{title:e,subtitle:t,children:r}=this.props;return e?h.createElement(h.Fragment,null,h.createElement("h4",{className:"card-header-title__title"},e),t&&h.createElement("h5",{className:"card-header-title__subtitle"},t)):!!r&&r}render(){return h.createElement("div",{className:"card-header-title"},this.renderChildren())}}class w extends h.PureComponent{render(){return h.createElement("div",{className:"card-header-aside"},this.props.children)}}class x extends h.PureComponent{renderChildren(){const{title:e,subtitle:t,children:r}=this.props;return e?h.createElement(P,{title:e,subtitle:t}):!!r&&r}render(){const e=this.context.envInfo.isMobile,t=this.renderChildren(),r=!!h.Children.toArray(t).find(e=>e.type===w);return h.createElement("div",{className:O()({"card-header":!0,"card-header__mobile":e,"card-header__has-aside":r})},t)}}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(x,"contextTypes",{envInfo:b.a.instanceOf(p.a).isRequired});class T extends h.PureComponent{render(){const{children:e,willChildrenOwnLayout:t}=this.props,r=this.context.envInfo.isMobile;return h.createElement("div",{className:O()({"card-content":!0,"card-content__mobile":r,"card-content__children-own-layout":t})},e)}}C(T,"defaultProps",{willChildrenOwnLayout:!1}),C(T,"contextTypes",{envInfo:b.a.instanceOf(p.a).isRequired});class N extends h.PureComponent{render(){const{children:e}=this.props;return h.createElement("div",{className:"card-content-aside"},e)}}class j extends h.PureComponent{render(){const{children:e}=this.props;return h.createElement("div",{className:"card-content-main"},e)}}class I extends h.PureComponent{render(){const e=this.context.envInfo.isMobile;return h.createElement("div",{className:O()({"card-footer":!0,"card-footer__mobile":e})},this.props.children)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(I,"contextTypes",{envInfo:b.a.instanceOf(p.a).isRequired});class k extends h.PureComponent{render(){const e=this.context.envInfo.isMobile;return h.createElement("div",{className:O()({"card-sidebar":!0,"card-sidebar__mobile":e})},this.props.children)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(k,"contextTypes",{envInfo:b.a.instanceOf(p.a).isRequired});const D=v,R=S,L=x,A=T,F=N,M=j,q=I,B=k;var H=r(380),z=r(438),U=r(425),V=r(48),Q=r(199),Y=r(100),W=r(0),G=r.n(W);class K extends h.PureComponent{render(){const{onChangeSelected:e,scorecardStats:t,title:r,value:a}=this.props,n=V.c.getIntents().filter(e=>{let{id:r}=e;return function(e,t){return t.some(t=>{var r;const a=null!=(r=t)&&null!=(r=r.citationIntentCount)?r[e]:r;return t.typeKey===Q.a&&(a&&a>0||e===V.c.INTENTS.ALL_INTENTS.id)})}(r,t)});return h.createElement("div",{role:"listbox"},r&&h.createElement("div",{className:"facet-toggle"},h.createElement("h4",{className:"search-fos-menu__dropdown__title"},r)),h.createElement("ul",{className:"search-fos-menu__dropdown__link-list"},n.map(t=>{let{id:r}=t;return h.createElement("li",{className:"search-cite-menu__dropdown__link-list-line",key:r},h.createElement("input",{type:"radio",name:"citeFilter",id:"citeFilter"+r,className:"legacy__input search-cite-menu__dropdown__link-list-line__radio",value:r,onChange:e,checked:r==a}),h.createElement("label",{className:"search-cite-menu__dropdown__link-list-line__label",htmlFor:"citeFilter"+r},Y.a.getString("filter.".concat(r,".label"))))})))}}var X=r(378),$=r(535);class J extends h.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),this.state={isDropdownVisible:!1},this.onClickCapture=this.onClickCapture.bind(this),this.onClickDropdown=this.onClickDropdown.bind(this),this.onChangeSelected=this.onChangeSelected.bind(this)}onClickCapture(e){e.preventDefault(),this.setState({isDropdownVisible:!1})}onClickDropdown(){const{disabled:e}=this.props;e||this.setState({isDropdownVisible:!0})}onChangeSelected(e){const{onChange:t}=this.props;this.setState({isDropdownVisible:!1}),t(e)}renderDropdown(){const{isDropdownVisible:e}=this.state,{dropdownPosition:t,scorecardStats:r,title:a,value:n}=this.props;return h.createElement(h.Fragment,null,e&&h.createElement("div",{className:"search-cite-menu__click-capture",onClick:this.onClickCapture}),h.createElement($.a,{className:"search-cite-menu__dropdown",theme:"search",topPx:0,leftPx:0,position:t||"bottom-left",isVisible:e,usePortal:!1},h.createElement(K,{scorecardStats:r,onChangeSelected:this.onChangeSelected,title:a,value:n})))}render(){const{disabled:e,styleAsFacet:t,title:r,useTitleForAll:a,value:n}=this.props,i=V.c.getIntents().find(e=>e.id==n),s=O()("button","search-cite-menu__cite--button__button",{"button--primary":t&&"all"!==n,"button--secondary":!t||"all"==n,"button--disabled":e}),o=i?Y.a.getString("filter.".concat(i.id,".label")):"",c=r&&a&&"all"===n?r:o;return h.createElement("div",{className:"search-cite-menu citation-intent-select select--no-styles"},h.createElement("div",{className:s,onClick:this.onClickDropdown},c,t&&h.createElement("span",{className:"cl-button__arrow"},h.createElement(X.a,{icon:"disclosure",className:"cl-dropdown-button__dropdown-arrow"}))),h.createElement("span",{className:"search-cite-menu__dropdown-anchor"},this.renderDropdown()))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(J,"defaultProps",{value:V.c.INTENTS.ALL_INTENTS.id});var Z=r(406),ee=r(528),te=r(529),re=r(530),ae=r(521),ne=r(118),ie=r(73),se=r(193),oe=r(37),ce=r(97),le=r(465),pe=r(431);class ue extends h.PureComponent{render(){const{allFilters:e,filters:t,query:r,scorecardStats:a,stats:n,onChangeCitationIntent:i,onChangeYearFilter:s,onHideClick:o}=this.props,c=this.context.citationQueryStore,l=this.context.envInfo.isMobile,p=n.get("publicationTypes"),d=n.get("authors"),m=n.get("venues"),f=Object(se.b)();return h.createElement(Z.b,{closeButtonShape:e?Z.a.CIRCLE:Z.a.SQUARE,className:O()({"dropdown-filter-modal":!0,"dropdown-filter-modal__mobile":l}),onHideClick:o},h.createElement("div",{className:"dropdown-filter-modal__container"},h.createElement("div",{className:"dropdown-filter-modal__header"},e||l?Object(oe.c)(e=>e.filterBar.dropdownLabels.allFilters):Object(oe.c)(e=>e.filterBar.dropdownLabels.moreFilters)),t.contains(pe.b.QUERY_TEXT)&&h.createElement(ae.a,{formId:"citation-search-text-form-modal",suggestionType:le.a.PAPER_CITATION,containerClass:"search-within",placeholder:Object(oe.c)(e=>e.filterCitationBar.searchPlaceholder),injectQueryStore:c}),t.contains(pe.b.DATE)&&h.createElement(ee.a,{analyticsEvent:ie.a.Serp.YEAR_SLIDER,centerBucketPopover:!0,filterCallback:s,filters:n,histogramWidth:200,yearFilter:r.yearFilter,yearBuckets:null,showPresetButtons:!0}),t.contains(pe.b.HAS_PDF)&&h.createElement(re.a,{injectQueryStore:c,forCitations:!0}),t.contains(pe.b.CITATION_INTENT)&&h.createElement(K,{title:"Citation Type",value:r.citationIntent||V.c.INTENTS.ALL_INTENTS.id,onChangeSelected:i,scorecardStats:a}),t.contains(pe.b.PUBLICATION)&&!!p&&!p.isEmpty()&&h.createElement(te.a,{title:Object(oe.c)(e=>e.filterBar.dropdownTitles.publicationType),filterType:"publicationType",filters:p,injectQueryStore:c,openByDefault:!0,collapsible:!1}),t.contains(pe.b.AUTHOR)&&!!d&&!d.isEmpty()&&h.createElement(te.a,{title:Object(oe.c)(e=>e.filterBar.dropdownTitles.author),filterType:"author",filters:d,injectQueryStore:c,openByDefault:!0,collapsible:!1}),t.contains(pe.b.VENUE)&&!!m&&!m.isEmpty()&&h.createElement(te.a,{title:Object(oe.c)(e=>e.filterBar.dropdownTitles.venue),filterType:"venue",filters:m,injectQueryStore:c,openByDefault:!0,collapsible:!1,maxLabelLength:u.a.data.MAX_VENUE_LENGTH}),t.contains(pe.b.FIELD_OF_STUDY)&&h.createElement(te.a,{title:Object(oe.c)(e=>e.filterBar.dropdownTitles.fieldOfStudy),filterType:"fieldsOfStudy",filters:f,openByDefault:!0,displayDocCount:!1,collapsible:!1,injectQueryStore:c})))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ue,"contextTypes",{citationQueryStore:b.a.instanceOf(ne.a).isRequired,dispatcher:b.a.instanceOf(d.a).isRequired,envInfo:b.a.instanceOf(p.a).isRequired,history:b.a.instanceOf(ce.a).isRequired,router:b.a.object.isRequired});var de=r(393),he=r(463),me=r(515),fe=r(19),be=r(16),ge=r(31);function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Oe extends h.Component{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),Ee(this,"showAllFilters",()=>{this.setState({isAllFiltersVisible:!0})}),Ee(this,"showMoreFilters",()=>{this.setState({isMoreFiltersVisible:!0})}),Ee(this,"showSomeFilters",()=>{this.setState({isSomeFiltersVisible:!0})}),Ee(this,"hideModals",()=>{this.setState({isAllFiltersVisible:!1,isMoreFiltersVisible:!1,isSomeFiltersVisible:!1})}),Ee(this,"onSearchbarFocus",()=>{this.setState({isSearchbarFocused:!0})}),Ee(this,"onSearchbarCondense",()=>{const e=document.getElementById("search-within-input");e&&e.blur(),this.setState({isSearchbarFocused:!1})}),Ee(this,"onChangeYearFilter",(e,t)=>{const{citationQueryStore:r,router:a}=this.context;this.setState({isDatePopoverVisible:!1},()=>r.routeToYearRange(e,t,a))}),Ee(this,"onClearYearFilter",()=>{const{citationQueryStore:e,router:t}=this.context;e.routeToYearRangeReset(t)}),Ee(this,"onChangeCitationIntent",e=>{const{citationQueryStore:t}=this.context;be.a.changeRouteForPartialQuery(t.getIndependentQuery(),this.state.query.set("citationIntent",e.currentTarget.value),this.context.history,this.context.router)}),Ee(this,"onChangeSort",e=>{if("string"==typeof e){const{citationQueryStore:t,router:r}=this.context;t.routeToSort(e,r)}}),Ee(this,"onClearFilters",()=>{const{citationQueryStore:e}=this.context;this.onSearchbarCondense(),be.a.changeRouteForPartialQuery(e.getIndependentQuery(),this.state.query.reset(!1,!0),this.context.history,this.context.router)}),Ee(this,"isDatesSelected",()=>{const{query:e}=this.state,t=e.yearFilter;return t&&t.get("min")&&t.get("max")}),Ee(this,"dateRangeString",()=>{const{query:e}=this.state,t=e.yearFilter;return t.get("min")===t.get("max")?t.get("min"):Object(oe.c)(e=>e.filterCitationBar.dateRange,t.get("min"),t.get("max"))}),Ee(this,"renderDateClearBox",()=>h.createElement("div",{className:"flex-row-vcenter flex-space-between"},h.createElement(U.default,{label:Object(oe.c)(e=>e.filterCitationBar.clearDate),onClick:this.onClearYearFilter}))),Ee(this,"closeDateDropdown",()=>{this.setState({isDatePopoverVisible:!1})}),Ee(this,"openDateDropdown",()=>{this.setState({isDatePopoverVisible:!0})}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromCitationQueryStore(),{isDatePopoverVisible:!1,isAllFiltersVisible:!1,isMoreFiltersVisible:!1,isSomeFiltersVisible:!1,isSearchbarFocused:!1}),this.context.citationQueryStore.registerComponent(this,()=>{this.setState(this.getStateFromCitationQueryStore())})}getStateFromCitationQueryStore(){return{query:this.context.citationQueryStore.getQuery(),queryText:this.context.citationQueryStore.getQuery().queryString||"",queryResponse:this.context.citationQueryStore.getQueryResponse(),statsResponse:this.context.citationQueryStore.getAggregationResponse(),isLoading:this.context.citationQueryStore.isLoading(),isFiltering:this.context.citationQueryStore.isFiltering(),isAggsLoading:this.context.citationQueryStore.isAggsLoading()}}render(){var e;const{paperDetail:t,paperDetail:{citationSortAvailability:r,paper:{scorecardStats:a}}}=this.props,{query:n,queryText:i,queryResponse:s,statsResponse:{stats:o},isDatePopoverVisible:l,isLoading:p,isSearchbarFocused:u,isFiltering:d,isAggsLoading:m}=this.state,f=this.context.citationQueryStore,b=o.get(me.a.PUBLICATION_TYPE.pluralId),g=o.get(me.a.AUTHOR.pluralId),y=n.publicationTypes.size>0,E=n.authors.size>0,v=n.venues.size>0,_=n.fieldsOfStudy.size>0,S=n.requireViewablePdf,P=this.isDatesSelected(),w=n.citationIntent,x=_||v,C=x||w||S||P||_||y||E,T=C||i,N=o.get(me.a.PUBLICATION_TYPE.pluralId)&&o.get(me.a.PUBLICATION_TYPE.pluralId).size>0,j=o.get(me.a.AUTHOR.pluralId)&&o.get(me.a.AUTHOR.pluralId).size>0,I=o.get(me.a.VENUE.pluralId)&&o.get(me.a.VENUE.pluralId).size>0,k=o.get("years")&&o.get("years").size>1,D=N||j||I,R=T?s.totalResults:t.paper.citationStats.numCitations,L=R>1?R>9999&&T?Object(oe.c)(e=>e.filterCitationBar.moreThanTenThousand):Object(oe.c)(e=>e.filterCitationBar.exactResultCount,Object(fe.f)(R)):1===R?Object(oe.c)(e=>e.filterCitationBar.singleResultCount):Object(oe.c)(e=>e.filterCitationBar.noResultCount),A=P?this.dateRangeString():Object(oe.c)(e=>e.filterBar.dropdownLabels.date),F=!this.context.envInfo.isMobile,M=k||P,q=d||m||p,B=(null!=(e=r)?e.citingPapers:e)&&r.citingPapers.includes(ge.a.RELEVANCE.id)?ge.a.citationsFilteredWithRelevance():ge.a.citationsFiltered(),V=function(e){return e.some(e=>{var t,r,a;const n=null!=(a=e)&&null!=(a=a.citationIntentCount)?a.methodology:a,i=null!=(r=e)&&null!=(r=r.citationIntentCount)?r.background:r,s=null!=(t=e)&&null!=(t=t.citationIntentCount)?t.result:t;return e.typeKey===Q.a&&(n&&n>0||i&&i>0||s&&s>0)})}(a),Y=q||0===s.totalResults&&!w||!V;return h.createElement("div",{className:"dropdown-filters__header dropdown-filters-breakpoints__pdp_cite"},h.createElement("div",{className:"dropdown-filters__controls"},p&&T?h.createElement("div",{className:"dropdown-filters__result-count__header"},h.createElement("div",{className:"loading-count flex-row-vcenter",role:"main",id:"main-content"},h.createElement(c.a,{testId:"citation-count-loading"}))):h.createElement("h4",{className:"dropdown-filters__result-count__header"},L),h.createElement(de.a,{className:O()("flex-row-vcenter","dropdown-filters__header__outer-flex-container",{"dropdown-filters__header__outer-flex-container--mobile":this.context.envInfo.isMobile})},h.createElement(de.a,{className:"flex-row-vcenter dropdown-filters__filter-flex-container"},h.createElement(ae.a,{formId:"citation-search-text-form",containerClass:"search-within",placeholder:Object(oe.c)(e=>e.filterCitationBar.searchPlaceholder),isSearchbarFocused:u,onSearchbarCondense:this.onSearchbarCondense,onSearchbarFocus:this.onSearchbarFocus,suggestionType:le.a.PAPER_CITATION,injectQueryStore:f,useOverlay:!0}),u&&h.createElement("div",{className:"dropdown-filters__modal-button"},h.createElement(H.default,{disabled:p,type:H.TYPE.SECONDARY,label:Object(oe.c)(e=>e.filterBar.dropdownLabels.showFilters),onClick:this.onSearchbarCondense})),!u&&h.createElement(h.Fragment,null,M&&F&&h.createElement(z.default,{disabled:!P&&!k||q||Y,isDropdownShown:l,onHideDropdown:this.closeDateDropdown,onShowDropdown:this.openDateDropdown,className:"dropdown-filters__dates",label:A,type:P?H.TYPE.PRIMARY:H.TYPE.DEFAULT,contents:()=>P?this.renderDateClearBox():h.createElement(ee.a,{analyticsEvent:ie.a.Serp.YEAR_SLIDER,centerBucketPopover:!0,filterCallback:this.onChangeYearFilter,filters:o,yearFilter:n.yearFilter,yearBuckets:null,showPresetButtons:!0})}),F&&h.createElement(J,{scorecardStats:a,disabled:Y,styleAsFacet:!0,useTitleForAll:!0,title:"Citation Type",dropdownPosition:"bottom-right",value:n.citationIntent,onChange:this.onChangeCitationIntent}),F&&h.createElement(re.a,{isToggle:!0,disabled:q,injectQueryStore:f,forCitations:!0}),F&&h.createElement(z.default,{disabled:q||!N,className:"dropdown-filters__pub_type",label:Object(oe.c)(e=>e.filterBar.dropdownLabels.publicationType),type:y?H.TYPE.PRIMARY:H.TYPE.DEFAULT,contents:()=>h.createElement(te.a,{title:Object(oe.c)(e=>e.filterBar.dropdownTitles.publicationType),filterType:me.a.PUBLICATION_TYPE.id,filters:b,openByDefault:!0,collapsible:!1,injectQueryStore:f,hasSelection:y})}),F&&h.createElement(z.default,{disabled:q||!j,className:"dropdown-filters__author",label:Object(oe.c)(e=>e.filterBar.dropdownLabels.author),type:E?H.TYPE.PRIMARY:H.TYPE.DEFAULT,contents:()=>h.createElement(te.a,{title:Object(oe.c)(e=>e.filterBar.dropdownTitles.author),filterType:me.a.AUTHOR.id,filters:g,openByDefault:!0,collapsible:!1,injectQueryStore:f,hasSelection:E})}),F&&h.createElement("div",{className:"dropdown-filters__modal-button flex-item"},h.createElement(H.default,{disabled:q||!D,className:"dropdown-filters__some_filters",type:x?H.TYPE.PRIMARY:H.TYPE.SECONDARY,label:Object(oe.c)(e=>e.filterBar.dropdownLabels.moreFilters),onClick:this.showSomeFilters})),F&&h.createElement("div",{className:"dropdown-filters__modal-button flex-item"},h.createElement(H.default,{disabled:q,className:"dropdown-filters__more_filters",type:C?H.TYPE.PRIMARY:H.TYPE.SECONDARY,label:Object(oe.c)(e=>e.filterBar.dropdownLabels.moreFilters),onClick:this.showMoreFilters})),h.createElement("div",{className:"dropdown-filters__modal-button"},h.createElement(H.default,{disabled:q,className:"dropdown-filters__mobile_filters",type:T?H.TYPE.PRIMARY:H.TYPE.SECONDARY,label:Object(oe.c)(e=>e.filterBar.dropdownLabels.allFilters),onClick:this.showAllFilters}))),T&&h.createElement(U.default,{label:"Clear",onClick:this.onClearFilters})),h.createElement(he.a,{className:"dropdown-filters__sort-control",onChangeSort:this.onChangeSort,options:B,sort:n.sort}))),this.state.isSomeFiltersVisible&&!p&&h.createElement(ue,{filters:pe.c.startInModal,onChangeCitationIntent:this.onChangeCitationIntent,onChangeYearFilter:this.onChangeYearFilter,onHideClick:this.hideModals,query:n,scorecardStats:a,stats:o}),this.state.isMoreFiltersVisible&&!p&&h.createElement(ue,{filters:pe.c.startInModal.concat(pe.c.collapseToModal),onChangeCitationIntent:this.onChangeCitationIntent,onChangeYearFilter:this.onChangeYearFilter,onHideClick:this.hideModals,query:n,scorecardStats:a,stats:o}),this.state.isAllFiltersVisible&&!p&&h.createElement(ue,{filters:pe.c.startInModal.concat(pe.c.startVisible),onChangeCitationIntent:this.onChangeCitationIntent,onChangeYearFilter:this.onChangeYearFilter,onHideClick:this.hideModals,query:n,scorecardStats:a,stats:o}))}}Ee(Oe,"contextTypes",{dispatcher:b.a.instanceOf(d.a).isRequired,envInfo:b.a.instanceOf(p.a).isRequired,history:b.a.instanceOf(ce.a).isRequired,citationQueryStore:b.a.instanceOf(ne.a).isRequired,router:b.a.object.isRequired});var ve=r(646),_e=r(613),Se=r(524),Pe=r(399),we=r(386),xe=r(475),Ce=r(189),Te=r(67);r(14);function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ie extends h.PureComponent{constructor(){super(...arguments),je(this,"showHighlyInfluencedPopover",()=>{this.setState({isPopoverVisible:!0})}),je(this,"hideHighlyInfluencedPopover",()=>{this.setState({isPopoverVisible:!1})}),je(this,"renderHighlyInfluencedContext",()=>{const{citationType:e,citedPaperTitle:t}=this.props,r=Object(fe.r)(t.text,xe.TRUNCATE_TITLE_LENGTH);return h.createElement(Se.a,{title:Object(oe.c)(t=>t.citations.popup[e].title,r),className:"cl-paper-flags__context__content"},h.createElement(we.a,{content:t=>t.citations.popup[e].content}))}),this.state={isPopoverVisible:!1}}render(){const{className:e,citation:t,citationType:r,isCompact:a}=this.props,{isPopoverVisible:n}=this.state,{isMobile:i}=this.context.envInfo;return h.createElement("div",Ne({className:O()("cl-paper-stat","cl-paper-stat__collapsable",{"cl-paper-stat__icon-only":a},"cl-paper-flags__highly-influenced__container",e)},Object(Ce.a)({id:Te.e,"paper-id":t.id,type:"highlyInfluenced","citation-type":r}),{"data-test-id":"citingPapers"===r?"highlyInfluenced":"highlyInfluential",onMouseEnter:i?null:this.showHighlyInfluencedPopover,onMouseLeave:i?null:this.hideHighlyInfluencedPopover}),h.createElement(X.a,{className:"cl-paper-stats__icon",icon:"scorecard-highly-influential",height:"12",width:"12"}),!a&&h.createElement("span",{className:"cl-paper-stats__hideable-text"},Object(oe.c)(e=>e.citations.highlyInfluenced[r])),n&&h.createElement(Pe.default,{className:"cl-paper-flags__popover",arrow:_e.a.SIDE_TOP_POS_LEFT},this.renderHighlyInfluencedContext()))}}je(Ie,"contextTypes",{envInfo:f.instanceOf(p.a).isRequired});var ke=r(391),De=r(32),Re=r(98),Le=r(18);function Ae(e){let{citation:t,citationType:r,citedPaperTitle:a}=e,n=null,i=null;const{envInfo:s}=Object(Re.c)(),o=s.isMobile;t.id&&(n=Object(Le.e)({routeName:"PAPER_DETAIL_BY_ID",params:{paperId:t.id},hash:"citing-papers"}),i=Object(Le.e)({routeName:"PAPER_DETAIL_BY_ID",params:{paperId:t.id},query:{sort:ge.a.IS_INFLUENTIAL_CITATION.id},hash:"citing-papers"}));const c=h.createElement(Fe,{citation:t}),l=h.createElement(Ie,{citation:t,citationType:r,citedPaperTitle:a,className:O()("cl-paper-stats__badge-hover",{"cl-paper-stats__mobile-badge":o})}),p=Me(t)&&h.createElement("li",{className:"cl-paper-stats__item"},n?h.createElement("a",{href:n,className:"cl-paper-stats__citation-pdp-link"},c):c),u=t.isKey&&h.createElement("li",{className:"cl-paper-stats__item"},i?h.createElement("a",{href:i,className:"cl-paper-stats__citation-pdp-link"},l):l),d=!!t.badges&&t.badges.size>0;return p||u||d?h.createElement("ul",{className:"cl-paper-stats-list","data-test-id":"citation-stats"},p,u,!!d&&h.createElement("li",{className:"cl-paper-stats__item"},h.createElement(ve.b,{paper:De.a.fromCitation(t),isCompact:!0}))):null}function Fe(e){let{citation:t}=e;if(!Me(t))return null;const{envInfo:r}=Object(Re.c)(),a=r.isMobile;return h.createElement("div",{className:O()("cl-paper-stat",{"cl-paper-stats__mobile-badge":a})},h.createElement(X.a,{icon:"cited-by",width:"12",height:"12",className:"cl-paper-stats__icon"}),Object(ke.g)(t.numCitedBy),a&&Object(fe.n)(t.numCitedBy,Object(oe.c)(e=>e.citations.citation),null,!0))}function Me(e){return e.numCitedBy>0}var qe=r(411),Be=r(387),He=r(490),ze=r(424),Ue=r(421),Ve=r(437),Qe=r(445),Ye=r(430),We=r(461);class Ge extends h.PureComponent{render(){let e=null;return"undefined"!=typeof window&&window.history&&window.history.length>0&&(e=m.a.createElement("a",{onClick:()=>window.history.back()},Object(oe.c)(e=>e.citations.emptySearchWithin.removeFacetsLabel))),m.a.createElement("div",{className:"empty-pdp-box"},m.a.createElement("p",null,Object(oe.c)(e=>e.citations.emptySearchWithin.text)),e)}}var Ke=r(394),Xe=r(395),$e=r(138),Je=r(51),Ze=r(11),et=r(150),tt=r(10),rt=r(493),at=r(66),nt=r(464),it=r(390);function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ct=Object(tt.c)("filteredCitationsList");class lt extends h.PureComponent{constructor(){super(...arguments),ot(this,"getStateFromQueryStore",()=>{const{citationQueryStore:e}=this.context;return{citationQueryResponse:e.getQueryResponse(),citationIsLoading:e.isLoading(),citationIsFiltering:e.isFiltering(),citationIsSorting:e.isSorting(),citationQueryState:e.getQueryState(),citationQuery:e.getQuery()}}),ot(this,"navigateToCitationPage",e=>{const{citationQueryStore:t}=this.context;t.routeToPage(e,this.context.router),this.props.shouldScrollOnPaginate&&this.scrollOnPaginate(this.props.cardId)}),ot(this,"trackClickCitationLink",e=>{const{paper:t,citationType:r}=this.props,{citationQueryResponse:a,swapIndex:n}=this.state,{weblabStore:i}=this.context,{page:s,sort:o}=a.query,c=a.results,l=i.isFeatureEnabled(Ze.b.CitationsSwap)?n:null;Object(rt.d)({paperId:t.id,section:"citingPapers"===r?rt.a:rt.b,sortOrder:o,page:s,paperList:c,clickedPaper:e,swapPosition:l})}),ot(this,"scrollOnPaginate",e=>{const{paperNavStore:t}=this.context,r=t.getNavTarget(e);r?Je.a.smoothScrollTo(r,()=>{}):ct("Failed to scroll on paginate, getNavTarget did not find target for ".concat(e))}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?st(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromQueryStore(),{swapIndex:null}),this.context.citationQueryStore.registerComponent(this,()=>{this.setState(this.getStateFromQueryStore())})}renderCitationsListWithIntents(){const{paper:e}=this.props,{citationQuery:t,citationQueryResponse:r}=this.state,a=r.results;if(a.isEmpty())return null;const n=this.props.citationType;return h.createElement("div",{className:"citation-list__citations"},a.map((r,a)=>h.createElement(Be.c,{key:r.id+a,paper:De.a.fromCitation(r),eventData:{parentPaper:e,index:a},onClickTitle:!1},h.createElement(Ke.a,null,h.createElement(Ye.default,{paper:De.a.fromCitation(r),className:"citation-list__paper-row",title:h.createElement(We.default,{paper:De.a.fromCitation(r),onClick:this.trackClickCitationLink,testId:"citation-paper-title",heapProps:{id:Te.i,"paper-id":r.id,"citation-type":n,"has-intents":r.citationContexts.size>0}}),meta:h.createElement(Qe.default,{paper:De.a.fromCitation(r),authors:!De.a.fromCitation(r).authors.isEmpty()&&h.createElement(He.default,{paper:De.a.fromCitation(r),heapProps:{id:Te.d}})}),controls:h.createElement(Ve.default,{paper:De.a.fromCitation(r),stats:h.createElement(Ae,{citation:r,citationType:n,citedPaperTitle:e.title}),flags:h.createElement(xe.default,{citation:r,citationType:n,citedPaperTitle:e.title,shouldRenderIntents:!0,className:"cl-paper-controls__flags"})}),abstract:h.createElement(nt.a,{paper:De.a.fromCitation(r),query:t.queryString})})),h.createElement(Xe.a,null,h.createElement(ze.default,{paper:De.a.fromCitation(r),title:h.createElement(We.default,{paper:De.a.fromCitation(r),onClick:this.trackClickCitationLink,testId:"citation-paper-title",heapProps:{id:Te.i,"paper-id":r.id,"citation-type":n,"has-intents":r.citationContexts.size>0}}),meta:h.createElement(Qe.default,{paper:De.a.fromCitation(r),shouldStackMeta:!0,authors:!De.a.fromCitation(r).authors.isEmpty()&&h.createElement(He.default,{paper:De.a.fromCitation(r),heapProps:{id:Te.d}})}),controls:r.numCitedBy>0&&h.createElement(Ve.default,{paper:De.a.fromCitation(r),actions:!1,stats:h.createElement(Ae,{citation:r,citationType:n,citedPaperTitle:e.title})}),className:"citation-list__paper-card",header:h.createElement(xe.default,{citation:r,citationType:n,citedPaperTitle:e.title,shouldRenderIntents:!0}),footer:h.createElement(Ue.a,{paper:De.a.fromCitation(r)}),abstract:h.createElement(nt.a,{paper:De.a.fromCitation(r),query:t.queryString,className:"tldr__paper-card"})})))))}renderEmptyMessage(){return h.createElement(Ge,null)}render(){const e=this.context.envInfo.isMobile,{citationQueryResponse:t,citationIsFiltering:r,citationIsSorting:a,citationIsLoading:n}=this.state,i=t.totalPages>1?h.createElement("div",{className:"citation-pagination flex-row-vcenter"},n?h.createElement("span",{className:"flex-row-vcenter citation-loading"},h.createElement(c.a,null)," Loading"):null,h.createElement(qe.default,{size:e?qe.SIZE.LARGE:qe.SIZE.DEFAULT,maxVisiblePageButtons:e?4:5,pageNumber:t.query.page,onPaginate:this.navigateToCitationPage,totalPages:Math.min(V.c.MAX_CITATION_PAGES,t.totalPages)})):null,s=this.state.citationQueryResponse.totalResults>0?this.renderCitationsListWithIntents():this.renderEmptyMessage(),o=O()("paper-detail-content-card","result-page",{"is-filtering":n||r||a});return h.createElement("div",{className:o,"data-test-id":"citingPapers"===this.props.citationType?"cited-by":"reference"},s,i)}}ot(lt,"contextTypes",{api:b.a.instanceOf($e.a).isRequired,citationQueryStore:b.a.instanceOf(ne.a).isRequired,envInfo:b.a.instanceOf(p.a).isRequired,paperNavStore:b.a.instanceOf(et.a).isRequired,router:b.a.object.isRequired,weblabStore:b.a.instanceOf(at.b).isRequired});var pt=Object(it.b)(ie.a.PaperDetail.Citations)(lt),ut=r(405),dt=r(597),ht=r(47),mt=r(202);function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class gt extends h.PureComponent{constructor(){super(...arguments),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({wasSeen:!1,top:0,bottom:0},this.getStateFromWeblabStore()),this.context.weblabStore.registerComponent(this,()=>{this.setState(this.getStateFromWeblabStore())}),this.onScroll=Object(ut.a)(this.onScroll.bind(this),250,{leading:!0,maxWait:250,trailing:!0}),this.onResize=Object(ut.a)(this.onResize.bind(this),250,{leading:!0,maxWait:250,trailing:!0}),this.setLandmarkRef=this.setLandmarkRef.bind(this)}getStateFromWeblabStore(){const{weblabStore:e}=this.context;return{isLoggingEnabled:e.isFeatureEnabled(Ze.b.LogHeapLandmarks)}}onScroll(){this.updateOffsets(this.trackLandmark)}onResize(){this.updateOffsets(this.trackLandmark)}isInViewport(e){const{top:t,bottom:r}=this.state;return r>=e.top&&t<=e.top+e.height}trackLandmark(){const{wasSeen:e,isLoggingEnabled:t}=this.state;if(e)return;if(!t)return;const{target:r,section:a}=this.props,n=mt.a.fromDOM(document);if(this.isInViewport(n)&&!e){const e=+(100*(n.top/(n.top+n.height+n.bottom)||0)).toFixed(2);Object(ht.a)(dt.a.create(r,{section:a,percent:e})),this.setState({wasSeen:!0})}}updateOffsets(e){var t;const r=Je.a.offsetFromBody(this.landmarkRef)||0,a=(null!=(t=this)&&null!=(t=t.landmarkRef)?t.scrollHeight:t)||0;this.setState({top:r,bottom:r+a},e)}componentDidMount(){this.updateOffsets(this.trackLandmark),Je.a.listenForScroll(this.onScroll),Je.a.listenForResize(this.onResize)}componentWillUnmount(){Je.a.stopListeningForResize(this.onResize),Je.a.stopListeningForScroll(this.onScroll)}setLandmarkRef(e){this.landmarkRef=e}render(){const{isLoggingEnabled:e}=this.state;return h.createElement(h.Fragment,null,e&&h.createElement("a",{key:"landmark",className:"heap-landmark",ref:this.setLandmarkRef}),h.createElement(h.Fragment,{key:"children"},this.props.children))}}function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}bt(gt,"contextTypes",{weblabStore:b.a.instanceOf(at.b).isRequired});class Ot extends h.PureComponent{constructor(){super(...arguments),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){Et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromCitationQueryStore(),{},this.getStateFromPaperNavStore()),this.context.citationQueryStore.registerComponent(this,()=>{this.setState(this.getStateFromCitationQueryStore())}),this.context.paperNavStore.registerComponent(this,()=>{this.setState(this.getStateFromPaperNavStore())})}getStateFromCitationQueryStore(){return{isAggregationsLoaded:this.context.citationQueryStore.isAggregationsLoaded()}}getStateFromPaperNavStore(){const e=this.context.paperNavStore,t=e.navItems.get(this.constructor.CARD_ID);return{isVisibleOrActive:t&&(e.isItemVisible(t)||e.isItemActive(t))}}componentDidUpdate(){const{isVisibleOrActive:e,isAggregationsLoaded:t}=this.state,{paperDetail:{paper:r}}=this.props;r.id&&e&&!t&&setTimeout(()=>{this.context.api.searchCitationPaperAggregations(r.id)},0)}render(){const{paper:e}=this.props.paperDetail,t=e.citationStats.numCitations,r=Object(oe.c)(e=>e.paperDetail.tabLabels.citingPapers,t.toLocaleString());return h.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:Object(oe.c)(e=>e.paperDetail.sectionTitles.citingPapers)},h.createElement(D,{cardId:this.constructor.CARD_ID,navLabel:r,className:"citing-papers"},h.createElement(L,null,h.createElement(Oe,{paperDetail:this.props.paperDetail})),h.createElement(A,null,h.createElement(pt,{name:"citingPapers",cardId:this.constructor.CARD_ID,shouldScrollOnPaginate:!0,paper:e,citationType:"citingPapers"}))))}}Et(Ot,"contextTypes",{api:b.a.instanceOf($e.a).isRequired,weblabStore:b.a.instanceOf(at.b).isRequired,paperNavStore:b.a.instanceOf(et.a).isRequired,citationQueryStore:b.a.instanceOf(ne.a).isRequired}),Et(Ot,"CARD_ID","citing-papers");r(39);var vt=r(3),_t=r.n(vt);function St(e){const{paper:t,paper:{journal:r},skipperExperiments:a}=e,n=t.debugInfo;if(!n)return null;const i=n.sourceIds.map((e,t)=>{let r;const a=e.source.id;"DBLP"===a?r="http://www.dblp.org/rec/bibtex/"+e.id:"CiteSeerX"===a?r="http://citeseerx.ist.psu.edu/viewdoc/summary?doi="+e.id:"MAG"===a?r="https://academic.microsoft.com/paper/"+e.id:"ArXiv"===a&&(r="https://arxiv.org/abs/"+e.id);const n=h.createElement("span",null,h.createElement("span",{className:"source"},a),": ",h.createElement("span",{className:"id"},e.id));let i;return i=void 0===r?n:h.createElement("a",{href:r},n),h.createElement("li",{key:"src-id-".concat(t),className:"debug-info"},i)}),s=n.sourceUris.map((e,t)=>h.createElement("li",{key:"src-uri-".concat(t),className:"source-uri debug-info"},h.createElement("a",{href:e},e))),o=n.duplicateIds.map((e,t)=>h.createElement("li",{key:"dupe-".concat(t)},"Duplicate ID: ",e)),c=null!==r?h.createElement("li",{key:"journal-info",className:"debug-info"},"Journal: ",r.name||"No Journal Name",", ",r.volume||"Missing Volume",","," ",r.pages||"Missing Pages"):h.createElement("li",{key:"journal-info",className:"debug-info"},"No Journal Info"),l=null!=n.earliestAcquisitionDate?h.createElement("li",{key:"acquisition-date",className:"debug-info"},"Earliest Acquisition Date:"," ",_t.a.unix(n.earliestAcquisitionDate).utc().format("MM-DD-YYYY HH:mm z")):h.createElement("li",{key:"acquisition-date",className:"debug-info"},"Earliest Acquisition Date: Unknown"),p=h.createElement("li",{key:"fields-of-study",className:"debug-info"},"Fields Of Study: ",Object(ke.k)(t.fieldsOfStudy)),u=h.createElement("li",{key:"corpusId",className:"debug-info"},"Corpus Id: ",n.corpusId||"Unknown"),d=a?a.all():G.a.List(),m=d.isEmpty()?null:h.createElement("li",{key:"skipperExperiments",className:"debug-info"},h.createElement("div",null,"Member of the following Skipper Experiments (",h.createElement("a",{href:"/api/1/skipper/experiments/paper/".concat(t.id),target:"_blank"},"see raw data"),"):"),h.createElement("ul",{style:{paddingLeft:"20px"}},d.map(e=>h.createElement("li",{key:e.experimentName},e.experimentName))));return h.createElement("ul",null,i,s,o,c,l,p,u,m)}var Pt=r(84),wt=r(85),xt=r(338);const Ct=["250","500"];function Tt(e){let{figure:t}=e;const r=h.useRef(),[a,n]=h.useState(function(e){if(!e||e.endsWith("/"))return e;const t=e.lastIndexOf("/"),r="".concat(e.slice(0,t),"/"),a=e.slice(t);return Ct.map((e,t)=>"".concat(r).concat(e,"px").concat(a," ").concat(t+1,"x")).join(",")}(t.cdnUri)),i=h.useCallback(()=>{n(null)},[]);return h.useEffect(()=>{const e=r.current;e&&e.complete&&0===e.naturalWidth&&n(null)},[r]),h.createElement("img",{className:"figure-list__figure-image",srcSet:a,src:t.cdnUri,onError:i,ref:r,alt:t.displayName,"data-test-id":"figure-thumbnail-img",loading:"lazy"})}var Nt=r(384),jt=r(5),It=r(379);const kt="undefined"!=typeof ResizeObserver;function Dt(e){let{figures:t,paperId:r,slug:a}=e;if(t.isEmpty())return null;const{envInfo:{isMobile:n}}=Object(Re.c)(),i=n?1:4,[s,o]=h.useState(!1),[c,l]=h.useState(Object(jt.a)()&&!kt||t.size>i),p=h.useCallback(()=>{l(!1),o(!0)},[]),u=h.useRef();return kt&&h.useLayoutEffect(()=>{if(!u.current)return;const e=new ResizeObserver(Object(ut.a)(()=>{if(s)return void e.disconnect();const t=!![...u.current.children].find(e=>0===e.clientHeight);t!==c&&l(t)},100,{maxWait:100,leading:!0,trailing:!0}));return e.observe(u.current),()=>{e.disconnect()}},[u.current,s,c]),h.createElement("div",{className:"figure-list"},h.createElement("ul",{ref:u,className:O()({"figure-list__list":!0,"figure-list__list--is-capped":!s}),"data-test-id":"figure-list"},t.map((e,t)=>h.createElement("li",{key:e.uri,className:"figure-list__figure","data-test-id":"figure-list-item"},h.createElement(It.a,{to:"PAPER_DETAIL_FIGURE",onClick:()=>function(e){let{paperId:t,figureIndex:r}=e;Object(ht.a)(Nt.a.create(ie.a.FIGURE,{paperId:t,index:r}))}({paperId:r,figureIndex:t}),params:{paperId:r,slug:a,figureIndex:t}},h.createElement("figure",null,h.createElement("div",{className:"figure-list__figure-thumb"},h.createElement(xt.a,{feature:Ze.b.ResizedFigures},h.createElement(wt.a,null,h.createElement(Tt,{figure:e})),h.createElement(Pt.a,null,h.createElement("img",{className:"figure-list__figure-image",src:e.cdnUri,alt:e.displayName,"data-test-id":"figure-thumbnail-img",loading:"lazy"})))),h.createElement("figcaption",{className:"figure-list__figure-caption"},e.displayName)))))),c&&h.createElement("div",{className:"figure-list__pagination"},h.createElement(H.default,{onClick:p,label:Object(oe.c)(e=>e.paperDetail.figureShowMoreLabel,t.size.toLocaleString())})))}var Rt=r(398);function Lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class At extends h.PureComponent{constructor(){super(...arguments),this.state={boxPosition:{},isPreviewShown:!1},this.ref=null,this.hideTimer=null,this.showTimer=null,this.getRef=this.getRef.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this)}showPreview(){"function"==typeof this.props.onShow&&this.props.onShow(),this.setState(()=>({boxPosition:this.calculateBoxPosition(),isPreviewShown:!0}))}hidePreview(){this.setState(()=>({isPreviewShown:!1}))}onMouseEnter(){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.showTimer=setTimeout(()=>{this.showPreview()},this.props.showDelayMs)}onMouseLeave(){clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(()=>{this.hidePreview()},this.props.hideDelayMs)}getRef(e){this.ref=e}calculateBoxPosition(){const e=Je.a.getViewportSize();if(!this.ref||!e||!window)return{position:"top-left",topPx:0,leftPx:0};const t=this.ref.getBoundingClientRect(),r=t.y+t.height/2+window.scrollY<window.scrollY+e.height/2?"bottom":"top",a=t.x+t.width/2+window.scrollX,n=window.scrollX+e.width/3,i=window.scrollX+e.width/3*2,s=a<n?"right":i<a?"left":"center";return{position:"".concat(r,"-").concat(s),topPx:("top"===r?t.top:t.top+t.height)+window.scrollY,leftPx:t.left+t.width/2+window.scrollX}}renderPreviewBox(){const{previewBox:e}=this.props,{boxPosition:t}=this.state;return!m.a.Children.toArray(e).find(e=>e.type!==$.a)?m.a.cloneElement(e,t):m.a.createElement($.a,t,e)}render(){const{isPreviewShown:e}=this.state;return m.a.createElement("span",{className:"preview-box__target",ref:this.getRef,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.props.children,e&&this.renderPreviewBox())}}Lt(At,"propTypes",{previewBox:b.a.node.isRequired,children:b.a.node.isRequired,onShow:b.a.func,hideDelayMs:b.a.number}),Lt(At,"defaultProps",{hideDelayMs:200,showDelayMs:150});var Ft=r(432),Mt=r(510);function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}class Bt extends h.PureComponent{constructor(){super(...arguments),this.handleEntityHover=this.handleEntityHover.bind(this)}handleEntityHover(){const{entityId:e,name:t}=this.props,r=Mt.a.create(ie.a.Entity.PREVIEW,{entityId:e,entityName:t});Object(ht.a)(r)}renderPreviewBox(){const{children:e,entityId:t,slug:r,name:a,entityMeta:n}=this.props;if(e)return e;const i=n?n.definition:"",s=i?h.createElement(Ft.a,{text:i,truncateByDefault:!0}):null;return h.createElement("div",{className:"entity-preview-box","data-test-id":"entity-preview-box"},h.createElement("div",{className:"entity-preview-box-hover-text"},h.createElement(It.a,{className:"entity-preview-box-link",to:"ENTITY",params:{slug:r,entityId:t}},a),s))}render(){const{entityId:e,slug:t,name:r}=this.props;return h.createElement("li",qt({className:"entity-group-item","data-test-id":"entity-name"},Object(Ce.a)({id:Te.k})),h.createElement(At,{previewBox:this.renderPreviewBox(),onShow:this.handleEntityHover},h.createElement(It.a,{to:"ENTITY",params:{slug:t,entityId:e}},r)))}}function Ht(e){let{cols:t,entities:r,entitiesMeta:a}=e;if(r.isEmpty()||t<1)return null;const n=Array.from({length:t}).map(()=>[]),i=Math.ceil(r.size/t);return r.forEach((e,t)=>{const r=Math.floor(t/i);n[r].push(e)}),m.a.createElement("div",{className:"entity-columns","data-test-id":"entities-list"},m.a.createElement(de.a,{wrap:!0},n.map((e,t)=>m.a.createElement(Rt.a,{key:t},m.a.createElement("ul",{className:"entity-column"},e.map((e,t)=>{let{id:r,slug:n,name:i}=e;return m.a.createElement(Bt,{key:t,entityMeta:a?a[r]:null,entityId:r,slug:n,name:i})}))))))}var zt=r(7),Ut=r(33);function Vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Qt extends h.PureComponent{constructor(){super(...arguments),this.state={entitiesMeta:null}}getEntityColumnCount(){const e=this.props.desktopColumns||3;return this.context.envInfo.isMobile?1:e}renderOnlyTopics(){const{entities:e}=this.props.paperDetail.paper;return m.a.createElement(Ht,{cols:this.getEntityColumnCount(),entities:e,entitiesMeta:this.state.entitiesMeta})}fetchEntitiesMeta(){const{api:e}=this.context,t=this.props.paperDetail.paper.entities.map(e=>e.id);e.fetchEntitiesByIds(t).then(e=>{this.setState({entitiesMeta:e.resultData.entities})}).catch(e=>zt.a.warn(e))}componentDidMount(){setTimeout(()=>this.fetchEntitiesMeta(),100)}render(){const{entities:e}=this.props.paperDetail.paper;return e.isEmpty()?null:this.renderOnlyTopics()}}Vt(Qt,"propTypes",{paperDetail:b.a.instanceOf(Ut.h).isRequired,desktopColumns:b.a.number}),Vt(Qt,"contextTypes",{api:b.a.instanceOf($e.a).isRequired,envInfo:b.a.object.isRequired,weblabStore:b.a.instanceOf(at.b).isRequired});var Yt=r(107);function Wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Gt extends h.PureComponent{renderFiguresSection(e,t){return h.createElement(Dt,{paperId:e.id,slug:e.slug,figures:t})}renderCardContent(e,t,r,a){if(!e.isEmpty()){const n=h.createElement(h.Fragment,null,!e.isEmpty()&&this.renderFiguresSection(a,e));return t.isEmpty()?h.createElement(A,{willChildrenOwnLayout:!0},h.createElement(M,null,n)):h.createElement(A,{willChildrenOwnLayout:!0},h.createElement(M,null,n),h.createElement(F,null,h.createElement(B,null,h.createElement(Qt,{paperDetail:r,desktopColumns:1}))))}return null}renderCardFooter(e,t){return e.isEmpty()?null:h.createElement(q,null,h.createElement(Qt,{paperDetail:t}))}hasFigures(e){return e.some(e=>"figure"===e.figureType)}hasTables(e){return e.some(e=>"table"===e.figureType)}hasValidEntities(e){return!e.entities.isEmpty()&&(e.fieldsOfStudy.includes(se.a.MEDICINE.name)||e.fieldsOfStudy.includes(se.a.COMPUTER_SCIENCE.name))}render(){const{paperDetail:e,paperDetail:{figures:t,paper:r,paper:{entities:a}}}=this.props,n=this.hasValidEntities(r)?a:W.List(),i=[],s=[];this.hasFigures(t)&&(i.push(Y.a.getString("paperDetail.sectionSubtitles.figures")),s.push(Y.a.getString("paperDetail.sectionSubtitles.figures"))),this.hasTables(t)&&(i.push(Y.a.getString("paperDetail.sectionSubtitles.tables")),s.push(Y.a.getString("paperDetail.sectionSubtitles.tables"))),n.isEmpty()||i.push(Y.a.getString("paperDetail.sectionSubtitles.topics"));const o=ke.k(i),c=Y.a.getString("paperDetail.sectionSubtitles.extractedContent",o);if(!t.isEmpty()||!n.isEmpty()){const a=this.renderCardContent(t,n,e,r);return h.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:Y.a.getString("paperDetail.tabLabels.extractedContent")},h.createElement(D,{cardId:Gt.CARD_ID,navLabel:o},h.createElement(L,{title:c}),a||this.renderCardFooter(n,e)))}return null}}Wt(Gt,"propTypes",{paperDetail:b.a.instanceOf(Yt.a).isRequired}),Wt(Gt,"contextTypes",{weblabStore:b.a.instanceOf(at.b).isRequired}),Wt(Gt,"CARD_ID","extracted");var Kt=r(479),Xt=r(476),$t=r(657),Jt=r(140),Zt=r(401),er=(r(161),r(145));function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function rr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ar extends h.Component{constructor(){super(...arguments),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromPaperStore()),this.context.paperStore.registerComponent(this,()=>{this.setState(this.getStateFromPaperStore())})}getStateFromPaperStore(){var e;const{paperStore:t}=this.context;return{pdfData:null!=(e=t.getPaperDetail())?e.pdfData:e}}render(){const{pdfData:e}=this.state,{paperId:t,isPrimary:r}=this.props;return!!e&&h.createElement(Rt.a,null,h.createElement(It.a,{to:"PAPER_DETAIL_PDF_DATA",params:{paperId:t,pdfSha:e.pdfSha},shouldUnderline:!1},h.createElement(Zt.a,{tagName:"a",className:O()("reader__button",{"reader__button--primary":!!r}),iconProps:{height:"100%",width:"100%",icon:"semantic-reader",className:"reader__button-icon"},text:Object(oe.c)(e=>e.paperDetail.semanticReader.viewButton)})))}}rr(ar,"contextTypes",{paperStore:b.a.instanceOf(er.b)});var nr=r(185);var ir=e=>{let{children:t}=e;if(!t)return null;const r=Object(nr.a)(e=>e.weblabStore,e=>e.isFeatureEnabled(Ze.b.SemanticReader))?wt.a:Pt.a;return h.Children.toArray(t).filter(e=>{var t;return(null!=(t=e)?t.type:t)===r})},sr=r(113),or=r(402),cr=r(75),lr=r(197),pr=r(86),ur=r.n(pr);function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}const hr="".concat("https://scholarphi.semanticscholar.org","/api/v0"),mr=/\.pdf$/gi;class fr extends h.Component{constructor(){super(...arguments),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"state",{isLoading:!0,readerPaperUrl:null})}componentDidMount(){const{paper:e}=this.props;let t=e.links.find(e=>e.linkType===or.a.ARXIV);if(t||(t=e.alternatePaperLinks.find(e=>e.linkType===or.a.ARXIV)),!t)return;const r=t.url.split("/"),a=r[r.length-1].replace(mr,"");ur.a.get("".concat(hr,"/papers/arxiv:").concat(encodeURIComponent(a),"/version")).end((r,a)=>{if(r)this.setState({isLoading:!1});else{const r=a.body;this.setState({isLoading:!1,readerPaperUrl:t.url.replace(mr,"v".concat(r.version,".pdf"))});const n=cr.a.create("semanticReader.link",{"paper-id":e.id});Object(lr.a)([n])}})}render(){const{paper:e}=this.props,{isLoading:t,readerPaperUrl:r}=this.state;return t||!r?null:h.createElement(Rt.a,null,h.createElement(sr.a,{href:(a=r,"".concat("https://scholarphi.semanticscholar.org","/?file=").concat(a)),allowReferrer:!0},h.createElement(Zt.a,dr({},Object(Ce.a)({id:Te.u,"paper-id":e.id}),{className:"flex-paper-actions__button flex-paper-actions__button--primary",iconProps:{icon:"fa-link-out",height:"11",width:"11"},text:Object(oe.c)(e=>e.paperDetail.semanticReader.viewButton)}))));var a}}var br=r(65),gr=r(52),yr=r(49),Er=r(21),Or=r.n(Er);class vr extends yr.a{constructor(e,t){super(gr.a.CONTEXTMENUOPEN,Or.a.recursive({target:e},t))}}vr.create=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new vr(...t)};var _r=r(460),Sr=r(76),Pr=r(336),wr=r(204),xr=r(121);function Cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(r),!0).forEach((function(t){Nr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jr(e){const t=vr.create(ie.a.PaperDetail.Header.Action.PAPER_LINK,Tr({},e));Object(ht.a)(t)}class Ir extends h.PureComponent{constructor(){super(...arguments),Nr(this,"onClickPaperLink",(e,t)=>{if(e.linkType===or.a.WILEY||e.linkType===or.a.DOI){const r=_r.a(e.url);t.preventDefault(),window.open(r,"_blank")}}),Nr(this,"prepareAlternateLinkGroups",e=>_r.e(e,5));const{authStore:e}=this.context;this.state=Tr({},this.getStateFromAuthStore(),{},this.getStateFromPaperStore()),e.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore()),this.setState(this.getStateFromPaperStore())})}getStateFromAuthStore(){const{authStore:e}=this.context;return{isLoggedIn:e.hasAuthenticatedUser()}}getStateFromPaperStore(){const{paperStore:e}=this.context,t=e.getPaperDetail();return{pdfData:t&&t.pdfData?t.pdfData:void 0}}componentDidMount(){this.trackImpressionsDataToRico()}componentDidUpdate(e){const{paper:t}=this.props;t.id!==e.paper.id&&this.trackImpressionsDataToRico()}trackImpressionsDataToRico(){const{paper:e,showPrimaryOnly:t}=this.props,r=this.prepareAlternateLinkGroups(e.alternatePaperLinks),a=r.nonPdf.map(e=>e.url).toArray().concat(r.pdf.map(e=>e.url).toArray()),n=r.openAccess.map(e=>e.url).toArray(),i={paper:e.id,primaryPaperLinkDisplayed:e.primaryPaperLink?e.primaryPaperLink.linkType:null,primaryPaperPublisher:e.primaryPaperLink?e.primaryPaperLink.publisherName:null,alternateSourcesDisplayed:!(t||e.alternatePaperLinks.isEmpty()),listOfAlternateSourcesDisplayed:a,openAccessDisplayed:!r.openAccess.isEmpty(),listofOpenAccessDisplayed:n};Object(xr.a)(wr.a.PDP.IMPRESSION,i)}renderSemanticReaderDropdown(e){const t=h.createElement(Pe.default,{arrow:Pe.ARROW_POSITION.SIDE_TOP_POS_RIGHT,className:"reader__dropdown-content"},e);return h.createElement(z.default,{className:"reader__dropdown",type:H.TYPE.DEFAULT,children:h.createElement(Xt.default,{label:null,className:"reader__dropdown-button"}),popover:()=>t,usePortal:!1})}getAlternates(e){const{isLoggedIn:t}=this.state,{paper:r,showPrimaryOnly:a}=this.props;if(a||r.alternatePaperLinks.isEmpty())return null;const n=this.prepareAlternateLinkGroups(r.alternatePaperLinks),i=n.openAccess.isEmpty()&&n.pdf.isEmpty()&&n.nonPdf.isEmpty(),s=_r.f(r.alternatePaperLinks),o=s.first(),c=s.shift(),l=this.prepareAlternateLinkGroups(e?s:c),p=o.linkType===or.a.OPEN_ACCESS,u=_r.d(o.url)&&!p,d=o.linkType===or.a.INSTITUTIONAL_ACCESS,m={id:Te.a,"paper-id":this.props.paper.id,"has-open-links":!l.pdf.isEmpty(),"has-open-nonpdf":!l.nonPdf.isEmpty(),"has-unpaywall":!l.openAccess.isEmpty(),"has-institutional":void 0!==l.institutional,"num-alternates":l.pdf.size+l.nonPdf.size+l.openAccess.size};if(i){if(!this.context.weblabStore.isFeatureEnabled(Ze.b.OpenAthensRedirect))return null;const e={id:Te.o,"link-type":n.institutional,"direct-pdf-link":!1,"unpaywall-link":!1,institutional:!0,"primary-link":!1,"paper-id":r.id};return h.createElement(Rt.a,Object(Ce.a)(e),h.createElement(kr,{link:n.institutional,paperId:r.id,isPrimary:!1,className:"flex-paper-actions__button flex-paper-actions__button--secondary"}))}const f=l.openAccess.isEmpty()?null:h.createElement("ul",{className:"unpaywall-links"},l.openAccess.map(e=>h.createElement("li",{key:e.url,className:"unpaywall"},h.createElement(kr,{link:e,paperId:r.id,isPrimary:!1})))),b=l.pdf.isEmpty()?null:h.createElement("ul",{className:"pdf-links"},l.pdf.map(e=>h.createElement("li",{key:e.url,className:"pdf"},h.createElement(kr,{link:e,paperId:r.id,isPrimary:!1})))),g=l.nonPdf.isEmpty()?null:h.createElement("ul",{className:"out-links"},l.nonPdf.map(e=>h.createElement("li",{key:e.url,className:"link-out"},h.createElement(kr,{link:e,paperId:r.id,isPrimary:!1})))),y=l.institutional?h.createElement(Jt.c,{feature:Ze.b.OpenAthensRedirect},h.createElement(Jt.b,null,h.createElement("ul",{className:"institutional-link"},h.createElement("li",{key:l.institutional.url,className:"institutional"},h.createElement(kr,{link:n.institutional,paperId:r.id,isPrimary:!1}))))):null,E=t&&n.institutional,v=h.createElement("div",null,f,y,b,g);function _(){return null!=f||null!=b||null!=g||null!=y}if(e)return h.createElement("div",{className:"alternate-sources__dropdown-wrapper"},h.createElement(Rt.a,{className:"alternate-sources__dropdown"},_()&&this.renderSemanticReaderDropdown(v)),h.createElement(Jt.c,{feature:Ze.b.OpenAthensRedirect},h.createElement(Jt.b,null,E?h.createElement("div",{className:"institutional-banner"},h.createElement("span",{className:"banner-new-label"},Object(oe.c)(e=>e.paper.institutionalAccessBanner.new)),Object(oe.c)(e=>e.paper.institutionalAccessBanner.institutionalAccess)):null)));const S=_r.b(o),P=p?{icon:"open-access",width:"15",height:"15"}:u?{icon:"pdf",width:"24",height:"18"}:{icon:"fa-link-out",width:"11",height:"11"},w={"link-type":o.linkType,"direct-pdf-link":_r.d(o.url),"unpaywall-link":p,institutional:d,"primary-link":!1,"paper-id":r.id};return h.createElement("div",{className:"alternate-sources__dropdown-wrapper"},h.createElement(Rt.a,{className:"alternate-sources__dropdown"},o&&h.createElement(Ce.b,{heapProps:{id:Te.o,"link-type":o.linkType,"direct-pdf-link":_r.d(o.url),"unpaywall-link":p,institutional:d,"primary-link":!1,"paper-id":r.id}},h.createElement(Zt.a,{tagName:"a",link:o.url,className:O()("flex-paper-actions__button","alternate-sources__dropdown-button",{"alternate-sources__dropdown-button--show-divider":_()}),iconProps:P,isAlternateSourceButtonLink:!0,isPdf:_r.d(o.url),onContextMenu:()=>jr(w),testId:"paper-link",text:S,target:"_blank",rel:"noopener",title:o.url,href:o.url})),_()&&h.createElement($t.a,{className:"alternate-sources__dropdown-menu",content:v,testId:"alt-paper-links"},h.createElement("span",Object(Ce.a)(m),h.createElement(X.a,{width:"10",height:"10",icon:"disclosure",className:"icon-down"})))),h.createElement(Jt.c,{feature:Ze.b.OpenAthensRedirect},h.createElement(Jt.b,null,E?h.createElement("div",{className:"institutional-banner"},h.createElement("span",{className:"banner-new-label"},Object(oe.c)(e=>e.paper.institutionalAccessBanner.new)),Object(oe.c)(e=>e.paper.institutionalAccessBanner.institutionalAccess)):null)))}render(){const{envInfo:e,weblabStore:t}=this.context,{id:r,primaryPaperLink:a}=this.props.paper,{entitlement:n,paper:i}=this.props,{pdfData:s}=this.state,o=n?Object(Sr.a)({url:n.url,linkType:"entitlement",publisherName:"none"}):a,c=!e.isMobile&&t.isFeatureEnabled(Ze.b.PdfReader)&&!!s&&!!s.pdfUrl,l=this.getAlternates(c),p=!!o,u=p||!!l;return h.createElement(de.a,{className:O()("flex-paper-actions__item-container",{reader__container:c}),wrap:!1},!u&&h.createElement(Rt.a,{className:"alternate-sources__paperlink-wrapper"},h.createElement(Dr,null)),p&&h.createElement(Rt.a,{className:"alternate-sources__paperlink-wrapper"},h.createElement(kr,{className:"flex-paper-actions__button flex-paper-actions__button--primary",link:o,paperId:r,isPrimary:!0,onClick:this.onClickPaperLink.bind(this,o),entitlement:n})),c&&h.createElement(ar,{paperId:i.id,isPrimary:!p}),l,h.createElement(Ke.a,null,h.createElement(ir,null,h.createElement(Jt.b,null,h.createElement(fr,{paper:i})))))}}function kr(e){let{link:t,paperId:r,isPrimary:a,onClick:n,entitlement:i,className:s}=e;const o=_r.d(t.url),c=t.linkType===or.a.OPEN_ACCESS,l=t.linkType===or.a.INSTITUTIONAL_ACCESS,p=(()=>{if(i)switch(i.source){case Pr.a.GETFTR:return Pr.a.GETFTR;case Pr.a.LIBKEY:default:return"fa-link-out"}else{if(c)return"open-access";if(o)return"fa-pdf";if(l)return"openathens-login"}return"fa-link-out"})(),u=i?Object(oe.c)(e=>e.paper.link[i.source]):a||l?_r.c(t):_r.b(t),d="fa-pdf"===p||"fa-link-out"===p?"11":"15",m={"link-type":t.linkType,"direct-pdf-link":o,"unpaywall-link":c,institutional:l,"primary-link":a,"paper-id":r},f=(()=>{if(i)return{entitlement:!0,"entitlement-source":i.source}})();return h.createElement(Ce.b,{heapProps:Tr({id:Te.o},m,{},f)},h.createElement(Zt.a,{tagName:"a",link:t,onClick:n,onContextMenu:()=>jr(m),className:O()({"button--full-width":!0,"button--primary":a,"button--unpaywall":c,"button--institutional":l},s),iconProps:{icon:p,width:d,height:d},testId:"paper-link",text:u,target:"_blank",rel:"noopener",title:t.url,href:t.url}))}function Dr(){return h.createElement("div",{className:"flex-paper-actions__info flex-paper-actions__info--no-link","data-test-id":"no-paper-link"},h.createElement("div",{className:"flex-paper-actions__info__icon"},h.createElement(X.a,{icon:"fa-link-broken",height:"19",width:"14"})),h.createElement("div",{className:"flex-paper-actions__info__label"},Object(oe.c)(e=>e.paper.noLinkLabel)))}Nr(Ir,"contextTypes",{authStore:b.a.instanceOf(br.a).isRequired,envInfo:b.a.instanceOf(p.a).isRequired,paperStore:b.a.instanceOf(er.b).isRequired,weblabStore:b.a.instanceOf(at.b).isRequired});class Rr extends h.PureComponent{render(){const{onClick:e,className:t}=this.props,r=Y.a.getString("paper.action.cite"),a=O()("cite-button",t);return m.a.createElement(Zt.a,{iconProps:{icon:"fa-quote",width:"11",height:"11"},target:"_blank",onClick:e,className:a,testId:"cite-link",text:r})}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Rr,"propTypes",{paper:b.a.instanceOf(Ut.g).isRequired,className:b.a.string,onClick:b.a.func.isRequired});var Lr=r(488),Ar=r(114),Fr=r(99),Mr=r(144),qr=r(29),Br=r(74);function Hr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class zr extends h.PureComponent{constructor(e,t){super(e,t),this.showCiteModal=this.showCiteModal.bind(this)}showCiteModal(){Object(ht.a)(Nt.a.create(ie.a.PaperDetail.Header.Action.CITE)),this.context.dispatcher.dispatch(Object(Br.b)({id:qr.b.CITE,data:this.props.paper}))}render(){const{paper:e,trackActionClick:t,entitlement:r}=this.props;return m.a.createElement(de.a,{wrap:!0,className:"flex-paper-actions__group"},m.a.createElement(Rt.a,{className:"alternate-sources"},m.a.createElement(Ir,{paper:e,entitlement:r})),m.a.createElement(Rt.a,null,m.a.createElement(de.a,{className:"flex-paper-actions__item-container"},m.a.createElement(Rt.a,null,m.a.createElement(Ce.b,{heapProps:{id:Te.s}},m.a.createElement(Lr.a,{buttonText:Object(oe.c)(e=>e.paper.action.save),className:"flex-paper-actions__button flex-paper-actions__button--responsive-secondary",paper:e,trackLibraryClick:t}))),m.a.createElement(Rt.a,null,m.a.createElement(Ce.b,{heapProps:{id:Te.q}},m.a.createElement(Kt.a,{className:"flex-paper-actions__button flex-paper-actions__button--responsive-secondary",queryType:Ar.c.PAPER_CITATION,queryValue:e.id,displayValue:e.title.text,subLocation:Fr.g.pdpAlert}))),m.a.createElement(Rt.a,{className:"flex-paper-actions__item--hidden-when-narrow"},m.a.createElement(Ce.b,{heapProps:{id:Te.r}},m.a.createElement(Rr,{className:"flex-paper-actions__button flex-paper-actions__button--responsive-secondary",paper:e,onClick:this.showCiteModal}))))))}}Hr(zr,"propTypes",{paper:b.a.object.isRequired,trackActionClick:b.a.func.isRequired,isPdp:b.a.bool,entitlement:b.a.object}),Hr(zr,"contextTypes",{alertsStore:b.a.instanceOf(Mr.a).isRequired,envInfo:b.a.instanceOf(p.a).isRequired,dispatcher:b.a.instanceOf(d.a).isRequired,weblabStore:b.a.instanceOf(at.b).isRequired});var Ur=r(388);function Vr(){return(Vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}const Qr=e=>e.replace("_","-").toLowerCase();class Yr extends h.PureComponent{getHeapProps(){const{type:e}=this.props,{heapPropsChain:{"relevance-bucket":t,"page-type":r,"page-paper-id":a}}=this.context;return{id:Te.l,type:Qr(e),"relevance-bucket":t,"page-type":r,"page-paper-id":a}}render(){const{description:e,externalLink:t,jewel:r,linkParams:a,linkTo:n,metaBottom:i,metaTop:s,metaLeft:o,table:c,title:l,type:p,typeLabel:u,preview:d,footer:m}=this.props;let f;return f=t&&l?h.createElement(sr.a,{href:t},l):n&&a?h.createElement(It.a,{to:n,params:a},l):l,h.createElement("div",Vr({className:"external-content"},Object(Ce.a)(this.getHeapProps())),d&&h.createElement("div",{className:"external-content__preview"},d),h.createElement("div",{className:O()({"external-content__container":!0,["external-content__".concat(Qr(p),"-type")]:!0})},h.createElement("div",{className:"external-content__container-inner"},u&&h.createElement("div",{className:"external-content__type-label"},u),f&&h.createElement("div",{className:"external-content__title"},f),e&&h.createElement("div",{className:"external-content__description"},e),c&&h.createElement("div",{className:"external-content__table"},c),h.createElement("div",{className:"external-content__spacer"}),(o||s||i)&&h.createElement("div",{className:"external-content__meta-outer"},o&&h.createElement("div",{className:"external-content__meta-left"},o),(s||i)&&h.createElement("div",{className:"external-content__meta-top-bottom-container"},s&&h.createElement("div",{className:"external-content__meta-top"},s),i&&h.createElement("div",{className:"external-content__meta-bottom"},i))),r&&h.createElement("div",{className:"external-content__type-jewel"},r)),m&&h.createElement("div",{className:"external-content__footer"},m)))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Yr,"contextTypes",{colSpan:b.a.number,heapPropsChain:b.a.shape({"page-type":b.a.string.isRequired,"page-paper-id":b.a.string,"relevance-bucket":b.a.string}).isRequired});let Wr=null;function Gr(e){const t=e.slice().sort((e,t)=>t.minWidth-e.minWidth),r=(Wr||(Wr=Je.a.getViewportSize(),Promise.resolve().then(()=>{Wr=null})),Wr);if(r)for(const e of t)if(e.minWidth<=r.width)return e.cols;return t[0].cols}class Kr extends h.PureComponent{render(){const{blog:{title:e,blogName:t,blogUrl:r,postedOn:a,url:n}}=this.props,i=r?h.createElement(sr.a,{href:r},t):t;return h.createElement(Yr,{type:"BLOG",typeLabel:Object(oe.c)(e=>e.externalContent.blog.typeLabel),externalLink:n,title:e,metaTop:i,metaBottom:a&&_t.a.unix(a).utc().format("D MMMM YYYY"),jewel:h.createElement(X.a,{icon:"jewel-blog",width:"16",height:"16"})})}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Kr,"MIN_COLUMN_SPAN",Gr([{minWidth:0,cols:12},{minWidth:550,cols:6},{minWidth:900,cols:3}]));function Xr(e){let{data:t}=e;const r=t.filterNot(e=>e.isEmpty());return r.isEmpty()?null:h.createElement("table",{className:"external-content-table"},h.createElement("tbody",null,r.map((e,t)=>h.createElement("tr",{key:t,className:"external-content-table__row"},h.createElement("th",{className:"external-content-table__row-type"},Object(oe.c)(e=>e.paperDetail.featured.table[t])),h.createElement("td",{className:"external-content-table__row-values"},function(e){const t=e.take(3).join(", ");return e.size>3?"".concat(t,", (+").concat(e.size-3," more)"):t}(e)))).toIndexedSeq()))}function $r(e,t){if(!e||!t)return null;const r="".concat(_t.a.unix(e).format("MMMM YYYY")),a="".concat(_t.a.unix(t).format("MMMM YYYY"));return r===a?r:"".concat(r," - ").concat(a)}class Jr extends h.PureComponent{render(){const{clinicalTrialId:e,briefTitle:t,description:r,startDate:a,completionDate:n,source:i,conditionNames:s,studyType:o,interventionTypes:c}=this.props.clinicalTrial,l=h.createElement(Xr,{data:W.Map({conditionNames:s,interventionTypes:c})});return h.createElement(Yr,{type:"CLINICAL_TRIAL",typeLabel:Object(oe.c)(e=>e.externalContent.clinicalTrial[function(e){return e.replace(/\W/g,"").toLowerCase()}(o)]),title:t,description:h.createElement(Ft.a,{text:r,limit:200}),externalLink:(p=e,"https://clinicaltrials.gov/ct2/show/".concat(p)),table:l,metaTop:i,metaBottom:$r(a,n),jewel:h.createElement(sr.a,{href:"https://www.ctti-clinicaltrials.org/"},h.createElement(X.a,{icon:"jewel-clinical-trial",width:"16",height:"16"}))});var p}}function Zr(){return(Zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function ea(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Jr,"MIN_COLUMN_SPAN",Gr([{minWidth:0,cols:12},{minWidth:900,cols:6}]));class ta extends h.PureComponent{getHeapProps(e){const{heapPropsChain:{"relevance-bucket":t,"page-type":r,"page-paper-id":a}}=this.context;return{id:Te.l,type:e,"relevance-bucket":t,"page-type":r,"page-paper-id":a}}renderSource(){return function(e){var t;const r=null!=(t=e)&&null!=(t=t.githubRepo)?t.referenceSources:t;return!(!r||!r.find(e=>"paperswithcode"===e))}(this.props)?h.createElement(h.Fragment,null,Object(oe.c)(e=>e.externalContent.githubRepo.sourceFrom),h.createElement(sr.a,{href:"https://paperswithcode.com/?ref=semscholar"},Object(oe.c)(e=>e.externalContent.githubRepo.papersWithCode))):null}renderDatasets(){var e;const t=((null!=(e=this.props)&&null!=(e=e.githubRepo)?e.datasets:e)||W.List()).filter(e=>!!e.url);return t.size<=0?null:h.createElement("div",{className:"external-content__github__datasets"},h.createElement("div",{className:"external-content__type-label"},Object(oe.c)(e=>e.externalContent.githubRepo.datasetLabel)),t.map(e=>h.createElement("div",{className:"external-content__github__dataset-box"},h.createElement(sr.a,{href:e.url},e.pwcName))),h.createElement("div",{className:"external-content__type-jewel"},h.createElement(X.a,{icon:"dataset",width:"16",height:"16"})))}renderMetaTop(){var e,t;const r=(null!=(t=this.props)&&null!=(t=t.githubRepo)?t.stars:t)||0,a=(null!=(e=this.props)&&null!=(e=e.githubRepo)?e.forkCount:e)||0;let n,i,s;return r>0&&(n=r+" "+Object(oe.c)(e=>e.externalContent.githubRepo.stars)),a>0&&(i=a+" "+Object(oe.c)(e=>e.externalContent.githubRepo.forkCount)),r>0&&a>0&&(s=" â¢ "),h.createElement("div",null,n,s,i)}render(){const{githubRepo:{fullName:e,description:t,url:r,parentFullName:a,parentUrl:n}}=this.props,i=this.renderDatasets(),s=this.renderSource();return h.createElement("div",Zr({className:"external-content"},Object(Ce.a)(this.getHeapProps("github-repo"))),h.createElement("div",{className:"external-content__github-repo-type"},h.createElement("div",{className:"external-content__container-inner"},h.createElement("div",{className:"external-content__type-container"},h.createElement("div",{className:"external-content__type-label"},Object(oe.c)(e=>e.externalContent.githubRepo.typeLabel)),s&&h.createElement("div",{className:"external-content__type-source"},s)),h.createElement("div",{className:"external-content__title"},h.createElement(sr.a,{href:r},e)),a&&h.createElement("div",{className:"external-content__github-parent"},Object(oe.c)(e=>e.externalContent.githubRepo.parentRepo),h.createElement(sr.a,{href:n},a)),h.createElement("div",{className:"external-content__description"},t),h.createElement("div",{className:"external-content__spacer"}),h.createElement("div",{className:"external-content__meta-top"},this.renderMetaTop()),h.createElement("div",{className:"external-content__type-jewel"},h.createElement(X.a,{icon:"jewel-code",width:"16",height:"16"}))),i&&h.createElement("div",Zr({className:"external-content__footer"},Object(Ce.a)(this.getHeapProps("datasets"))),this.renderDatasets())))}}ea(ta,"MIN_COLUMN_SPAN",Gr([{minWidth:0,cols:12},{minWidth:550,cols:6},{minWidth:900,cols:3}])),ea(ta,"contextTypes",{colSpan:b.a.number,heapPropsChain:b.a.shape({"page-type":b.a.string.isRequired,"page-paper-id":b.a.string,"relevance-bucket":b.a.string}).isRequired});class ra extends h.PureComponent{render(){const{news:{title:e,publicationName:t,publicationUrl:r,postedOn:a,url:n}}=this.props,i=r?h.createElement(sr.a,{href:r},t):t;return h.createElement(Yr,{type:"NEWS",typeLabel:Object(oe.c)(e=>e.externalContent.news.typeLabel),externalLink:n,title:e,metaTop:i,metaBottom:a&&_t.a.unix(a).utc().format("D MMMM YYYY"),jewel:h.createElement(X.a,{icon:"jewel-news",width:"16",height:"16"})})}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ra,"MIN_COLUMN_SPAN",Gr([{minWidth:0,cols:12},{minWidth:550,cols:6},{minWidth:900,cols:3}]));class aa extends h.PureComponent{render(){const{presentation:{title:e,authors:t,url:r,published:a}}=this.props,n=t.join(", ");return h.createElement(Yr,{type:"PRESENTATION",typeLabel:Object(oe.c)(e=>e.externalContent.presentation.typeLabel),externalLink:r,title:e,metaTop:n,metaBottom:a&&_t.a.unix(a).utc().format("D MMMM YYYY"),jewel:h.createElement(X.a,{icon:"jewel-slide",width:"16",height:"16"})})}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(aa,"MIN_COLUMN_SPAN",Gr([{minWidth:0,cols:12},{minWidth:550,cols:6},{minWidth:900,cols:3}]));const na=["Presentation One","Presentation Two","Presentation Three","Presentation Four"];class ia extends h.PureComponent{renderMultiple(){const{presentationList:{presentationUrls:e,title:t}}=this.props,r=na.length,a=h.createElement("div",{className:"external-content__presentation-list"},e.slice(0,r).map((e,t)=>h.createElement("div",{className:"external-content__presentation-list-link",key:t},h.createElement(sr.a,{href:e},h.createElement("div",{className:"external-content__presentation-list-icon"},h.createElement(X.a,{icon:"jewel-slide",className:"icon-jewel-slide"})),h.createElement("div",{className:"external-content__presentation-list-label"},na[t])))));return h.createElement(Yr,{type:"PRESENTATION_LIST",typeLabel:"Presentation Slides",title:t,table:a})}renderSingle(){const{presentationList:{presentationUrls:e,title:t}}=this.props,r=e.get(0),a=h.createElement(sr.a,{href:r,className:"external-content__presentation-list-preview"},h.createElement(X.a,{icon:"jewel-slide"}));return h.createElement(Yr,{type:"PRESENTATION_LIST",typeLabel:Object(oe.c)(e=>e.externalContent.presentation.typeLabel),preview:a,title:t,externalLink:r})}render(){return this.props.presentationList.presentationUrls.size>1?this.renderMultiple():this.renderSingle()}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ia,"MIN_COLUMN_SPAN",Gr([{minWidth:0,cols:12},{minWidth:550,cols:6},{minWidth:900,cols:3}]));var sa=r(700),oa=r.n(sa);function ca(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class la extends h.PureComponent{render(){const{envInfo:{isMobile:e}}=this.context,{video:{uniqueId:t,title:r,paperId:a,slug:n,thumbnailUrl:i,durationSeconds:s,channel:o,datePosted:c,url:l}}=this.props;let p=null,u=null,d=null,m=null;const f=h.createElement(h.Fragment,null,h.createElement("div",{className:"external-content__video-play-button"},h.createElement(X.a,{className:"external-content__video-play-button-circle",icon:"play-button-circle",width:"40",height:"40"}),h.createElement(X.a,{className:"external-content__video-play-button-triangle",icon:"play-button-triangle",width:"40",height:"40"})),s>0&&h.createElement("div",{className:"external-content__video-duration"},Object(fe.q)(s)));return e||!oa.a.canPlay(l)?(p=l,m=h.createElement("div",{className:"external-content__video",style:{backgroundImage:"url(".concat(i,")")}},h.createElement(sr.a,{href:p},f))):(u="PAPER_DETAIL_VIDEO",d={paperId:a,slug:n,uniqueId:"".concat(t)},m=h.createElement(It.a,{className:"external-content__video",to:u,params:d,style:{backgroundImage:"url(".concat(i,")")}},f)),h.createElement(Yr,{type:"VIDEO",typeLabel:Object(oe.c)(e=>e.externalContent.video.typeLabel),preview:m,externalLink:p,linkTo:u,linkParams:d,title:r,metaTop:o,metaBottom:c&&_t()(c).format("D MMMM YYYY"),jewel:h.createElement(X.a,{icon:"jewel-video",width:"16",height:"16"})})}}ca(la,"MIN_COLUMN_SPAN",Gr([{minWidth:0,cols:12},{minWidth:900,cols:6}])),ca(la,"contextTypes",{envInfo:b.a.instanceOf(p.a).isRequired});var pa=r(60);function ua(e){const{content:t}=e;return function(e){return e instanceof pa.a||e instanceof pa.b||e instanceof pa.c||e instanceof pa.d||e instanceof pa.e||e instanceof pa.f||e instanceof pa.g}(t)?t instanceof pa.a?h.createElement(Kr,{blog:t}):t instanceof pa.b?h.createElement(Jr,{clinicalTrial:t}):t instanceof pa.c?h.createElement(ta,{githubRepo:t}):t instanceof pa.d?h.createElement(ra,{news:t}):t instanceof pa.e?h.createElement(aa,{presentation:t}):t instanceof pa.f?h.createElement(ia,{presentationList:t}):t instanceof pa.g?h.createElement(la,{video:t}):null:null}function da(e,t){return t?Gr([{minWidth:0,cols:12},{minWidth:900,cols:6}]):e instanceof pa.a?Kr.MIN_COLUMN_SPAN:e instanceof pa.b?Jr.MIN_COLUMN_SPAN:e instanceof pa.c?ta.MIN_COLUMN_SPAN:e instanceof pa.d?ra.MIN_COLUMN_SPAN:e instanceof pa.e?aa.MIN_COLUMN_SPAN:e instanceof pa.f?ia.MIN_COLUMN_SPAN:e instanceof pa.g?la.MIN_COLUMN_SPAN:3}class ha extends h.PureComponent{getChildContext(){return{colSpan:this.props.colSpan}}render(){const{colSpan:e}=this.props;return h.createElement("div",{className:O()({"external-content__box":!0,["external-content__span-".concat(e)]:!0})},this.props.children)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ha,"childContextTypes",{colSpan:b.a.number});class ma extends h.PureComponent{render(){return h.createElement("div",{className:"external-content__boxes"},this.props.children)}}const fa=Object(fe.m)((e,t)=>{const r=e.slice().sort((e,t)=>e-t);for(const e of r)if(t<=e)return e;return r.pop()});function ba(e){let{maintainSorting:t,columnSizes:r,items:a}=e;return Object(fe.b)({maxSize:12,maintainSorting:t},a.map(e=>{let{item:t,size:a}=e;return{size:fa(r,a),item:t}}))}class ga extends h.Component{shouldComponentUpdate(){return!0}render(){if(Object(jt.a)()){const{dispatcher:e}=this.context;e.dispatchEventually({actionType:u.a.actions.PAPER_NAV_DOM_DIRTY,viewportRect:mt.a.fromDOM(document)})}return null}}function ya(e){let{children:t}=e;return"function"==typeof t?t():t}function Ea(e){let{children:t}=e;return"function"==typeof t?t():t}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ga,"contextTypes",{dispatcher:b.a.instanceOf(d.a).isRequired}),ya.defaultProps={variation:"control"};class Oa extends h.PureComponent{constructor(e,t){super(e,t);const{isolated:r,exposeOnRender:a}=e,n=this.getExperimentModel();r||this.ensureExhaustiveMatch(),a&&t.weblabStore.expose(n.KEY),this.state=this.getStateFromWeblabStore(),t.weblabStore.registerComponent(this,()=>{this.setState(this.getStateFromWeblabStore())})}getStateFromWeblabStore(){const{KEY:e,Variation:t}=this.getExperimentModel();return Object.keys(t).reduce((r,a)=>{const n=t[a];return r[n]=this.context.weblabStore.isVariationEnabled(e,n),r},{})}getExperimentModel(){const{experiment:e}=this.props,{weblabStore:t}=this.context;return"function"==typeof e?e(t.getExperimentMap()):e}ensureExhaustiveMatch(){const{weblabStore:e}=this.context,{Variation:t}=this.getExperimentModel();let r=G.a.Set(Object.keys(t).map(e=>t[e]));if(this.getChildrenArray().forEach(t=>{let{props:{variation:a}}=t;const n="function"==typeof a?a(e.getExperimentMap()):a;r=r.delete(n)}),r.size>0)throw new Error(["Not all variations were matched.","Please ensure that you have created a <Variation /> (and/or <Control />) for each variation in your experiment.","(missing: ".concat([...r].join(", "),")")].join(" "))}getChildrenArray(){return h.Children.toArray(this.props.children)}render(){const{weblabStore:e}=this.context;return this.getChildrenArray().find(t=>{let{props:{variation:r}}=t;const a="function"==typeof r?r(e.getExperimentMap()):r;return this.state[a]})||null}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Oa,"contextTypes",{weblabStore:b.a.instanceOf(at.b).isRequired});const va=Oa,_a=ya,Sa=Ea;var Pa=r(34),wa=r(43);function xa(){return(xa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function Ca(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(r),!0).forEach((function(t){Na(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ca(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Na(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ja=[3,6,12];class Ia extends h.PureComponent{constructor(){super(...arguments),Na(this,"onClickShowMore",()=>{this.setState({displayPageNum:this.state.displayPageNum+1},()=>{this.state.isLoading||ka(this.state)||this.fetchMoreMatchedContent()})}),Na(this,"onResize",()=>{const{matchedContent:e,displayPageNum:t}=this.state;this.setState(this.getStateFromMatchedContent(e,t))});const{matchedContent:e}=this.props.paperDetail;this.state=Ta({isLoading:!1,displayPageNum:1,loadedPageNum:1,matchedContent:e},this.getStateFromMatchedContent(e,1)),this.onResizeThrottled=Object(ut.a)(this.onResize,250,{tailing:!0})}componentDidMount(){window.addEventListener("resize",this.onResizeThrottled),this.trackNewContentTypeImpressions()}componentWillUnmount(){window.removeEventListener("resize",this.onResizeThrottled)}getStateFromMatchedContent(e,t){const{rows:r,hasMoreRows:a}=function(e){let{numRows:t,rows:r}=e;return{rows:r.slice(0,t),hasMoreRows:r.length>t}}({numRows:2*t,rows:ba({maintainSorting:!0,columnSizes:ja,items:e.map(e=>({item:e,size:da(e,!1)}))})});return{rows:r,hasMoreRows:a}}trackNewContentTypeImpressions(){if(!Object(jt.a)())return;const{matchedContent:e,rows:t}=this.state,r=t.reduce((e,t)=>e.concat(t),[]).length;e.slice(0,r).map(e=>Object(pa.j)(e)).toSet().subtract(this._contentTypesSeen).forEach(e=>{Object(ht.a)(cr.a.create(ie.a.PaperDetail.EXTERNAL_CONTENT_IMPRESSION,{contentType:e}))})}async fetchMoreMatchedContent(){const{id:e}=this.props.paperDetail.paper;if(e){try{var t;const{matchedContent:r,displayPageNum:a,loadedPageNum:n}=this.state;await Object(wa.e)(this,{isLoading:!0,loadedPageNum:n+1}),await Object(wa.b)(10);const i=await this.context.api.fetchMatchedContentForPaper({paperId:e,pageSize:9,offset:9*(n+1)}),s=W.List((null!=(t=i)&&null!=(t=t.resultData)?t.content:t)||[]).filter(pa.h).map(pa.i),o=r.concat(s);await Object(wa.e)(this,Ta({matchedContent:o},this.getStateFromMatchedContent(o,a))),this.trackNewContentTypeImpressions();s.size>=9&&!ka(this.state)&&await this.fetchMoreMatchedContent()}catch(e){zt.a.error(e)}return Object(wa.e)(this,{isLoading:!1})}}render(){const{isLoading:e,displayPageNum:t,rows:r,hasMoreRows:a}=this.state;return 0===r.length||0===r[0].length?null:h.createElement(va,{experiment:Pa.b.ExternalContentDisplay,exposeOnRender:!0,isolated:!0},h.createElement(Sa,{variation:Pa.b.ExternalContentDisplay.Variation.CONTROL},()=>h.createElement(o.a,{heapProps:{"relevance-bucket":"matched"}},h.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:Object(oe.c)(e=>e.paperDetail.tabLabels.matchedContent)},h.createElement(D,{cardId:Ia.CARD_ID,navLabel:Object(oe.c)(e=>e.paperDetail.sectionTitles.matchedContent.paperMentions),testId:"matched-content"},h.createElement(L,{title:Object(oe.c)(e=>e.paperDetail.sectionTitles.matchedContent.paperMentions)}),h.createElement(A,null,h.createElement("div",{className:"matched-content"},e&&h.createElement("div",{className:"matched-content__loading"},"Loading..."),h.createElement("div",{className:"matched-content__boxes"},h.createElement(ma,null,r.map(e=>e.map(e=>{let{size:t,item:r}=e;return h.createElement(ha,{key:r.uniqueId,colSpan:t},h.createElement(ua,{content:r}))})))),a&&h.createElement("div",{className:"matched-content__pagination"},h.createElement("button",xa({className:"matched-content__paginate-button button button--secondary"},Object(Ce.a)({id:Te.n,"page-number":t}),{onClick:this.onClickShowMore,"data-test-id":"matched-content__paginate-button"}),Object(oe.c)(e=>e.paperDetail.matched.paginationButtonText)))),h.createElement(ga,null)))))))}}function ka(e){const{displayPageNum:t,matchedContent:r}=e;return 4*(t+1)*2<r.size}Na(Ia,"CARD_ID","matched"),Na(Ia,"contextTypes",{api:b.a.instanceOf($e.a).isRequired,dispatcher:b.a.instanceOf(d.a).isRequired,weblabStore:b.a.instanceOf(at.b).isRequired});var Da=r(162);function Ra(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class La extends h.PureComponent{render(){const{heading:e,subheading:t,linkTo:r,linkParams:a,linkQuery:n}=this.props,i=h.createElement(h.Fragment,null,h.createElement("div",{className:"featured-content__explore-container"},h.createElement("h5",{className:"featured-content__explore-heading"},e),h.createElement("div",{className:"featured-content__explore-subheading"},t)));return r?h.createElement(It.a,{className:"featured-content__explore",to:r,params:a||{},query:n},i):h.createElement("div",{className:"featured-content__explore"},i)}}function Aa(){return(Aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function Fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ma(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ra(La,"defaultProps",{heading:Object(oe.c)(e=>e.paperDetail.featured.explore.heading),subheading:Object(oe.c)(e=>e.paperDetail.featured.explore.subheading)}),Ra(La,"contextTypes",{iconStore:b.a.instanceOf(Da.a).isRequired});const qa=[3,6,12];class Ba extends h.PureComponent{constructor(){super(...arguments),Ma(this,"onClickShowMore",()=>{this.setState({shouldShowAllBoxes:!0},()=>this.trackNewContentTypeImpressions())}),Ma(this,"onResize",()=>{const{paperDetail:e}=this.props;this.setState(this.getStateFromFeaturedContent(e.featuredContent),()=>this.trackNewContentTypeImpressions())});const{paperDetail:e}=this.props;this._contentTypesSeen=W.Set(),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(r),!0).forEach((function(t){Ma(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({shouldShowAllBoxes:!1},this.getStateFromFeaturedContent(e.featuredContent)),this.onResizeThrottled=Object(ut.a)(this.onResize.bind(this),250,{tailing:!0})}componentDidMount(){window.addEventListener("resize",this.onResizeThrottled),this.trackNewContentTypeImpressions()}componentWillUnmount(){window.removeEventListener("resize",this.onResizeThrottled)}getStateFromFeaturedContent(e){const{rows:t,exploreSize:r}=function(e){let{rows:t}=e;const r=t[0];let a=0;r&&(a=12-r.reduce((e,t)=>{let{size:r}=t;return e+r},0),9===a&&1===r.length?(r[0].size=6,a=6):6===a&&2===r.length?(r[0].size+=3,r[1].size+=3,a=0):3===a&&2===r.length&&(r[0].size>r[1].size?r[1].size+=3:r[0].size+=3,a=0));a<=2&&(a=0);return{exploreSize:a,rows:t}}({rows:ba({maintainSorting:!1,columnSizes:qa,items:e.map(e=>({item:e,size:da(e,!0)}))})});return{rows:t,exploreSize:r}}trackNewContentTypeImpressions(){if(!Object(jt.a)())return;const{paperDetail:e}=this.props,{shouldShowAllBoxes:t,rows:r}=this.state,a=t?r.reduce((e,t)=>e.concat(t),[]).length:r.length>0?r[0].length:0,n=e.featuredContent.slice(0,a).map(e=>Object(pa.j)(e)).toSet().subtract(this._contentTypesSeen);n.forEach(e=>{Object(ht.a)(cr.a.create(ie.a.PaperDetail.EXTERNAL_CONTENT_IMPRESSION,{contentType:e}))}),this._contentTypesSeen=this._contentTypesSeen.concat(n)}renderHeader(e){return e.filter(e=>!(e instanceof pa.b)).isEmpty()?Object(oe.c)(e=>e.paperDetail.featured.header.trialsOnly):e.filter(e=>!(e instanceof pa.c)).isEmpty()?Object(oe.c)(e=>e.paperDetail.featured.header.codeOnly):e.filter(e=>!(e instanceof pa.e||e instanceof pa.f)).isEmpty()?Object(oe.c)(e=>e.paperDetail.featured.header.slidesOnly):e.filter(e=>!(e instanceof pa.g)).isEmpty()?Object(fe.n)(e.size,Object(oe.c)(e=>e.paperDetail.featured.header.videosOnly.singular),Object(oe.c)(e=>e.paperDetail.featured.header.videosOnly.plural),!0):Object(oe.c)(e=>e.paperDetail.featured.header.default)}render(){const{paperDetail:e}=this.props,{shouldShowAllBoxes:t,rows:r,exploreSize:a}=this.state,{isMobile:n}=this.context.envInfo,i=r[0];if(!i)return null;const s=e.featuredContent.size-i.length,c=r.length>1&&!t,l=e.paper.entities.get(0)||null;return h.createElement(va,{experiment:Pa.b.ExternalContentDisplay,exposeOnRender:!0,isolated:!0},h.createElement(Sa,{variation:Pa.b.ExternalContentDisplay.Variation.CONTROL},()=>h.createElement(o.a,{heapProps:{"relevance-bucket":"featured"}},h.createElement(y,{id:this.constructor.NAV_ID,navLabel:this.renderHeader(e.featuredContent),className:O()("featured-content",{"featured-content--mobile":n,"featured-content__no-pagination":!c}),"data-test-id":"featured-content"},h.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:this.renderHeader(e.featuredContent)},h.createElement("div",{className:"featured-content__header"},h.createElement("h4",{className:"featured-content__header-text text--lg"},this.renderHeader(e.featuredContent)))),h.createElement(ma,null,t?r.map((e,t)=>e.map((e,r)=>{let{size:a,item:n}=e;return h.createElement(ha,{key:[n.uniqueId,t,r].join(","),colSpan:a},h.createElement(ua,{content:n}))})):i.map((e,t)=>{let{size:r,item:a}=e;return h.createElement(ha,{key:[a.uniqueId,t].join(","),colSpan:r},h.createElement(ua,{content:a}))}),a>0&&l?h.createElement(ha,{key:"explore",colSpan:a},h.createElement(La,{linkTo:"ENTITY",linkParams:{entityId:l.id,slug:l.slug}})):null),c&&h.createElement("div",{className:"featured-content__pagination"},h.createElement("button",Aa({className:"featured-content__paginate-button button button--secondary"},Object(Ce.a)({id:Te.m}),{onClick:this.onClickShowMore,"data-test-id":"featured-content__paginate-button"}),Object(oe.c)(e=>e.paperDetail.featured.paginationButtonText,s))),h.createElement(ga,null)))))}}function Ha(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function za(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ma(Ba,"NAV_ID","featured-content"),Ma(Ba,"contextTypes",{envInfo:b.a.instanceOf(p.a).isRequired});class Ua extends h.PureComponent{constructor(){super(...arguments),za(this,"handleHover",()=>{const e=Mt.a.create(ie.a.PaperDetail.Abstract.KEY_RESULT_HOVER,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ha(Object(r),!0).forEach((function(t){za(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ha(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.context.heapPropsChain,{paperId:this.props.paperDetail.paper.id}));Object(ht.a)(e)}),za(this,"truncateContent",e=>{const t=e.trim().split(" "),r=Object(oe.c)(e=>e.paperDetail.abstract.highlight.paragraphEllipsis);return r+t.slice(0,49).join(" ")+r}),za(this,"getPDFLink",()=>{const{relatedPages:e,paperDetail:t}=this.props,r=t.paper.primaryPaperLink;if(r&&_r.d(r.url)&&e&&e.length>0){const t=r.url;return"".concat(t,"#page=").concat(e[0])}return null})}renderPreviewBox(){const{content:e}=this.props,t=this.getPDFLink();return h.createElement("div",{className:"entity-preview-box abstract-result__paragraph-preview","data-test-id":"entity-preview-box"},h.createElement("div",{className:"entity-preview-box-hover-text abstract-result__related-paragraph__box"},h.createElement("div",{className:"abstract-result__related-paragraph__title"},Object(oe.c)(e=>e.paperDetail.abstract.highlight.paragraphLabel)),h.createElement("div",{className:"abstract-result__related-paragraph__text"},this.truncateContent(e)),t&&h.createElement(sr.a,{"data-heap-id":"paper-abstract-highlight-related-pdf-link-click",href:t,className:"abstract-result__related-paragraph__pdf-link"},h.createElement("div",{className:"abstract-result__related-paragraph__pdf-link__text"},Object(oe.c)(e=>e.paperDetail.abstract.highlight.pdfLinkLabel),h.createElement(X.a,{icon:"arrow-lite",className:"abstract-result__related-paragraph__pdf-link__arrow",height:"12",width:"12"})))))}render(){return h.createElement(At,{previewBox:this.renderPreviewBox(),onShow:this.handleHover,children:this.props.previewTarget})}}const Va=Object.freeze({RESULT:"result_label",METHOD:"method_label"});function Qa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ya=W.Map({[Va.RESULT]:"key-result__highlight",[Va.METHOD]:"key-method__highlight"});class Wa extends h.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),Qa(this,"getKeyFlag",e=>{const{isTruncated:t}=this.props;return t?e[0].label===Va.METHOD?Object(oe.c)(e=>e.paperDetail.abstract.highlight.keyMethodSingle):Object(oe.c)(e=>e.paperDetail.abstract.highlight.keyResultSingle):null}),this.state={isTruncated:this.props.isTruncated}}componentDidUpdate(e){e.isTruncated!==this.props.isTruncated&&this.updateTruncatedState()}updateTruncatedState(){this.setState({isTruncated:this.props.isTruncated})}renderHighlightedAbstract(e){const{paperDetail:t,offset:r,skipperAbstractData:a,sentenceTypes:n}=this.props;let i=0;const s=[],o=a.sentences.filter(e=>e.label&&n.has(e.label));for(let a=0;a<o.length;++a){const n=o[a],c=n.startIndex-r;let l=n.endIndex-r;if(0==a&&l>e.length&&(l=e.length),0!=c&&(s.push(e.slice(i,c)),c>e.length))return s;if(!(c<e.length&&l<=e.length))return s;{const r=this.getKeyFlag(o);0==a&&r&&s.push(h.createElement("span",{className:"paper-detail__abstract__highlighted__key-highlight",key:a},r));const p=h.createElement("mark",{className:Ya.get(n.label),key:a+.5},e.slice(c,l));s.push(n.paragraph?h.createElement(Ua,{key:a+.75,relatedPages:n.relatedPages,paperDetail:t,content:n.paragraph,previewTarget:p}):p),i=l}}return i<e.length&&s.push(e.slice(i,e.length)),s}renderToggle(){const{isTruncated:e}=this.state,{withEllipsis:t,isBeginningTruncated:r}=this.props,a=e||r?"more":"less",n=O()("text-truncator__abstract__toggle",a),i=e?this.props.extendActionText:this.props.truncateActionText,s=e?this.props.extendAriaLabel:this.props.truncateAriaLabel,o="more"===a?"square-plus":"square-minus",c=h.createElement("a",{className:n,tabIndex:"0",role:"button","aria-label":s,onClick:this.props.onClick,"data-test-id":"text-truncator-toggle"},h.createElement("span",{className:"paper-detail__abstract__toggle__label"},(t||!e||!r)&&i&&h.createElement(X.a,{className:"paper-detail__abstract__toggle__icon",icon:o,height:"12",width:"12"}),i));return t||!e?c:h.createElement("span",null," [",c,"] ")}render(){const{limit:e,text:t,withEllipsis:r}=this.props,a=r?fe.r(t,e):fe.r(t,e,!1),n=this.renderHighlightedAbstract(this.state.isTruncated?a:t),i=O()("text-truncator","abstract__text text--preline");return h.createElement("span",{className:i},n,this.renderToggle())}}Qa(Wa,"defaultProps",{limit:360,isTruncated:!0,isBeginningTruncated:!1,extendActionText:Object(oe.c)(e=>e.textTruncator.default.extendLabel),extendAriaLabel:Object(oe.c)(e=>e.textTruncator.default.extendAriaLabel),truncateActionText:Object(oe.c)(e=>e.textTruncator.default.truncateLabel),truncateAriaLabel:Object(oe.c)(e=>e.textTruncator.default.truncateAriaLabel),withEllipsis:!0,offset:0,sentenceTypes:new Set});var Ga=r(4),Ka=r.n(Ga);function Xa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ja extends h.PureComponent{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),$a(this,"trackAbstractHighlightEvent",e=>{const t=Nt.a.create(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xa(Object(r),!0).forEach((function(t){$a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.context.heapPropsChain,{paperId:this.props.paperDetail.paper.id}));Object(ht.a)(t)}),$a(this,"openFullAbstract",()=>{let{isBeginningTruncated:e}=this.state;this.setState(t=>((e&&t.isTruncated||!e&&!t.isTruncated)&&(e=!e),{isTruncated:!t.isTruncated,isBeginningTruncated:e}))}),$a(this,"onToggleClick",()=>{this.openFullAbstract(),this.state.isTruncated?this.trackAbstractHighlightEvent(ie.a.PaperDetail.Abstract.TOGGLE_CLOSE):this.trackAbstractHighlightEvent(ie.a.PaperDetail.Abstract.TOGGLE_OPEN)}),$a(this,"onBeginningToggleClick",()=>{this.setState(e=>({isBeginningTruncated:!e.isBeginningTruncated}),()=>this.trackAbstractHighlightEvent(ie.a.PaperDetail.Abstract.TOGGLE_BEGINNING))}),$a(this,"onClickMethods",()=>{const{isMethodsHighlighted:e,sentenceTypes:t,isTruncated:r}=this.state;r&&this.openFullAbstract(),e?t.delete(Va.METHOD):t.add(Va.METHOD),this.setState({isMethodsHighlighted:!e,sentenceTypes:new Set(t)},()=>{this.state.isMethodsHighlighted?this.trackAbstractHighlightEvent(ie.a.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_METHODS_ON):this.trackAbstractHighlightEvent(ie.a.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_METHODS_OFF)})}),$a(this,"onClickResults",()=>{const{isResultsHighlighted:e,sentenceTypes:t,isTruncated:r}=this.state;r&&this.openFullAbstract(),e?t.delete(Va.RESULT):t.add(Va.RESULT),this.setState({isResultsHighlighted:!e,sentenceTypes:new Set(t)},()=>{this.state.isResultsHighlighted?this.trackAbstractHighlightEvent(ie.a.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_RESULTS_ON):this.trackAbstractHighlightEvent(ie.a.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_RESULTS_OFF)})}),$a(this,"renderHighlightToggle",e=>{const{isMethodsHighlighted:t,isResultsHighlighted:r}=this.state,a=e.find(e=>e.label===Va.METHOD),n=e.find(e=>e.label===Va.RESULT);return h.createElement("div",{className:"paper-detail__abstract__highlight__toggle"},h.createElement("span",{className:"paper-detail__abstract__highlight__toggle__buttons__label"},h.createElement(X.a,{icon:"highlighter",width:"14",height:"14",className:"paper-detail__abstract__highlight__toggle__buttons__label__icon"}),h.createElement("span",{className:"paper-detail__abstract__highlight__toggle__buttons__label__text"},Object(oe.c)(e=>e.paperDetail.abstract.highlight.highlightToggleLabel))),h.createElement("span",{className:"paper-detail__abstract__highlight__toggle__buttons"},a&&h.createElement(H.default,{className:O()({abstract__highlight__toggle__button:!0,abstract__highlight__toggle__button__method__on:t}),label:Object(oe.c)(e=>e.paperDetail.abstract.highlight.methodsToggleLabel),onClick:this.onClickMethods}),n&&h.createElement(H.default,{className:O()({abstract__highlight__toggle__button:!0,abstract__highlight__toggle__button__result__on:r}),label:Object(oe.c)(e=>e.paperDetail.abstract.highlight.resultsToggleLabel),onClick:this.onClickResults})))});const{paperDetail:n}=this.props,i=n.skipperExperiments.dataFor("paper-abstract-highlight-v2");Ka()(i,"experiment data must be present");const s=i.sentences.find(e=>e.label===Va.RESULT||e.label===Va.METHOD),o=s&&s.label;this.state={skipperAbstractData:i,isTruncated:!0,isBeginningTruncated:!0,sentenceTypes:new Set([o]),isResultsHighlighted:o===Va.RESULT,isMethodsHighlighted:o===Va.METHOD}}render(){const{skipperAbstractData:e,isTruncated:t,isBeginningTruncated:r,sentenceTypes:a}=this.state,{isMobile:n,paperDetail:i}=this.props,s=e.sentences.find(e=>e.label&&a.has(e.label)),o=s?s.startIndex:0,c=!(!o||0==o),l=e.firstSentenceEndIndex,p=n?200:500,u=c?p-l:p;return h.createElement("div",{className:"fresh-paper-detail-page__abstract","data-test-id":"abstract-text"},h.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:"Abstract"}),!t&&this.renderHighlightToggle(e.sentences),h.createElement("div",{className:"paper-detail__abstract__highlighted"},c&&h.createElement(Wa,{disableClickStyle:!0,onClick:this.onBeginningToggleClick,isTruncated:r,isBeginningTruncated:r,skipperAbstractData:e,text:e.abstract.substring(0,o),limit:l,extendActionText:Object(oe.c)(e=>e.paperDetail.abstract.highlight.beginningToggle),truncateActionText:Object(oe.c)(e=>e.paperDetail.abstract.highlight.noToggleExpansion),withEllipsis:!1,paperDetail:i}),h.createElement(Wa,{isTruncated:t,isBeginningTruncated:r,onClick:this.onToggleClick,skipperAbstractData:e,text:e.abstract.substring(o,e.abstract.length),limit:u,offset:o,extendActionText:Object(oe.c)(e=>e.paperDetail.abstract.highlight.toggleExpand),truncateActionText:Object(oe.c)(e=>e.paperDetail.abstract.highlight.toggleCollapse),paperDetail:i,sentenceTypes:a})))}}var Za=r(608),en=r(92),tn=r(481);class rn extends h.PureComponent{handleClick(e,t){const r=this.props.onClick;"function"==typeof r&&r(e,t,this.props.paper.id)}renderAuthorsListItem(){const{authors:e}=this.props.paper;return e.isEmpty()?null:h.createElement(tn.a,{authors:e,onAuthorClick:e=>{this.handleClick("AUTHOR",e)},max:this.props.maxAuthors,shouldLinkToAHP:!this.props.disableAuthorLinks})}render(){return h.createElement("span",{className:"paper-meta","data-test-id":"paper-meta-subhead"},this.renderAuthorsListItem())}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(rn,"contextTypes",{weblabStore:b.a.instanceOf(at.b).isRequired});var an=r(489);function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function on(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class cn extends h.Component{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),on(this,"setNavRef",e=>{this.navRef=e}),on(this,"setPlaceholderRef",e=>{this.placeholderRef=e}),on(this,"setScrollRef",e=>{this.scrollRef=e}),on(this,"onViewportChange",()=>{const e=mt.a.fromDOM(document);this.context.dispatcher.dispatchEventually({actionType:u.a.actions.PAPER_NAV_DOM_DIRTY,viewportRect:e});const t=this.shouldBeAttached(e);null!==t&&t!==this.state.isAttached?this.setState({isAttached:t},()=>{t&&this.updateHorizontalScrollPos()}):this.state.isAttached&&this.updateHorizontalScrollPos()}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(r),!0).forEach((function(t){on(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isAttached:!1,placeholderHeightPx:45,scrollLeftPx:0},this.getStateFromPaperNavStore()),this.context.paperNavStore.registerComponent(this,()=>{this.setState(this.getStateFromPaperNavStore())}),this.onResize=Object(ut.a)(this.onViewportChange,250,{trailing:!0}),this.onScroll=Object(ut.a)(this.onViewportChange,100,{leading:!0,maxWait:100,trailing:!0})}getStateFromPaperNavStore(){const{paperNavStore:e}=this.context;return{isPending:e.isPending(),navItems:e.getSortedNavItems()}}componentDidMount(){Je.a.listenForScroll(this.onScroll),window.addEventListener("resize",this.onResize),this.onViewportChange()}componentWillUnmount(){Je.a.stopListeningForScroll(this.onScroll),window.removeEventListener("resize",this.onResize)}componentDidUpdate(){const e=this.navRef;if(e&&!this.state.isAttached){const t=e.clientHeight;t!==this.state.placeholderHeightPx&&this.setState({placeholderHeightPx:t})}}shouldComponentUpdate(e,t){if(this.state.isAttached!==t.isAttached||this.state.isPending!==t.isPending||this.state.placeholderHeightPx!==t.placeholderHeightPx||this.state.navItems.size!==t.navItems.size)return!0;for(let e=0;e<t.navItems.size;e++){const r=this.state.navItems.get(e),a=t.navItems.get(e);if(r.isActive!==a.isActive||r.isSolitary!==a.isSolitary||r.isProminent!==a.isProminent||r.isContained!==a.isContained||r.isVisible!==a.isVisible||r.id!==a.id||r.label!==a.label)return!0}return!1}shouldBeAttached(e){const t=this.placeholderRef;if(!t)return null;return t.offsetTop<=e.top+64}updateHorizontalScrollPos(){const e=this.scrollRef;if(!e)return;const t=this.state.navItems.filter(e=>e.isProminent).map(e=>e.id).map(t=>e.querySelector('[data-nav-id="'.concat(t,'"]'))).map(e=>e&&e.offsetLeft).first();"number"==typeof t&&(Je.a.hasNativeSmoothScrollSupport()?e.scrollTo({left:t,behavior:"smooth"}):e.scrollLeft=t)}renderNav(){const{navItems:e}=this.state;return h.createElement("nav",{className:"paper-nav__nav",ref:this.setNavRef},h.createElement("div",{className:"paper-nav__scrollable",ref:this.setScrollRef},h.createElement("ul",{className:"paper-nav__nav-list"},e.map(e=>h.createElement("li",{key:e.id,className:O()({"paper-nav__nav-item":!0,"paper-nav__is-active":e.isActive,"paper-nav__is-solitary":e.isSolitary,"paper-nav__is-prominent":e.isProminent,"paper-nav__is-contained":e.isContained,"paper-nav__is-visible":e.isVisible})},h.createElement(an.a,nn({navId:e.id,className:"paper-nav__nav-link"},Object(Ce.a)({id:Te.p,nav:e.id})),h.createElement("span",{className:"paper-nav__nav-label"},e.label)))))))}render(){const{navItems:e,isAttached:t,isPending:r,placeholderHeightPx:a}=this.state;return h.createElement("div",{className:O()({"paper-nav":!0,"paper-nav__is-attached":t,"paper-nav__is-mobile":this.context.envInfo.isMobile,"paper-nav__is-pending":r})},h.createElement("div",{className:"paper-nav__placeholder",ref:this.setPlaceholderRef,style:{minHeight:"".concat(a,"px")}},e.isEmpty()?null:this.renderNav()))}}on(cn,"contextTypes",{dispatcher:b.a.instanceOf(d.a).isRequired,envInfo:b.a.instanceOf(p.a).isRequired,paperNavStore:b.a.instanceOf(et.a).isRequired});class ln extends h.PureComponent{render(){const{type:e,isFiltered:t}=this.props;if("citingPapers"===e&&t)return m.a.createElement("div",{className:"empty-pdp-box"},Y.a.getString("citations.emptyFiltered.text"));const r="citingPapers"===e?Y.a.getString("citations.empty.text"):Y.a.getString("references.empty.text");return m.a.createElement("div",{className:"empty-pdp-box"},r)}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ln,"propTypes",{type:b.a.string.isRequired,isFiltered:b.a.boolean});class pn extends X.a{}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(pn,"defaultProps",{icon:"help",width:"15",height:"15",className:"fill--gray"});var un=r(616),dn=r(474);function hn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class mn extends h.PureComponent{onChangeFilter(e){const t="string"==typeof e?e:e.target.value;this.props.onChangeFilter&&this.props.onChangeFilter(t);const r=this.context.analyticsLocation;if(r){const e=ie.a.getIn(r,"FILTER_BY");Object(ht.a)(un.a.create(e,{filter:t,heapId:Te.g}))}else Object(ht.a)(un.a.create(ie.a.FILTER_BY,{filter:t,heapId:Te.g}))}renderOptions(){return m.a.createElement("select",{className:"legacy__select",onChange:this.onChangeFilter.bind(this),value:this.props.intent,"data-test-id":"intent-filter-select"},this.props.options.map(e=>m.a.createElement("option",{value:e.id,key:e.id},Y.a.getString("filter.".concat(e.id,".label")))))}render(){const{className:e,labelText:t}=this.props,r=O()(e,"search-control-button select--no-styles--no-flex"),a=this.context.envInfo.isMobile?t:m.a.createElement(dn.a,{className:"flex-row-vcenter",tooltipPosition:"bottom-left",tooltipContent:m.a.createElement(we.a,{content:e=>e.citations.intents.tooltip})},t,m.a.createElement(pn,{className:"fill--gray",height:"12",width:"12"}));return m.a.createElement("div",{className:r},m.a.createElement("label",{className:"search-control-button-label"},a),this.renderOptions())}}hn(mn,"propTypes",{className:b.a.string,intent:b.a.string,labelText:b.a.string,onChangeFilter:b.a.func,options:b.a.instanceOf(G.a.List).isRequired}),hn(mn,"contextTypes",{analyticsLocation:b.a.object,envInfo:b.a.instanceOf(p.a).isRequired}),hn(mn,"defaultProps",{labelText:"Citation Type:"});var fn=r(623),bn=r(624),gn=r(579);r(42);function yn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class En extends h.PureComponent{constructor(){super(...arguments),yn(this,"onChangeSort",e=>{const t="string"==typeof e?e:e.target.value;this.props.onChangeSort&&this.props.onChangeSort(t);const r=this.context.analyticsLocation;if(r){const e=ie.a.getIn(r,"SORT_BY");Object(ht.a)(gn.a.create(e,{sort:t}))}else Object(ht.a)(gn.a.create(ie.a.SORT_BY,{sort:t}))})}renderOptions(){return h.createElement("select",{className:"legacy__select search-sort-select",onChange:this.onChangeSort,value:this.props.sort,"data-test-id":"sort-select"},this.props.options.map(e=>h.createElement("option",{value:e.id,key:e.id},Y.a.getString("sort.".concat(e.id,".label")))))}renderTabs(){const e=this.props.options.map(e=>h.createElement(fn.a,{key:e.id,isActive:e.id===this.props.sort},h.createElement(Zt.a,{iconProps:{icon:e.icon,width:"15",height:"15"},text:Y.a.getString("sort.".concat(e.id,".label")),onClick:this.onChangeSort.bind(this,e.id),style:{border:"none"},testId:"sort-by-".concat(e.id)})));return h.createElement(bn.a,null,e.toArray())}render(){const{className:e,displayType:t,labelText:r}=this.props,a=O()(e,"search-sort flex-row-vcenter author-publications-list-sorts");return h.createElement("div",{className:a},h.createElement("label",{className:"search-sort-label"},r),"tabs"===t?this.renderTabs():this.renderOptions())}}function On(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}yn(En,"contextTypes",{analyticsLocation:b.a.object}),yn(En,"defaultProps",{displayType:"select",labelText:"Sort by:"});class vn extends h.PureComponent{onChangeSort(e){const t="string"==typeof e?e:e.target.value;this.props.onChangeSort&&this.props.onChangeSort(t);const r=this.context.analyticsLocation;if(r){const e=ie.a.getIn(r,"SORT_BY");Object(ht.a)(gn.a.create(e,{sort:t}))}else Object(ht.a)(gn.a.create(ie.a.SORT_BY,{sort:t}))}renderOptions(){return m.a.createElement("select",{className:"legacy__select",onChange:this.onChangeSort.bind(this),value:this.props.sort,"data-test-id":"sort-select"},this.props.options.map(e=>m.a.createElement("option",{value:e.id,key:e.id},Y.a.getString("sort.".concat(e.id,".label")))))}render(){const{className:e,labelText:t}=this.props,r=O()(e,"search-control-button select--no-styles--no-flex author-publications-list-sorts");return m.a.createElement("div",{className:r},m.a.createElement("label",{className:"search-control-button-label"},t),this.renderOptions())}}function _n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}On(vn,"propTypes",{className:b.a.string,sort:b.a.string,labelText:b.a.string,onChangeSort:b.a.func,options:b.a.instanceOf(G.a.List).isRequired}),On(vn,"contextTypes",{analyticsLocation:b.a.object}),On(vn,"defaultProps",{labelText:"Sort by:"});class Sn extends h.PureComponent{constructor(){super(...arguments),_n(this,"getQueryParametersForType",e=>{if("citingPapers"===e){return this.context.citationQueryStore.getQuery().toQueryString()}const t=this.context.paperStore.getPaperDetail().get(e),r=V.c.CITATIONS_PAGE_SIZE,a={};a[e+"Sort"]=t.get("sort"),a[e+"Limit"]=r,a[e+"Offset"]=(t.pageNumber-1)*r;const n=t.get("citationIntent");return"citingPapers"===e&&n&&n!==V.c.INTENTS.ALL_INTENTS.id&&(a.citationIntent=n),"citingPapers"===e&&t.yearFilter&&(a.year=[t.yearFilter.get("min"),t.yearFilter.get("max")]),a}),_n(this,"getQueryParametersForAll",()=>Or()(this.getQueryParametersForType("citingPapers"),this.getQueryParametersForType("citedPapers"))),_n(this,"updateQuery",e=>{const t={paperId:this.context.paperStore.getPaperDetail().paper.id,slug:this.context.paperStore.getPaperDetail().paper.slug},{history:r}=this.context;r.push(Object(Le.e)({routeName:"PAPER_DETAIL",params:t,query:e}))}),_n(this,"onChangeSort",e=>{const t=this.getQueryParametersForAll();t["".concat(this.props.citationType,"Sort")]=e,this.updateQuery(t)}),_n(this,"onChangeIntentFilter",e=>{const t=this.getQueryParametersForAll();e&&e!==V.c.INTENTS.ALL_INTENTS.id?t.citationIntent=e:delete t.citationIntent,this.updateQuery(t)}),_n(this,"renderListLabel",()=>{const{citationPage:{citationType:e,loading:t,pageNumber:r,totalCitations:a,citationIntent:n,yearFilter:i},citationCoverage:s,showSummary:o}=this.props,l=i&&i.get("min")&&0!==i.get("min")||i&&i.get("max")&&0!==i.get("max")||n&&"all"!==n&&"citingPapers"===e;if(!o)return null;const p=l?fe.n(a,Y.a.getString("citations.list.label.filtered.".concat(e)),Y.a.getString("citations.list.label.filtered.".concat(e,"Plural"))):fe.n(a,Y.a.getString("citations.list.label.".concat(e)),Y.a.getString("citations.list.label.".concat(e,"Plural"))),u=(r-1)*V.c.CITATIONS_PAGE_SIZE+1,d=Math.min(r*V.c.CITATIONS_PAGE_SIZE,a),m=Y.a.getString("citations.list.range",u,d,p),f=s&&!l?Y.a.getString("citations.list.coverageEstimate",m,s):m,b=!s||l||this.context.envInfo.isMobile?f:h.createElement(dn.a,{className:"flex-row-vcenter",tooltipContent:Y.a.getString("citations.list.tooltip",s)},f,h.createElement(pn,{className:"fill--gray",height:"12",width:"12"}));return t?h.createElement("div",{className:"citation-list__label"},h.createElement("span",null,h.createElement(c.a,null)," Loading"," ")):h.createElement("div",{className:"citation-list__label","data-test-id":"citation-list-header"},b)})}render(){const{allowRelevanceSort:e,showSummary:t,citationPage:{citationIntent:r}}=this.props,a=this.context.envInfo.isMobile,n="citingPapers"===this.props.citationType,i=r&&"all"!==r,s=a?"controls-split":"controls-right",o=a?"controls-full":"controls-right",c=a||n?null:"select--no-styles--inline",l=e?ge.a.citationsWithRelevance():ge.a.citations(),p=this.props.totalPages>1?h.createElement("div",{className:n?s:o},h.createElement(vn,{onChangeSort:this.onChangeSort,options:l,sort:this.props.sort,labelText:Y.a.getString("citations.list.sortByLabel"),className:c})):null,u=n&&(this.props.totalPages>1||i)?h.createElement("div",{className:a?"controls-split":"controls-left"},h.createElement(mn,{onChangeFilter:this.onChangeIntentFilter,options:V.c.getIntents(),intent:r,labelText:Y.a.getString("citations.list.filterByIntentLabel")})):null;if(n&&!a){const e=t?"controls":"controls__no-line";return h.createElement("div",null,h.createElement("div",{className:e},u,p),t&&this.props.citationPage.totalCitations>1?this.renderListLabel():null)}if(a)return t?h.createElement("div",null,this.props.citationPage.totalCitations>1?this.renderListLabel():null):h.createElement("div",null,h.createElement("div",{className:"controls__no-line"},u,p));if(!n&&!a){const e=t?"controls":"controls__no-line";return h.createElement("div",{className:e},t&&this.props.citationPage.totalCitations>1?this.renderListLabel():null,p)}return h.createElement("div",{className:"controls"},this.props.citationPage.totalCitations>1&&this.renderListLabel(),this.props.totalPages>1&&h.createElement("div",{className:a?"":"controls-right"},h.createElement(En,{onChangeSort:this.onChangeSort,options:l,sort:this.props.sort,labelText:Y.a.getString("citations.list.sortByLabel")})))}}function Pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function wn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}_n(Sn,"contextTypes",{citationQueryStore:b.a.instanceOf(ne.a).isRequired,envInfo:b.a.instanceOf(p.a).isRequired,history:b.a.instanceOf(ce.a).isRequired,paperStore:b.a.object.isRequired,weblabStore:b.a.instanceOf(at.b).isRequired});const xn=Object(tt.c)("simpleCitationsList");class Cn extends h.PureComponent{constructor(){super(...arguments),wn(this,"getCitations",()=>this.context.weblabStore.isFeatureEnabled(Ze.b.CitationsSwap)&&this.state.swappedCitations?this.state.swappedCitations:this.props.citationPage.citations),wn(this,"navigateToCitationPage",e=>{const{citationQueryStore:t,paperStore:r,history:a}=this.context,n=this.props.citationPage.citationType;Object(er.a)({citationType:n,pageNumber:e,citationQueryStore:t,paperStore:r,history:a}),this.props.shouldScrollOnPaginate&&this.scrollOnPaginate(this.props.cardId)}),wn(this,"scrollOnPaginate",e=>{const t=this.context.paperNavStore.getNavTarget(e);t?Je.a.smoothScrollTo(t,()=>{}):xn("Failed to scroll on paginate, getNavTarget did not find target for ".concat(e))}),wn(this,"trackClickCitationLink",e=>{const{paper:t,citationPage:r}=this.props,{citationType:a,pageNumber:n,sort:i}=r,s=this.getCitations(),o=this.context.weblabStore.isFeatureEnabled(Ze.b.CitationsSwap)?this.state.swapIndex:null;Object(rt.d)({paperId:t.id,section:"citingPapers"===a?rt.a:rt.b,sortOrder:i,page:n,paperList:s,clickedPaper:e,swapPosition:o})}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(r),!0).forEach((function(t){wn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.buildStateFromProps(this.props))}componentWillReceiveProps(e){e.citationPage.equals(this.props.citationPage)||this.setState(this.buildStateFromProps(e))}buildStateFromProps(e){const t=e.citationPage.sort,r=e.citationPage.citations,a=r.size,n=Math.floor(Math.random()*Math.min(10,a));if(r.isEmpty())return{swapIndex:n,citations:r};if(t===ge.a.YEAR.id&&r.get(0).year!==r.get(n).year)return{swapIndex:0,swappedCitations:r};const i=r.withMutations(e=>{const t=e.get(n);return e.set(n,e.get(0)).set(0,t)});return{swapIndex:n,swappedCitations:i}}renderCitationsListWithIntents(){const{paper:e,citationPage:t}=this.props,{citationType:r}=t,a=this.getCitations();return a.isEmpty()?null:h.createElement("div",{className:"citation-list__citations"},a.map((t,a)=>{const n=De.a.fromCitation(t);return h.createElement(Be.c,{key:t.id+a,paper:n,eventData:{parentPaper:e,index:a},onClickTitle:!1},h.createElement(Ke.a,null,h.createElement(Ye.default,{paper:n,className:"citation-list__paper-row",title:h.createElement(We.default,{paper:n,onClick:()=>this.trackClickCitationLink(t),testId:"citation-paper-title",heapProps:{id:Te.i,"paper-id":t.id,"citation-type":r,"has-intents":t.citationContexts.size>0}}),meta:h.createElement(Qe.default,{paper:n,authors:!n.authors.isEmpty()&&h.createElement(He.default,{paper:n,heapProps:{id:Te.d}})}),controls:h.createElement(Ve.default,{paper:n,stats:t.numCitedBy>0&&h.createElement(Ae,{citation:t,citationType:r,citedPaperTitle:e.title}),flags:h.createElement(xe.default,{citation:t,citationType:r,citedPaperTitle:e.title,shouldRenderIntents:!0,className:"cl-paper-controls__flags"})}),abstract:h.createElement(nt.a,{paper:n})})),h.createElement(Xe.a,null,h.createElement(ze.default,{paper:n,title:h.createElement(We.default,{paper:n,onClick:()=>this.trackClickCitationLink(t),testId:"citation-paper-title",heapProps:{id:Te.i,"paper-id":t.id,"citation-type":r,"has-intents":t.citationContexts.size>0}}),meta:h.createElement(Qe.default,{paper:n,shouldStackMeta:!0,authors:!n.authors.isEmpty()&&h.createElement(He.default,{paper:n,heapProps:{id:Te.d}})}),controls:t.numCitedBy>0&&h.createElement(Ve.default,{paper:n,actions:!1,stats:h.createElement(Ae,{citation:t,citationType:r,citedPaperTitle:e.title})}),className:"citation-list__paper-card",header:h.createElement(xe.default,{citation:t,citationType:r,citedPaperTitle:e.title,shouldRenderIntents:!0}),footer:h.createElement(Ue.a,{paper:n}),abstract:h.createElement(nt.a,{paper:n,className:"tldr__paper-card"})})))}))}renderEmptyMessage(){const{citationType:e,citationIntent:t,yearFilter:r}=this.props.citationPage,a=t&&"all"!==t||r&&r.get("min")&&0!==r.get("min")||r&&r.get("max")&&0!==r.get("max");return h.createElement(ln,{type:e,isFiltered:a})}render(){const e=this.context.envInfo.isMobile,{citationPage:t}=this.props,r=t.loading,a=t.totalPages>1?h.createElement("div",{className:"citation-pagination flex-row-vcenter"},r?h.createElement("span",{className:"flex-row-vcenter citation-loading"},h.createElement(c.a,null)," Loading"):null,h.createElement(qe.default,{size:e?qe.SIZE.LARGE:qe.SIZE.DEFAULT,maxVisiblePageButtons:e?4:5,pageNumber:this.props.citationPage.pageNumber,onPaginate:this.navigateToCitationPage,totalPages:Math.min(V.c.MAX_CITATION_PAGES,t.totalPages)})):null,n=this.props.citationPage.totalCitations>0?this.renderCitationsListWithIntents():this.renderEmptyMessage(),i=h.createElement(Sn,{allowRelevanceSort:this.props.allowRelevanceSort,paper:this.props.paper,citationCoverage:this.props.citationCoverage,citationPage:this.props.citationPage,keyTotal:this.props.keyTotal,sort:t.sort,totalPages:t.totalPages,citationType:t.citationType,useButtons:!e,showSummary:!0});return h.createElement("div",{className:"paper-detail-content-card","data-test-id":"citingPapers"===t.citationType?"cited-by":"reference"},i,n,a)}}wn(Cn,"contextTypes",{api:b.a.instanceOf($e.a).isRequired,citationQueryStore:b.a.instanceOf(ne.a).isRequired,envInfo:b.a.instanceOf(p.a).isRequired,history:b.a.instanceOf(ce.a).isRequired,paperNavStore:b.a.instanceOf(et.a).isRequired,paperStore:b.a.instanceOf(er.b).isRequired,weblabStore:b.a.instanceOf(at.b).isRequired});var Tn=Object(it.b)(ie.a.PaperDetail.References)(Cn),Nn=r(577);function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function In(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class kn extends h.PureComponent{constructor(){super(...arguments),In(this,"state",{isToggleOpen:!1}),In(this,"toggleIcon",()=>{const e=!this.state.isToggleOpen;this.setState({isToggleOpen:e})})}render(){const{children:e,icon:t,isMobile:r,mobileToggle:a,title:n}=this.props;let i;if(r&&a){const e=this.state.isToggleOpen;i={icon:e?"x":t,className:e?"paper-card__stats-item toggle-open":"paper-card__stats-item",isCollapsible:!0,startsOpen:!0,onToggle:this.toggleIcon}}else i={className:"paper-card__stats-item"};return h.createElement(Nn.a,jn({title:n?n.toUpperCase():null},i),e)}}function Dn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Rn extends h.PureComponent{static getTabLabel(e){var t;const r=(null!=(t=e)&&null!=(t=t.paperDetail)&&null!=(t=t.citedPapers)?t.totalCitations:t)||0;return Object(oe.c)(e=>e.paperDetail.tabLabels.referencedPapers,r.toLocaleString())}static hasContent(e){var t;return((null!=(t=e)&&null!=(t=t.paperDetail)&&null!=(t=t.citedPapers)?t.totalCitations:t)||0)>0}render(){var e;const{isMobile:t}=this.context.envInfo,{paper:r,paper:{citationStats:{numViewableReferences:a,numKeyReferences:n}},citedPapers:i,citationSortAvailability:s}=this.props.paperDetail,o=this.constructor.getTabLabel(this.props),c=(null!=(e=s)?e.citedPapers:e)&&s.citedPapers.includes(ge.a.RELEVANCE.id);return t?h.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:Object(oe.c)(e=>e.paperDetail.sectionTitles.referencedPapers)},h.createElement(D,{cardId:Rn.CARD_ID,navLabel:o,className:"references"},h.createElement(L,{title:Object(oe.c)(e=>e.paperDetail.sectionTitles.referencedPapers)}),h.createElement(A,{willChildrenOwnLayout:!0},h.createElement(M,null,h.createElement(Tn,{allowRelevanceSort:c,shouldScrollOnPaginate:!0,cardId:Rn.CARD_ID,name:"citedPapers",paper:r,citationPage:i,citationTotal:a,keyTotal:n})),h.createElement(F,null,h.createElement("div",{className:"card-callout__flush-top card-callout__mobile"},h.createElement("div",{className:"paper-detail__card__filter-block"},h.createElement(kn,null,h.createElement(Sn,{allowRelevanceSort:c,cardId:Rn.CARD_ID,shouldScrollOnPaginate:!0,paper:r,citationPage:i,sort:i.sort,totalPages:i.totalPages,citationType:i.citationType,useButtons:!0,showSummary:!1})))))))):h.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:Object(oe.c)(e=>e.paperDetail.sectionTitles.referencedPapers)},h.createElement(D,{cardId:Rn.CARD_ID,navLabel:o,className:"references"},h.createElement(L,{title:Object(oe.c)(e=>e.paperDetail.sectionTitles.referencedPapers)}),h.createElement(A,null,h.createElement(Tn,{allowRelevanceSort:c,shouldScrollOnPaginate:!0,cardId:Rn.CARD_ID,name:"citedPapers",paper:r,citationPage:i,citationTotal:a,keyTotal:n}))))}}Dn(Rn,"CARD_ID","references"),Dn(Rn,"contextTypes",{envInfo:b.a.instanceOf(p.a).isRequired,weblabStore:b.a.instanceOf(at.b).isRequired});class Ln extends h.PureComponent{render(){return this.props.children}}var An=r(20);function Fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Mn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class qn extends h.PureComponent{componentDidMount(){const e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(r),!0).forEach((function(t){Mn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.context.heapPropsChain||{},{},{experiment:this.props.experiment.KEY,impressedAs:this.props.impressedAs}),t=cr.a.create("experiment-impression",e);Object(lr.a)([t])}render(){return h.createElement(o.a,{heapProps:{"research-experiment":this.props.experiment.KEY,"research-experiment-impressed-as":this.props.impressedAs}},this.props.children)}}Mn(qn,"contextTypes",{heapPropsChain:b.a.object});var Bn=r(878),Hn=r.n(Bn);function zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Un(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Vn=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(r),!0).forEach((function(t){Un(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Re.b.ChildContextTypes,{heapProps:b.a.object,heapPropsChain:b.a.object,private:b.a.object,router:b.a.object});class Qn extends m.a.PureComponent{getChildContext(){return this.props.context}render(){return this.props.children}}Un(Qn,"childContextTypes",Vn);class Yn extends m.a.PureComponent{constructor(e,t){super(e,t),this.state={elementToRender:this.props.children}}componentWillReceiveProps(e){this.setState({elementToRender:e.children})}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t),this.setState({elementToRender:this.props.fallback})}render(){if(Object(jt.a)())return m.a.createElement("div",{key:"ssr-boundary"},this.state.elementToRender);try{const e=Hn.a.renderToStaticMarkup(m.a.createElement(Qn,{context:this.context},m.a.createElement(Re.a.Provider,{value:this.context},this.props.children)));return m.a.createElement("div",{key:"ssr-boundary",dangerouslySetInnerHTML:{__html:e}})}catch(e){return Object(tt.a)("serversideerrorboundary.fallback","Error during render, falling back. Cause: [message=".concat(e.message,"]"),e),m.a.createElement("div",{key:"ssr-boundary"},this.props.fallback)}}}function Wn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Gn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Un(Yn,"contextTypes",Vn);class Kn extends h.PureComponent{constructor(e,t){super(e,t),Gn(this,"onCatch",(e,t)=>{const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(r),!0).forEach((function(t){Gn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{experimentKey:this.props.experiment.KEY,variationName:this.state.isEligible?this.context.weblabStore.getVariation(this.props.experiment.KEY):"fallback"});Object(An.a)().logNamedError("error.skipper.render",e,r)});const r=!e.eligibilityTest||e.eligibilityTest();r&&t.weblabStore.expose(e.experiment.KEY),this.state={isEligible:r},this.onCatch=this.onCatch.bind(this)}renderVariationWithImpression(e){const{children:t,variation:r}=e.props;return h.createElement(Ea,{variation:r,key:r},h.createElement(qn,{experiment:this.props.experiment,impressedAs:r},Xn(t)))}renderFallbackWithImpression(e){var t;return h.createElement(Ln,null,h.createElement(qn,{experiment:this.props.experiment,impressedAs:"fallback"},Xn(null!=(t=e)&&null!=(t=t.props)?t.children:t)))}renderIneligible(){var e;const t=h.Children.toArray(this.props.children).find(e=>e.type===ya)||null;return h.createElement(qn,{experiment:this.props.experiment,impressedAs:"ineligible"},Xn(null!=(e=t)&&null!=(e=e.props)?e.children:e))}getFallbackAndVariations(){const e=h.Children.toArray(this.props.children);let t=null;const r=[];return e.forEach(e=>{e.type===Ln?t=e:(r.push(e),t||e.type!==ya||(t=e))}),{fallback:t,variations:r}}renderExperiment(){const{fallback:e,variations:t}=this.getFallbackAndVariations(),r=this.renderFallbackWithImpression(e);return h.createElement(Yn,{fallback:r,onCatch:this.onCatch},h.createElement(Oa,{experiment:this.props.experiment},t.map(e=>this.renderVariationWithImpression(e))))}render(){return this.state.isEligible?this.renderExperiment():this.renderIneligible()}}function Xn(e){return e?"function"==typeof e?e():e:null}Gn(Kn,"contextTypes",{weblabStore:b.a.instanceOf(at.b).isRequired});var $n=r(385),Jn=r(659);function Zn(e){let{paperDetail:t}=e;const r=t.paper.authors.map(e=>e.alias),{envInfo:a}=Object(Re.c)();return h.createElement("div",{className:O()({"pdp-author-claim":!0,"pdp-author-claim--is-mobile":a.isMobile})},h.createElement("div",{className:"pdp-author-claim__headline"},Object(oe.c)(e=>e.paperDetail.authorClaim.headline)),h.createElement("ul",{className:"pdp-author-claim__author-list"},r.map(e=>{const t=e.canonicalId();return t?h.createElement("li",{id:t,className:"pdp-author-claim__author-list-item"},e.isClaimed()?h.createElement($n.default,{className:"pdp-author-claim__claimed-author",icon:h.createElement(Jn.a,{sizePx:12}),label:e.name}):h.createElement(It.a,{to:"AUTHOR_CLAIM",params:{authorId:t,slug:e.slug},className:"pdp-author-claim__claim-link"},h.createElement(H.default,{className:"pdp-author-claim__author-button",label:e.name}))):null})))}var ei=r(593);function ti(e){let{childList:t,heapId:r}=e;return h.createElement("ul",{className:"flex-row-vcenter paper-meta","data-heap-id":r},t&&t.map((e,t)=>e&&h.createElement("li",{className:"paper-meta-item",key:t},e)))}var ri=r(543);function ai(e){let{promotionKey:t,delayTriggerMs:r}=e;const{promotionBannerEngine:a,paperStore:n}=Object(Re.c)(),i=n.getPaperDetail();return Object(h.useEffect)(()=>{const e=setTimeout(()=>a.tryInvoke(t,i.paper),r);return()=>clearTimeout(e)},[i.paper]),null}function ni(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ii(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class si extends h.PureComponent{constructor(){super(...arguments),ii(this,"onClickDeepLink",()=>{const{citationQueryStore:e,router:t,history:r}=this.context,{citationIntent:a}=this.props,{query:n}=this.state,i=a===V.c.ALL?ge.a.IS_INFLUENTIAL_CITATION.id:ge.a.RELEVANCE.id;be.a.changeRouteForPartialQuery(e.getIndependentQuery(),n.set("citationIntent",a).set("sort",i),r,t)}),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(r),!0).forEach((function(t){ii(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ni(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromCitationQueryStore()),this.context.citationQueryStore.registerComponent(this,()=>{this.setState(this.getStateFromCitationQueryStore())})}getStateFromCitationQueryStore(){return{query:this.context.citationQueryStore.getQuery(),queryText:this.context.citationQueryStore.getQuery().queryString||"",queryResponse:this.context.citationQueryStore.getQueryResponse(),statsResponse:this.context.citationQueryStore.getAggregationResponse(),isLoading:this.context.citationQueryStore.isLoading(),isFiltering:this.context.citationQueryStore.isFiltering(),isAggsLoading:this.context.citationQueryStore.isAggsLoading()}}render(){const{title:e,intentCount:t,isKeyCitationType:r,navId:a}=this.props,n=r?"scorecard-citation__key-title":"scorecard-citation__title";return h.createElement("div",{className:"scorecard-citation__metadata"},h.createElement("div",{className:"scorecard-citation__metadata__stat"},h.createElement(an.a,{navId:a,onClick:this.onClickDeepLink},h.createElement("div",{className:n},e)),h.createElement("span",null,r&&h.createElement(It.a,{to:"FAQ",hash:"influential-citations"},h.createElement(X.a,{icon:"information",className:"scorecard-citation__influential-citations-info"})))),h.createElement("div",{className:"scorecard-citation__metadata-item"},t.toLocaleString()))}}function oi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ci(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ii(si,"contextTypes",{citationQueryStore:b.a.instanceOf(ne.a).isRequired,history:b.a.instanceOf(ce.a).isRequired,router:b.a.object.isRequired});class li extends h.PureComponent{constructor(){super(...arguments),this.onClick=this.onClick.bind(this)}onClick(){const{onClick:e}=this.props;e&&e()}render(){const{headline:e,description:t,tooltip:r,background:a,type:n}=this.props,i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(r),!0).forEach((function(t){ci(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:O()({scorecard__stat:!0,["scorecard__".concat(n)]:!0})},Object(Ce.a)({id:Te.t,type:n}),{"data-test-id":"scorecard-"+n,onClick:this.onClick});return h.createElement("div",i,a&&h.createElement("div",{className:"scorecard__background"},a),h.createElement("div",{className:"scorecard-stat__body","data-test-id":"scorecard-body"},e&&h.createElement("span",{className:"scorecard-stat__headline"},e),r&&h.createElement("div",{className:"scorecard-stat__tooltip"},r),t&&h.createElement("div",{className:"scorecard__description"},t)))}}var pi=r(191);function ui(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function di(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const hi=e=>Object(pi.b)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(r),!0).forEach((function(t){di(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ui(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:"pdp_citing_scorecard_item"},e));function mi(){return(mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}class fi extends h.PureComponent{constructor(){super(...arguments),this.state={navId:Ot.CARD_ID}}componentDidMount(){const{stat:{typeKey:e}}=this.props;Object(ht.a)(cr.a.create(ie.a.PaperDetail.SCORECARD_IMPRESSION,{scorecardType:e}))}renderHeadline(){var e;const t=(null!=(e=this.props.paperDetail)&&null!=(e=e.paper)&&null!=(e=e.citationStats)?e.numCitations:e)||0;return h.createElement(h.Fragment,null,h.createElement("span",{className:"scorecard-stat__headline__dark"},Object(oe.c)(e=>e.paperDetail.scorecard.citedBy.headline,Object(fe.f)(t))))}renderKeyCitation(){const e=this.props.stat.keyCitationCount,t=Object(oe.c)(e=>e.paperDetail.scorecard.highlyInfluential.title);return h.createElement(si,{title:t,intentCount:e,isKeyCitationType:!0,navId:this.state.navId,citationIntent:V.c.ALL})}renderCitationIntents(){const e=this.props.stat.citationIntentCount,t=e=>e>0;return h.createElement("div",{className:"scorecard-citation"},t(e.background)&&h.createElement(si,{title:Object(oe.c)(e=>e.paperDetail.scorecard.citationIntent.background),intentCount:e.background,navId:this.state.navId,citationIntent:V.c.BACKGROUND}),t(e.methodology)&&h.createElement(si,{title:Object(oe.c)(e=>e.paperDetail.scorecard.citationIntent.methodology),intentCount:e.methodology,navId:this.state.navId,citationIntent:V.c.METHODOLOGY}),t(e.result)&&h.createElement(si,{title:Object(oe.c)(e=>e.paperDetail.scorecard.citationIntent.result),intentCount:e.result,navId:this.state.navId,citationIntent:V.c.RESULT}))}renderDescription(){const e=this.props.stat.keyCitationCount>0;return h.createElement(h.Fragment,null,e&&this.renderKeyCitation(),this.renderCitationIntents(),this.renderCitationPageButton())}renderCitationPageButton(){return h.createElement(an.a,{className:"scorecard-stat__headline__view-all",navId:"citing-papers"},h.createElement(H.default,mi({className:"scorecard-stat__headline__view-all_btn",type:H.TYPE.SECONDARY,size:H.SIZE.DEFAULT,label:Object(oe.c)(e=>e.paperDetail.scorecard.highlyInfluential.viewAll)},hi({key:"view_all"}))))}render(){return h.createElement(li,{type:"citation-intent",headline:this.renderHeadline(),description:this.renderDescription()})}}function bi(){return(bi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function gi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function yi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(r),!0).forEach((function(t){Ei(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ei(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Oi extends h.Component{constructor(){super(...arguments),this.state=yi({},this.getStateFromWeblabStore()),this.context.weblabStore.registerComponent(this,()=>{this.setState(yi({},this.getStateFromWeblabStore()))})}getStateFromWeblabStore(){return{isHighlyInfluentialCitationsEnabled:this.context.weblabStore.isFeatureEnabled(Ze.b.HighlyInfluentialCitationsScorecard)}}renderStat(e){const{isHighlyInfluentialCitationsEnabled:t}=this.state,{numCitations:r}=this.props.paperDetail.paper.citationStats;return t&&e.typeKey===Q.a&&r>0?h.createElement(fi,bi({stat:e},this.props)):null}render(){const{paperDetail:{paper:{scorecardStats:e}}}=this.props;return!e||e.isEmpty()?null:h.createElement("div",{className:"scorecard"},h.createElement("div",{className:"scorecard_container"},e.map((e,t)=>{const r=this.renderStat(e);return null===r?null:h.createElement(Rt.a,{key:"".concat(e.typeKey,"-").concat(t),className:"scorecard__item"},r)})))}}Ei(Oi,"contextTypes",{weblabStore:b.a.instanceOf(at.b).isRequired});var vi=r(578),_i=r(534);class Si extends h.PureComponent{render(){const{isMobile:e}=this.context.envInfo,{paperDetail:t}=this.props;return h.createElement(y,{id:"related-papers",navLabel:Object(oe.c)(e=>e.paperDetail.tabLabels.similarPapers),className:O()("similar-papers",{"similar-papers--mobile":e})},h.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:Object(oe.c)(e=>e.paperDetail.sectionTitles.similarPapers)},h.createElement("h4",{className:"card-header-title__carousel"},Object(oe.c)(e=>e.paperDetail.sectionTitles.similarPapers)),h.createElement(_i.a,{paperDetail:t})))}}!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Si,"contextTypes",{envInfo:b.a.instanceOf(p.a).isRequired});var Pi=Object(it.b)(ie.a.PaperDetail.RelatedPapers)(Si),wi=r(569),xi=r(30),Ci=r(502),Ti=r(53),Ni=r.n(Ti);function ji(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ii extends h.PureComponent{constructor(){super(...arguments),this.state=this.getStateFromWeblabStore(),this.context.weblabStore.registerComponent(this,()=>{this.setState(this.getStateFromWeblabStore())}),this.trackMetadataClick=this.trackMetadataClick.bind(this),this.trackActionClick=this.trackActionClick.bind(this)}getStateFromWeblabStore(){const e=this.context.weblabStore.getVariation(Pa.b.ABTestMock.KEY);if(this.state&&e===this.state.mockVariation)return{};let t=1;/^test_\d+$/.test(e)&&(t=parseFloat(e.replace("test_",""))/100);return{heapGroup:Math.random()<=t?e:null,mockVariation:e}}getRelatedPapersQuery(e){const{paper:{entities:t}}=e;return t.isEmpty()?null:t.first().name}trackMetadataClick(e,t){const r=this.props.paperDetail.paper.id,a=ie.a.getIn(ie.a.PaperDetail.Header,e);Object(ht.a)(Nt.a.create(a,{paperId:r,clickedEntityId:t}))}trackActionClick(e,t){const r=this.props.paperDetail.paper.id,a=ie.a.getIn(ie.a.PaperDetail.Header,"Action",e),n=Or.a.recursive(t,{paperId:r});Object(ht.a)(Nt.a.create(a,n))}renderAuthorList(){const{paper:e}=this.props.paperDetail;return m.a.createElement(rn,{paper:e,onClick:this.trackMetadataClick,isFreshPDP:!0,maxAuthors:3})}renderVenueAndYearListItem(){var e;const{paper:t}=this.props.paperDetail,{pubDate:r,year:a,venue:n}=t,i=!!!(null!=(e=t)&&null!=(e=e.journal)?e.name:e)&&n&&"string"==typeof n.text&&n.text.length>0,s=Object(fe.k)(a),o=Object(fe.j)(r),c=s|o;let l,p;if(i&&c?l=m.a.createElement(ri.a,{paper:t,stripYear:!0,textLength:30}):i&&!c&&(l=m.a.createElement(ri.a,{paper:t,stripYear:!1,textLength:30})),p=o?m.a.createElement(Ur.c,{field:r}):a&&"string"==typeof a.text?m.a.createElement(Ur.c,{field:a}):a,c||i)return m.a.createElement("span",{key:"year-and-venue","data-test-id":"year-and-venue"},Object(oe.c)(e=>e.paper.meta.published),i?" in ":null,i?m.a.createElement("span",{"data-test-id":"venue-metadata"},l):null,c?" ":null,c?m.a.createElement("span",{"data-test-id":"paper-year"},p):null)}renderFieldOfStudy(){const{paper:e}=this.props.paperDetail;return e.fieldsOfStudy&&e.fieldsOfStudy.size?m.a.createElement(ei.a,{paper:e,"data-heap-id":"paper-meta-fos"}):null}renderJournal(){var e;const{paper:t}=this.props.paperDetail;return(null!=(e=t)&&null!=(e=e.journal)?e.name:e)?m.a.createElement("span",{"data-heap-id":"paper-meta-journal"},t.journal.name):null}render(){const{paperDetail:e,paperDetail:{paper:t,entitlement:r,skipperExperiments:a}}=this.props,{cookieJar:n,envInfo:{isMobile:i},history:s}=this.context,{heapGroup:o}=this.state,c=t.citationStats.numCitations>0,l=(()=>{if("claim"in Ni.a.parse(s.location.search.replace(/^\?/,"")))return!0;const e=n.getCookie(wi.a);if(e){const[r,a]=e.split(",");if(a===t.id)return!0}return!1})();return m.a.createElement("div",{className:"fresh-paper-detail-page paper-detail-cards",role:"main",id:"main-content","data-heap-id":Pa.b.ABTestMock.KEY,"data-heap-group":o},m.a.createElement("div",{className:"fresh-paper-detail-page__above-the-fold"},m.a.createElement("div",{className:"centered-max-width-content"},l&&m.a.createElement(Jt.c,{feature:e=>e.AuthorClaimOnPDP},m.a.createElement(Jt.b,null,m.a.createElement(Zn,{paperDetail:e}))),m.a.createElement(de.a,{layout:"row",layoutMed:"column",position:"relative"},m.a.createElement(Rt.a,{className:"flex-item__left-column",width:"66"},m.a.createElement(y,{id:"paper-header",className:i?"fresh-paper-detail-page__header__mobile":"fresh-paper-detail-page__header","data-test-id":"paper-detail-page-header",navLabel:Object(oe.c)(e=>e.paperDetail.tabLabels.abstract)},m.a.createElement(Za.a,{paper:t,onClick:this.trackMetadataClick,isFreshPDP:!0,maxAuthors:3,isPDPMeta:!0,className:"paper-detail__paper-meta-top"}),m.a.createElement("h1",{"data-test-id":"paper-detail-title"},t.title.text),m.a.createElement("pre",{className:"bibtex-citation","data-nosnippet":!0},Object(Ci.a)(t)),m.a.createElement(ti,{childList:[this.renderAuthorList(),this.renderVenueAndYearListItem(),this.renderFieldOfStudy(),this.renderJournal()]}),m.a.createElement(St,{paper:t,skipperExperiments:a}),t.paperAbstract.text?m.a.createElement(Kn,{experiment:Pa.b.PaperHighlightAbstractV2,eligibilityTest:()=>e.skipperExperiments.memberOf("paper-abstract-highlight-v2")},m.a.createElement(_a,null,m.a.createElement("div",{className:"fresh-paper-detail-page__abstract","data-test-id":"abstract-text"},m.a.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:"Abstract"}),m.a.createElement(Ft.a,{className:"abstract__text text--preline",text:t.paperAbstract.text,limit:i?200:500}))),m.a.createElement(Sa,{variation:Pa.b.PaperHighlightAbstractV2.Variation.HIGHLIGHTED_ABSTRACT_DEFAULT_TOGGLE_OFF},m.a.createElement(Ja,{paperDetail:e,isMobile:i}))):null,m.a.createElement(zr,{paper:t,entitlement:r,trackActionClick:this.trackActionClick,isPdp:!0}))),m.a.createElement(Rt.a,{className:"flex-item__right-column",width:"33"},m.a.createElement(vi.a,{title:t.title.text,corpusId:t.corpusId,label:Object(oe.c)(e=>e.socialShareOptions.shareButtonLabel.sharePaper)}),m.a.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:"Scorecard"}),m.a.createElement(Oi,{paperDetail:e}))))),m.a.createElement("div",{className:O()("centered-max-width-content","paper-detail-page__cards",{"paper-detail-page__cards--mobile":i})},m.a.createElement(R,null,m.a.createElement(Ba,{paperDetail:e}),m.a.createElement(Gt,{paperDetail:e}),m.a.createElement(Ia,{paperDetail:e}),c&&m.a.createElement(Ot,{paperDetail:e}),Rn.hasContent({paperDetail:e})&&m.a.createElement(Rn,{paperDetail:e}),m.a.createElement(Jt.c,{feature:Ze.b.SimilarPapersPdp},m.a.createElement(Jt.b,null,m.a.createElement(Pi,{paperDetail:e}))))),m.a.createElement("div",{className:"paper-detail-page__paper-nav"},m.a.createElement(cn,null)),m.a.createElement(va,{experiment:Pa.b.PdpPromoBannerMultiArmV2,isolated:!0},m.a.createElement(Sa,{variation:Pa.b.PdpPromoBannerMultiArmV2.Variation.ACCOUNT_CREATE},m.a.createElement(ai,{promotionKey:en.a.PaperDetail.ACCOUNT_CREATE,delayTriggerMs:1e3})),m.a.createElement(Sa,{variation:Pa.b.PdpPromoBannerMultiArmV2.Variation.INSTITUTION_LOGIN},m.a.createElement(ai,{promotionKey:en.a.PaperDetail.INSTITUTION_LOGIN,delayTriggerMs:1e3})),m.a.createElement(Sa,{variation:Pa.b.PdpPromoBannerMultiArmV2.Variation.LIBRARY_SAVE},m.a.createElement(ai,{promotionKey:en.a.PaperDetail.LIBRARY_SAVE,delayTriggerMs:1e3}))))}}ji(Ii,"propTypes",{paperDetail:b.a.instanceOf(Ut.h).isRequired}),ji(Ii,"contextTypes",{cookieJar:b.a.instanceOf(xi.b).isRequired,envInfo:b.a.instanceOf(p.a).isRequired,history:b.a.instanceOf(ce.a).isRequired,paperStore:b.a.instanceOf(er.b).isRequired,weblabStore:b.a.instanceOf(at.b).isRequired});var ki=r(26),Di=r(392),Ri=r(419),Li=r(146),Ai=r(139),Fi=r(141),Mi=r(680),qi=r(598),Bi=r(117);function Hi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function zi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"default",(function(){return Ui}));class Ui extends h.Component{constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];super(e,...r),zi(this,"onAuthStoreChange",()=>{const{dispatcher:e,weblabStore:t}=this.context;setTimeout(async()=>{const r=await this.apiFetchPaperDetail(),a=Object(Mi.a)({paperDetailApiPayload:r,weblabStore:t});a&&e.dispatch(a)},5)}),zi(this,"getStateFromPaperStore",()=>({loading:this.context.paperStore.isLoading(),paperDetail:this.context.paperStore.getPaperDetail()})),zi(this,"apiFetchPaperDetail",()=>{const{paperDetail:e}=this.state,t=e.paper.id;return this.context.api.fetchPaperDetail({paperId:t,requireSlug:!1})}),zi(this,"fetchPaperLite",async e=>{var t;const{api:r}=this.context,a=((null!=(t=await r.fetchPapersByIds({paperIds:[e],model:"PaperLite"}))&&null!=(t=t.resultData)?t.paperLites:t)||[]).map(e=>De.a.fromJS(e)),[n]=a;return Ka()(n,"API didn't return a paper to paperId=\"".concat(e,'"')),n}),zi(this,"openOrganizePapersShelf",async()=>{const{dispatcher:e}=this.context,{paperId:t}=this.props,r=await this.fetchPaperLite(t),a=Object(Di.c)({paperId:t,paperTitle:r.title});e.dispatch(a)}),zi(this,"fetchLibraryFolders",()=>{const{api:e,libraryFolderStore:t}=this.context;return t.isUninitialized()?e.getLibraryFolders():Promise.resolve()}),zi(this,"handleSaveToLibraryWithShelf",async()=>{const{api:e,messageStore:t,dispatcher:r}=this.context,{paperId:a}=this.props,n=await this.fetchPaperLite(a);this.fetchLibraryFolders().then(()=>{const i=Ri.a.fromJS({paperId:a,paperTitle:n.title,sourceType:Li.a});e.createLibraryEntryBulk(i).catch(e=>{t.addError(Object(oe.c)(e=>e.library.saveToLibraryShelf.errorMessage)),zt.a.error(e)}),r.dispatch(Object(Di.e)({paper:n}))}).catch(e=>{Object(tt.a)("library",'failed to open Save To Library shelf for paperId="'.concat(a,'"]'),e);const r=Object(oe.c)(e=>e.library.message.error.header),n=Object(oe.c)(e=>e.library.message.error.body);t.addError(n,r)})}),zi(this,"saveToLibraryNew",()=>{const{authStore:e,dispatcher:t}=this.context;e.ensureLogin({dispatcher:t,location:Fr.g.pdpLibrary}).then(async()=>{await this.fetchLibraryFolders(),this.getStateFromLibraryFolderStore().isInLibrary?this.openOrganizePapersShelf():this.handleSaveToLibraryWithShelf()},e=>{zt.a.warn(e)})});const{authStore:n,libraryFolderStore:i,paperStore:s}=this.context;this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(r),!0).forEach((function(t){zi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromLibraryFolderStore(),{},this.getStateFromPaperStore()),n.registerComponent(this,this.onAuthStoreChange),i.registerComponent(this,()=>{this.setState(this.getStateFromLibraryFolderStore())}),s.registerComponent(this,()=>{this.setState(this.getStateFromPaperStore())})}componentDidMount(){const{history:e}=this.context;Object(ki.o)(e.location.search).save_to_library&&this.saveToLibraryNew()}getStateFromLibraryFolderStore(){const{libraryFolderStore:e}=this.context,{paperId:t}=this.props;return{isInLibrary:e.isPaperInLibrary(t)}}render(){const{paperDetail:e,loading:t}=this.state,r=!t&&h.createElement(gt,{target:ie.a.PaperDetail.SCROLL_LANDMARKS,section:"Footer"},h.createElement(s.a,null));return h.createElement(o.a,{heapProps:{"page-type":qi.b,"page-paper-id":e.paper.id}},h.createElement(l.a,{key:e.paper.id,className:this.context.envInfo.isMobile?"detail":"paper",footer:r},t?h.createElement("div",{className:"container"},h.createElement("div",{className:"loading-controls flex-row-vcenter",role:"main",id:"main-content"},h.createElement(c.a,{testId:"paper-details-loading"})," Loading")):h.createElement(h.Fragment,null,h.createElement(Ii,{paperDetail:e}),Object(Bi.b)(this.props.route.routes,{paperDetail:e}))))}}zi(Ui,"contextTypes",{api:b.a.instanceOf($e.a).isRequired,authStore:b.a.instanceOf(br.a).isRequired,dispatcher:b.a.instanceOf(d.a).isRequired,envInfo:b.a.instanceOf(p.a).isRequired,history:b.a.instanceOf(ce.a).isRequired,libraryFolderStore:b.a.instanceOf(Ai.a).isRequired,messageStore:b.a.instanceOf(Fi.a).isRequired,paperStore:b.a.instanceOf(er.b).isRequired,weblabStore:b.a.instanceOf(at.b).isRequired})},878:function(e,t,r){"use strict";e.exports=r(879)},879:function(e,t,r){"use strict";
/** @license React v16.14.0
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=r(200),n=r(9);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s="function"==typeof Symbol&&Symbol.for,o=s?Symbol.for("react.portal"):60106,c=s?Symbol.for("react.fragment"):60107,l=s?Symbol.for("react.strict_mode"):60108,p=s?Symbol.for("react.profiler"):60114,u=s?Symbol.for("react.provider"):60109,d=s?Symbol.for("react.context"):60110,h=s?Symbol.for("react.concurrent_mode"):60111,m=s?Symbol.for("react.forward_ref"):60112,f=s?Symbol.for("react.suspense"):60113,b=s?Symbol.for("react.suspense_list"):60120,g=s?Symbol.for("react.memo"):60115,y=s?Symbol.for("react.lazy"):60116,E=s?Symbol.for("react.block"):60121,O=s?Symbol.for("react.fundamental"):60117,v=s?Symbol.for("react.scope"):60119;function _(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case c:return"Fragment";case o:return"Portal";case p:return"Profiler";case l:return"StrictMode";case f:return"Suspense";case b:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case d:return"Context.Consumer";case u:return"Context.Provider";case m:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case g:return _(e.type);case E:return _(e.render);case y:if(e=1===e._status?e._result:null)return _(e)}return null}var S=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;S.hasOwnProperty("ReactCurrentDispatcher")||(S.ReactCurrentDispatcher={current:null}),S.hasOwnProperty("ReactCurrentBatchConfig")||(S.ReactCurrentBatchConfig={suspense:null});var P={};function w(e,t){for(var r=0|e._threadCount;r<=t;r++)e[r]=e._currentValue2,e._threadCount=r+1}for(var x=new Uint16Array(16),C=0;15>C;C++)x[C]=C+1;x[15]=0;var T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N=Object.prototype.hasOwnProperty,j={},I={};function k(e){return!!N.call(I,e)||!N.call(j,e)&&(T.test(e)?I[e]=!0:(j[e]=!0,!1))}function D(e,t,r,a,n,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){R[e]=new D(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];R[t]=new D(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){R[e]=new D(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){R[e]=new D(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){R[e]=new D(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){R[e]=new D(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){R[e]=new D(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){R[e]=new D(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){R[e]=new D(e,5,!1,e.toLowerCase(),null,!1)}));var L=/[\-:]([a-z])/g;function A(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(L,A);R[t]=new D(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(L,A);R[t]=new D(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(L,A);R[t]=new D(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){R[e]=new D(e,1,!1,e.toLowerCase(),null,!1)})),R.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){R[e]=new D(e,1,!1,e.toLowerCase(),null,!0)}));var F=/["'&<>]/;function M(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=F.exec(e);if(t){var r,a="",n=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}n!==r&&(a+=e.substring(n,r)),n=r+1,a+=t}e=n!==r?a+e.substring(n,r):a}return e}function q(e,t){var r,a=R.hasOwnProperty(e)?R[e]:null;return(r="style"!==e)&&(r=null!==a?0===a.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),r||function(e,t,r,a){if(null==t||function(e,t,r,a){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,a))return!0;if(a)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,a,!1)?"":null!==a?(e=a.attributeName,3===(r=a.type)||4===r&&!0===t?e+'=""':(a.sanitizeURL&&(t=""+t),e+'="'+M(t)+'"')):k(e)?e+'="'+M(t)+'"':""}var B="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},H=null,z=null,U=null,V=!1,Q=!1,Y=null,W=0;function G(){if(null===H)throw Error(i(321));return H}function K(){if(0<W)throw Error(i(312));return{memoizedState:null,queue:null,next:null}}function X(){return null===U?null===z?(V=!1,z=U=K()):(V=!0,U=z):null===U.next?(V=!1,U=U.next=K()):(V=!0,U=U.next),U}function $(e,t,r,a){for(;Q;)Q=!1,W+=1,U=null,r=e(t,a);return z=H=null,W=0,U=Y=null,r}function J(e,t){return"function"==typeof t?t(e):t}function Z(e,t,r){if(H=G(),U=X(),V){var a=U.queue;if(t=a.dispatch,null!==Y&&void 0!==(r=Y.get(a))){Y.delete(a),a=U.memoizedState;do{a=e(a,r.action),r=r.next}while(null!==r);return U.memoizedState=a,[a,t]}return[U.memoizedState,t]}return e=e===J?"function"==typeof t?t():t:void 0!==r?r(t):t,U.memoizedState=e,e=(e=U.queue={last:null,dispatch:null}).dispatch=ee.bind(null,H,e),[U.memoizedState,e]}function ee(e,t,r){if(!(25>W))throw Error(i(301));if(e===H)if(Q=!0,e={action:r,next:null},null===Y&&(Y=new Map),void 0===(r=Y.get(t)))Y.set(t,e);else{for(t=r;null!==t.next;)t=t.next;t.next=e}}function te(){}var re=0,ae={readContext:function(e){var t=re;return w(e,t),e[t]},useContext:function(e){G();var t=re;return w(e,t),e[t]},useMemo:function(e,t){if(H=G(),t=void 0===t?null:t,null!==(U=X())){var r=U.memoizedState;if(null!==r&&null!==t){e:{var a=r[1];if(null===a)a=!1;else{for(var n=0;n<a.length&&n<t.length;n++)if(!B(t[n],a[n])){a=!1;break e}a=!0}}if(a)return r[0]}}return e=e(),U.memoizedState=[e,t],e},useReducer:Z,useRef:function(e){H=G();var t=(U=X()).memoizedState;return null===t?(e={current:e},U.memoizedState=e):t},useState:function(e){return Z(J,e)},useLayoutEffect:function(){},useCallback:function(e){return e},useImperativeHandle:te,useEffect:te,useDebugValue:te,useResponder:function(e,t){return{props:t,responder:e}},useDeferredValue:function(e){return G(),e},useTransition:function(){return G(),[function(e){e()},!1]}},ne="http://www.w3.org/1999/xhtml";function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var se={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},oe=a({menuitem:!0},se),ce={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},le=["Webkit","ms","Moz","O"];Object.keys(ce).forEach((function(e){le.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ce[t]=ce[e]}))}));var pe=/([A-Z])/g,ue=/^ms-/,de=n.Children.toArray,he=S.ReactCurrentDispatcher,me={listing:!0,pre:!0,textarea:!0},fe=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,be={},ge={};var ye=Object.prototype.hasOwnProperty,Ee={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Oe(e,t){if(void 0===e)throw Error(i(152,_(t)||"Component"))}function ve(e,t,r){function s(n,s){var o=s.prototype&&s.prototype.isReactComponent,c=function(e,t,r,a){if(a&&("object"==typeof(a=e.contextType)&&null!==a))return w(a,r),a[r];if(e=e.contextTypes){for(var n in r={},e)r[n]=t[n];t=r}else t=P;return t}(s,t,r,o),l=[],p=!1,u={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===l)return null},enqueueReplaceState:function(e,t){p=!0,l=[t]},enqueueSetState:function(e,t){if(null===l)return null;l.push(t)}};if(o){if(o=new s(n.props,c,u),"function"==typeof s.getDerivedStateFromProps){var d=s.getDerivedStateFromProps.call(null,n.props,o.state);null!=d&&(o.state=a({},o.state,d))}}else if(H={},o=s(n.props,c,u),null==(o=$(s,n.props,o,c))||null==o.render)return void Oe(e=o,s);if(o.props=n.props,o.context=c,o.updater=u,void 0===(u=o.state)&&(o.state=u=null),"function"==typeof o.UNSAFE_componentWillMount||"function"==typeof o.componentWillMount)if("function"==typeof o.componentWillMount&&"function"!=typeof s.getDerivedStateFromProps&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&"function"!=typeof s.getDerivedStateFromProps&&o.UNSAFE_componentWillMount(),l.length){u=l;var h=p;if(l=null,p=!1,h&&1===u.length)o.state=u[0];else{d=h?u[0]:o.state;var m=!0;for(h=h?1:0;h<u.length;h++){var f=u[h];null!=(f="function"==typeof f?f.call(o,d,n.props,c):f)&&(m?(m=!1,d=a({},d,f)):a(d,f))}o.state=d}}else l=null;if(Oe(e=o.render(),s),"function"==typeof o.getChildContext&&"object"==typeof(n=s.childContextTypes)){var b=o.getChildContext();for(var g in b)if(!(g in n))throw Error(i(108,_(s)||"Unknown",g))}b&&(t=a({},t,b))}for(;n.isValidElement(e);){var o=e,c=o.type;if("function"!=typeof c)break;s(o,c)}return{child:e,context:t}}var _e=function(){function e(e,t){n.isValidElement(e)?e.type!==c?e=[e]:(e=e.props.children,e=n.isValidElement(e)?[e]:de(e)):e=de(e),e={type:null,domNamespace:ne,children:e,childIndex:0,context:P,footer:""};var r=x[0];if(0===r){var a=x,s=2*(r=a.length);if(!(65536>=s))throw Error(i(304));var o=new Uint16Array(s);for(o.set(a),(x=o)[0]=r+1,a=r;a<s-1;a++)x[a]=a+1;x[s-1]=0}else x[0]=x[r];this.threadID=r,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;x[e]=x[0],x[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,r=e.type._context,a=this.threadID;w(r,a);var n=r[a];this.contextStack[t]=r,this.contextValueStack[t]=n,r[a]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],r=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=r},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=re;re=this.threadID;var r=he.current;he.current=ae;try{for(var a=[""],n=!1;a[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var s=this.threadID;x[s]=x[0],x[0]=s;break}var o=this.stack[this.stack.length-1];if(n||o.childIndex>=o.children.length){var c=o.footer;if(""!==c&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===o.type)this.currentSelectValue=null;else if(null!=o.type&&null!=o.type.type&&o.type.type.$$typeof===u)this.popProvider(o.type);else if(o.type===f){this.suspenseDepth--;var l=a.pop();if(n){n=!1;var p=o.fallbackFrame;if(!p)throw Error(i(303));this.stack.push(p),a[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}a[this.suspenseDepth]+=l}a[this.suspenseDepth]+=c}else{var d=o.children[o.childIndex++],h="";try{h+=this.render(d,o.context,o.domNamespace)}catch(e){if(null!=e&&"function"==typeof e.then)throw Error(i(294));throw e}a.length<=this.suspenseDepth&&a.push(""),a[this.suspenseDepth]+=h}}return a[0]}finally{he.current=r,re=t}},t.render=function(e,t,r){if("string"==typeof e||"number"==typeof e)return""===(r=""+e)?"":this.makeStaticMarkup?M(r):this.previousWasTextNode?"\x3c!-- --\x3e"+M(r):(this.previousWasTextNode=!0,M(r));if(e=(t=ve(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!n.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((r=e.$$typeof)===o)throw Error(i(257));throw Error(i(258,r.toString()))}return e=de(e),this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),""}var s=e.type;if("string"==typeof s)return this.renderDOM(e,t,r);switch(s){case l:case h:case p:case b:case c:return e=de(e.props.children),this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),"";case f:throw Error(i(294))}if("object"==typeof s&&null!==s)switch(s.$$typeof){case m:H={};var E=s.render(e.props,e.ref);return E=$(s.render,e.props,E,e.ref),E=de(E),this.stack.push({type:null,domNamespace:r,children:E,childIndex:0,context:t,footer:""}),"";case g:return e=[n.createElement(s.type,a({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),"";case u:return r={type:e,domNamespace:r,children:s=de(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(r),"";case d:s=e.type,E=e.props;var _=this.threadID;return w(s,_),s=de(E.children(s[_])),this.stack.push({type:e,domNamespace:r,children:s,childIndex:0,context:t,footer:""}),"";case O:throw Error(i(338));case y:switch(function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(s=e.type),s._status){case 1:return e=[n.createElement(s._result,a({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),"";case 2:throw s._result;default:throw Error(i(295))}case v:throw Error(i(343))}throw Error(i(130,null==s?s:typeof s,""))},t.renderDOM=function(e,t,r){var s=e.type.toLowerCase();if(r===ne&&ie(s),!be.hasOwnProperty(s)){if(!fe.test(s))throw Error(i(65,s));be[s]=!0}var o=e.props;if("input"===s)o=a({type:void 0},o,{defaultChecked:void 0,defaultValue:void 0,value:null!=o.value?o.value:o.defaultValue,checked:null!=o.checked?o.checked:o.defaultChecked});else if("textarea"===s){var c=o.value;if(null==c){c=o.defaultValue;var l=o.children;if(null!=l){if(null!=c)throw Error(i(92));if(Array.isArray(l)){if(!(1>=l.length))throw Error(i(93));l=l[0]}c=""+l}null==c&&(c="")}o=a({},o,{value:void 0,children:""+c})}else if("select"===s)this.currentSelectValue=null!=o.value?o.value:o.defaultValue,o=a({},o,{value:void 0});else if("option"===s){l=this.currentSelectValue;var p=function(e){if(null==e)return e;var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(o.children);if(null!=l){var u=null!=o.value?o.value+"":p;if(c=!1,Array.isArray(l)){for(var d=0;d<l.length;d++)if(""+l[d]===u){c=!0;break}}else c=""+l===u;o=a({selected:void 0,children:void 0},o,{selected:c,children:p})}}if(c=o){if(oe[s]&&(null!=c.children||null!=c.dangerouslySetInnerHTML))throw Error(i(137,s,""));if(null!=c.dangerouslySetInnerHTML){if(null!=c.children)throw Error(i(60));if("object"!=typeof c.dangerouslySetInnerHTML||!("__html"in c.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=c.style&&"object"!=typeof c.style)throw Error(i(62,""))}for(O in c=o,l=this.makeStaticMarkup,p=1===this.stack.length,u="<"+e.type,c)if(ye.call(c,O)){var h=c[O];if(null!=h){if("style"===O){d=void 0;var m="",f="";for(d in h)if(h.hasOwnProperty(d)){var b=0===d.indexOf("--"),g=h[d];if(null!=g){if(b)var y=d;else if(y=d,ge.hasOwnProperty(y))y=ge[y];else{var E=y.replace(pe,"-$1").toLowerCase().replace(ue,"-ms-");y=ge[y]=E}m+=f+y+":",f=d,m+=b=null==g||"boolean"==typeof g||""===g?"":b||"number"!=typeof g||0===g||ce.hasOwnProperty(f)&&ce[f]?(""+g).trim():g+"px",f=";"}}h=m||null}d=null;e:if(b=s,g=c,-1===b.indexOf("-"))b="string"==typeof g.is;else switch(b){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":b=!1;break e;default:b=!0}b?Ee.hasOwnProperty(O)||(d=k(d=O)&&null!=h?d+'="'+M(h)+'"':""):d=q(O,h),d&&(u+=" "+d)}}l||p&&(u+=' data-reactroot=""');var O=u;c="",se.hasOwnProperty(s)?O+="/>":(O+=">",c="</"+e.type+">");e:{if(null!=(l=o.dangerouslySetInnerHTML)){if(null!=l.__html){l=l.__html;break e}}else if("string"==typeof(l=o.children)||"number"==typeof l){l=M(l);break e}l=null}return null!=l?(o=[],me.hasOwnProperty(s)&&"\n"===l.charAt(0)&&(O+="\n"),O+=l):o=de(o.children),e=e.type,r=null==r||"http://www.w3.org/1999/xhtml"===r?ie(e):"http://www.w3.org/2000/svg"===r&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":r,this.stack.push({domNamespace:r,type:s,children:o,childIndex:0,context:t,footer:c}),this.previousWasTextNode=!1,O},e}(),Se={renderToString:function(e){e=new _e(e,!1);try{return e.read(1/0)}finally{e.destroy()}},renderToStaticMarkup:function(e){e=new _e(e,!0);try{return e.read(1/0)}finally{e.destroy()}},renderToNodeStream:function(){throw Error(i(207))},renderToStaticNodeStream:function(){throw Error(i(208))},version:"16.14.0"};e.exports=Se.default||Se}}]);
//# sourceMappingURL=bundle-42.js.map